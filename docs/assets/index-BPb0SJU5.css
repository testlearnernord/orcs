:root{color-scheme:dark;--bg-base: #0d1117;--bg-elevated: #111827;--bg-panel: #131c2b;--border-soft: #1f2937;--border-strong: #273554;--text-primary: #e2e8f0;--text-muted: #94a3b8;--accent: #38bdf8;--danger: #ee6666;--ally: #6af;--friend: #7ad;--blood: #a6f;--hierarchy: #889;--ring-king: #ffd166;--ring-player: #f4a261;--ring-captain: #8ecae6;--ring-scout: #95d5b2;--ring-grunt: #adb5bd;--card-bg: #121821;--line-rival: #e66;--line-ally: #6af;--line-friend: #7ad;--line-blood: #a6f;--line-hierarchy: #889;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 12px;--spacing-lg: 16px}*{box-sizing:border-box}.officer-avatar{position:relative;display:block;overflow:hidden;border-radius:12px;background-color:#11182766;background-repeat:no-repeat;background-position:center}.officer-avatar--fallback{background-image:none!important}.officer-avatar--fallback svg{display:block}html,body{height:100%;margin:0;background:var(--bg-base);color:var(--text-primary);font:14px/1.45 Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}body.modal-open{overflow:hidden}#app,.nemesis-app{height:100%;display:flex;flex-direction:column}.hud{display:flex;align-items:center;padding:var(--spacing-md);gap:var(--spacing-md);border-bottom:1px solid var(--border-strong);background:#0d1117f2;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);position:sticky;top:0;z-index:20}.brand{font-weight:700;letter-spacing:.1em}.hud-mode{margin-left:16px;padding:4px 12px;border-radius:999px;border:1px solid rgba(148,163,184,.35);background:#182436a6;font-size:.7rem;letter-spacing:.12em;text-transform:uppercase;color:var(--text-muted);white-space:nowrap}body[data-game-mode=player] .hud-mode{color:#bae6fd;border-color:#38bdf880;background:#2563eb2e}.hud-controls{display:flex;gap:var(--spacing-sm);margin-left:auto;flex-wrap:wrap}button{background:var(--bg-elevated);color:var(--text-primary);border:1px solid var(--border-soft);padding:6px 12px;border-radius:999px;font-weight:600;cursor:pointer;transition:background .12s ease,transform .12s ease}button:hover,button:focus-visible{background:#1b2435;transform:translateY(-1px);outline:none}button:disabled{opacity:.4;cursor:default;transform:none}.layout{flex:1;display:grid;grid-template-columns:minmax(240px,280px) minmax(0,1fr) minmax(260px,320px);gap:var(--spacing-lg);padding:var(--spacing-lg);overflow:hidden}.layout>*{background:var(--bg-panel);border:1px solid var(--border-strong);border-radius:16px;padding:var(--spacing-lg);overflow:hidden}.dock{display:flex;flex-direction:column;overflow:hidden}.feed{display:flex;flex-direction:column;gap:var(--spacing-md);overflow-y:auto;max-height:100%;padding:var(--spacing-sm)}.feed-body{display:flex;flex-direction:column;gap:var(--spacing-sm)}.feed-item{padding:var(--spacing-sm);background:#18243666;border-radius:8px;color:#cbd5e1}.feed-empty{color:var(--text-muted);text-align:center;margin:auto}.ranks{position:relative;overflow-y:auto}.filters-bar{position:sticky;top:0;z-index:5;display:flex;flex-wrap:wrap;align-items:center;gap:var(--spacing-md);margin:calc(var(--spacing-lg) * -1) calc(var(--spacing-lg) * -1) var(--spacing-lg);padding:var(--spacing-md) var(--spacing-lg);background:linear-gradient(140deg,#0f172af2,#090c14eb);border-bottom:1px solid rgba(148,163,184,.16);box-shadow:0 18px 28px #080c1473;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.filters-bar.has-active{border-color:#38bdf859;box-shadow:0 22px 36px #38bdf829}.filters-bar__pills{display:flex;flex-wrap:wrap;gap:var(--spacing-sm)}.filter-pill{background:#1e293bc7;border:1px solid rgba(148,163,184,.28);color:var(--text-muted);font-size:.72rem;letter-spacing:.08em;text-transform:uppercase;padding:6px 14px;border-radius:999px;transform:none;transition:background .14s ease,color .14s ease,border-color .14s ease,box-shadow .16s ease}.filter-pill:hover,.filter-pill:focus-visible{background:#38bdf82e;color:#e2e8f0;border-color:#94a3b861;outline:none;transform:none}.filter-pill.is-active{background:var(--accent);color:#0f172a;border-color:transparent;box-shadow:0 0 0 1px #38bdf859,0 14px 34px #38bdf847}.filter-pill.is-active:hover,.filter-pill.is-active:focus-visible{background:var(--accent);color:#0f172a;border-color:transparent}.filters-bar__sort{margin-left:auto;display:flex;align-items:center;gap:var(--spacing-sm);font-size:.75rem;color:var(--text-muted)}.filters-bar__sort-label{text-transform:uppercase;letter-spacing:.16em}.filters-bar__select{background:#0d131feb;border:1px solid rgba(148,163,184,.28);color:var(--text-primary);padding:6px 28px 6px 12px;border-radius:999px;font-weight:600;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;transition:border-color .14s ease,box-shadow .14s ease,background .14s ease}.filters-bar__select:hover,.filters-bar__select:focus-visible{outline:none;border-color:#38bdf873;box-shadow:0 0 0 2px #38bdf833;background:#0f172afa}.rank-list{display:flex;flex-direction:column;gap:var(--spacing-lg);padding-bottom:var(--spacing-lg)}.rank-group.is-empty{display:none}.rank-group{margin:0}.rank-group h3{margin:0 0 var(--spacing-sm) 0;font-size:.85rem;text-transform:uppercase;letter-spacing:.12em;color:var(--text-muted)}.rank-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--spacing-lg)}.officer-card{--ring-color: var(--ring-grunt);--ring-shadow: rgba(173, 181, 189, .3);display:grid;grid-template-columns:96px 1fr;gap:var(--spacing-lg);background:linear-gradient(145deg,#121821f5,#0a0f18eb);border-radius:20px;border:1px solid rgba(24,33,48,.7);padding:var(--spacing-lg);box-shadow:0 14px 36px #080c1473;transition:transform .18s ease,box-shadow .2s ease,border-color .2s ease}.officer-card[data-rank=king]{--ring-color: var(--ring-king);--ring-shadow: rgba(255, 209, 102, .4)}.officer-card[data-rank=player]{--ring-color: var(--ring-player);--ring-shadow: rgba(244, 162, 97, .32)}.officer-card[data-rank=captain]{--ring-color: var(--ring-captain);--ring-shadow: rgba(142, 202, 230, .32)}.officer-card[data-rank=scout]{--ring-color: var(--ring-scout);--ring-shadow: rgba(149, 213, 178, .32)}.officer-card[data-rank=grunt]{--ring-color: var(--ring-grunt);--ring-shadow: rgba(173, 181, 189, .28)}.officer-card:hover,.officer-card:focus-visible{transform:translateY(-2px);border-color:#38bdf899;box-shadow:0 22px 48px #38bdf833;outline:none}.officer-card:focus-visible{box-shadow:0 0 0 2px #38bdf861,0 24px 52px #38bdf83d}.officer-card.rank-changed{animation:rankGlow .56s ease}@keyframes rankGlow{0%{box-shadow:0 0 0 2px var(--ring-color),0 0 0 14px #ffffff14}to{box-shadow:0 14px 36px #080c1473}}.officer-card__portrait{position:relative;width:96px;aspect-ratio:1;border-radius:12px;overflow:hidden;background:none;box-shadow:0 0 0 3px var(--ring-color),0 18px 38px var(--ring-shadow);transition:box-shadow .2s ease}.officer-card:hover .officer-card__portrait,.officer-card:focus-visible .officer-card__portrait{box-shadow:0 0 0 3px var(--ring-color),0 26px 48px var(--ring-shadow)}.officer-card__portrait-img{width:100%;height:100%;border-radius:inherit;filter:saturate(1.05);background:none}.officer-card[data-status=dead] .officer-card__portrait-img{filter:grayscale(.9) brightness(.85)}.officer-card__content{display:flex;flex-direction:column;gap:var(--spacing-md);min-width:0}.officer-card__header{display:flex;flex-direction:column;gap:6px}.officer-card__title-row{display:flex;align-items:baseline;gap:var(--spacing-sm)}.officer-card__title-row h3{flex:1;margin:0;font-size:1.1rem;letter-spacing:.01em}.officer-card__level{font-size:.75rem;text-transform:uppercase;letter-spacing:.12em;color:var(--text-muted);padding:2px 8px;border-radius:999px;border:1px solid rgba(148,163,184,.25);background:#94a3b814}.officer-card__meta{display:flex;flex-wrap:wrap;gap:var(--spacing-sm)}.officer-card__role{font-size:.75rem;letter-spacing:.14em;text-transform:uppercase;padding:4px 12px;border-radius:999px;border:1px solid var(--ring-color);color:var(--ring-color);background:#121b2ab3}.officer-card__badge{font-size:.75rem;padding:4px 10px;border-radius:999px;border:1px solid rgba(148,163,184,.25);background:#1d293ba6;color:#dbe6ff}.officer-card__badge--muted{color:var(--text-muted);border-color:#94a3b82e;background:#151e2da6}.officer-card__traits{display:flex;flex-wrap:wrap;gap:var(--spacing-sm)}.officer-card__trait{font-size:.75rem;letter-spacing:.02em;padding:4px 10px;border-radius:999px;border:1px solid rgba(59,78,109,.45);background:#131e2ed1}.officer-card__trait--muted{opacity:.6}.officer-card__stats{display:grid;gap:var(--spacing-sm)}.officer-card__stat{display:grid;grid-template-columns:90px 1fr 64px;align-items:center;gap:var(--spacing-sm)}.officer-card__stat-label{font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;color:var(--text-muted)}.officer-card__stat-bar{height:6px;border-radius:999px;background:#0f172ad1;overflow:hidden}.officer-card__stat-fill{height:100%;width:0;border-radius:inherit;background:linear-gradient(90deg,var(--line-ally),var(--line-friend));transition:width .32s cubic-bezier(.4,.15,.2,1)}.officer-card__stat-fill.is-animating{filter:brightness(1.2)}.officer-card__stat-value{font-variant-numeric:tabular-nums;font-size:.78rem;text-align:right;color:var(--text-muted)}.officer-card__stat-value:after{content:attr(data-delta);margin-left:6px;font-size:.7rem}.officer-card__stat-value[data-delta=""]:after{content:""}.officer-card__stat-value.is-up{color:#4ade80}.officer-card__stat-value.is-down{color:var(--danger)}.officer-card__footer{display:flex;flex-wrap:wrap;gap:var(--spacing-sm);margin-top:auto}.officer-card__status{font-size:.7rem;letter-spacing:.12em;text-transform:uppercase;padding:4px 10px;border-radius:999px;border:1px solid rgba(148,163,184,.25);background:#131d2cd1}.officer-card__status--ally{border-color:#66aaffa6;color:var(--line-ally)}.officer-card__status--friend{border-color:#7added99;color:var(--line-friend)}.officer-card__status--rival{border-color:#e669;color:var(--line-rival)}.officer-card__status--blood{border-color:#a6f9;color:var(--line-blood)}.officer-card__status--empty{border-style:dashed;color:var(--text-muted)}.officer-tooltip{position:absolute;min-width:280px;max-width:320px;background:#0f172afa;border:1px solid var(--border-strong);border-radius:12px;padding:var(--spacing-md);pointer-events:auto;z-index:40;box-shadow:0 16px 40px #0f172a80}.officer-tooltip header{display:flex;flex-direction:column;gap:4px}.officer-tooltip h2{margin:0;font-size:1.05rem}.officer-tooltip .sub{color:var(--text-muted);font-size:.8rem}.officer-tooltip .archetype{color:var(--ally);font-size:.75rem}.officer-tooltip .tooltip-traits,.officer-tooltip footer{display:flex;gap:var(--spacing-xs);flex-wrap:wrap;margin-top:var(--spacing-sm)}.tooltip-badge{background:#3b4e6d99;border-radius:6px;padding:2px 6px;font-size:.7rem}.tooltip-badge--muted{opacity:.6}.officer-tooltip dl{margin:var(--spacing-md) 0;display:grid;grid-template-columns:80px 1fr;gap:var(--spacing-xs) var(--spacing-md)}.officer-tooltip dt{color:var(--text-muted);font-size:.75rem}.officer-tooltip dd{margin:0;font-variant-numeric:tabular-nums}.tooltip-relations,.tooltip-memories{list-style:none;margin:var(--spacing-sm) 0 0 0;padding:0;display:flex;flex-direction:column;gap:6px}.tooltip-relations li,.tooltip-memories li{display:flex;gap:var(--spacing-sm)}.tooltip-relations li .icon{font-size:1rem}.tooltip-empty{color:var(--text-muted);font-size:.8rem}.officer-tooltip footer button{flex:1;font-size:.8rem;border-radius:8px}.relations-overlay{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:3}.relations-overlay.is-hidden{opacity:0;visibility:hidden}.relations-overlay.is-disabled svg{opacity:.08}.relations-overlay svg{width:100%;height:100%}.relations-overlay__edge{pointer-events:visibleStroke;stroke-width:2.2px;opacity:.92;transition:stroke-width .12s ease,opacity .12s ease,filter .12s ease;filter:drop-shadow(0 0 12px rgba(56,189,248,.14))}.relations-overlay__edge.is-hovered{stroke-width:3.4px;opacity:1;filter:drop-shadow(0 0 18px rgba(56,189,248,.4))}.highlight-portal{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;pointer-events:none;opacity:0;visibility:hidden;transition:opacity .18s ease,visibility .18s ease;z-index:24}.highlight-portal.is-visible{opacity:1;visibility:visible;pointer-events:auto}.highlight-portal__backdrop{position:absolute;top:0;right:0;bottom:0;left:0;background:#0a0e16b8;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.highlight-portal__card{position:relative;z-index:1;width:min(520px,92vw);padding:var(--spacing-xl);background:linear-gradient(160deg,#111827f5,#090e1aeb);border-radius:28px;border:1px solid rgba(56,189,248,.18);box-shadow:0 28px 60px #080c1499;transform:scale(.92);opacity:0;transition:transform .22s ease,opacity .22s ease}.highlight-portal.is-visible .highlight-portal__card{transform:scale(1);opacity:1}.highlight-portal.is-leaving .highlight-portal__card{transform:scale(.9);opacity:0;transition-duration:.18s}.highlight-portal__icon{width:88px;height:88px;border-radius:20px;background:#38bdf81f;display:flex;align-items:center;justify-content:center;font-size:2.4rem;margin-bottom:var(--spacing-lg)}.highlight-portal__body{display:flex;flex-direction:column;gap:var(--spacing-md)}.highlight-portal__header{display:flex;justify-content:flex-start}.highlight-portal__cycle{font-size:.8rem;text-transform:uppercase;letter-spacing:.16em;color:#bfdbfeb3}.highlight-portal__title{font-size:1.55rem;margin:0;color:#e2e8f0}.highlight-portal__text{margin:0;color:#e2e8f0d1;line-height:1.4}.highlight-portal__text.is-hidden{display:none}.highlight-portal__actions{display:flex;flex-wrap:wrap;gap:var(--spacing-sm);margin-top:var(--spacing-md)}.highlight-portal__button{background:#1e293bc2;border:1px solid rgba(148,163,184,.28);border-radius:999px;padding:10px 18px;color:#cbd5f5;font-size:.85rem;letter-spacing:.04em;cursor:pointer;transition:background .16s ease,border-color .16s ease}.highlight-portal__button:hover{background:#38bdf82e;border-color:#60a5fa66}.highlight-portal__button--primary{background:#38bdf833;border-color:#38bdf880;color:#e0f2fe}.highlight-portal__button--primary:hover{background:#38bdf84d}.digest-history{display:flex;flex-direction:column;gap:var(--spacing-sm);padding:var(--spacing-sm);background:#0f172a52;border-radius:18px;border:1px solid rgba(148,163,184,.16)}.digest-history__empty{margin:0;text-align:center;color:var(--text-muted)}.digest-history__item{background:#1e293b80;border-radius:14px;padding:var(--spacing-sm) var(--spacing-md);border:1px solid rgba(100,116,139,.2);display:flex;flex-direction:column;gap:4px}.digest-history__item header{display:flex;justify-content:space-between;align-items:center;font-size:.75rem;color:#bfdbfeb3;letter-spacing:.08em;text-transform:uppercase}.digest-history__title{margin:0;font-size:.95rem;color:#e2e8f0}.digest-history.is-highlighted{animation:digestPulse .6s ease}@keyframes digestPulse{0%{box-shadow:0 0 #38bdf866}to{box-shadow:0 0 0 24px #38bdf800}}.relations-overlay__toolbar{position:absolute;top:var(--spacing-lg);left:var(--spacing-lg);display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);border-radius:16px;background:#0d1117eb;border:1px solid rgba(56,189,248,.18);box-shadow:0 16px 28px #080c1473;pointer-events:auto;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);z-index:4}.relations-overlay__toolbar.is-hidden{display:none}.relations-overlay__title{font-size:.7rem;letter-spacing:.18em;text-transform:uppercase;color:var(--text-muted);font-weight:600}.relations-overlay__toggles{display:flex;gap:6px}.relations-overlay__toggle{background:#111927b8;border:1px solid rgba(148,163,184,.35);color:var(--text-muted);border-radius:999px;padding:4px 10px;font-size:.68rem;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;transition:border-color .12s ease,background .12s ease,color .12s ease}.relations-overlay__toggle.is-active{border-color:#66aaffb3;background:#3b82f638;color:#e0f2fe}.relations-overlay__slider,.relations-overlay__checkbox{display:flex;align-items:center;gap:6px;font-size:.7rem;color:var(--text-muted)}.relations-overlay__slider-value{min-width:24px;font-variant-numeric:tabular-nums;text-align:center;color:var(--text-primary);font-weight:600}.relations-overlay__slider input[type=range]{width:120px;accent-color:var(--accent);cursor:pointer}.relations-overlay__checkbox input{accent-color:var(--accent);width:14px;height:14px}.relations-tooltip{position:absolute;transform:translate(-50%);background:#0d1117f2;border:1px solid rgba(102,170,255,.35);border-radius:14px;padding:var(--spacing-sm) var(--spacing-md);box-shadow:0 20px 36px #080c148c;pointer-events:none;max-width:340px;z-index:60}.relations-tooltip.hidden{display:none}.relations-tooltip header{display:flex;flex-direction:column;gap:2px;margin-bottom:6px}.relations-tooltip__label{font-size:.68rem;letter-spacing:.16em;text-transform:uppercase;font-weight:600;color:var(--text-muted)}.relations-tooltip__label[data-type=rival]{color:var(--line-rival)}.relations-tooltip__label[data-type=ally]{color:var(--line-ally)}.relations-tooltip__label[data-type=friend]{color:var(--line-friend)}.relations-tooltip__label[data-type=bloodoath]{color:var(--line-blood)}.relations-tooltip__label[data-type=hierarchy]{color:var(--line-hierarchy)}.relations-tooltip__names{font-weight:600;color:var(--text-primary)}.relations-tooltip ul{margin:0;padding:0;list-style:none;display:flex;flex-direction:column;gap:4px;font-size:.75rem;color:var(--text-muted)}.cycle-digest{position:fixed;top:88px;right:24px;width:320px;z-index:30;pointer-events:none}.cycle-digest.hidden{display:none}.cycle-digest__card{position:relative;background:#0f172aeb;border:1px solid rgba(102,170,255,.25);border-radius:18px;padding:var(--spacing-md);box-shadow:0 18px 36px #0f172a73;pointer-events:auto}.cycle-digest__card header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-sm)}.cycle-digest__title{font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--accent)}.cycle-digest__history{border:1px solid var(--border-soft);background:transparent;color:var(--text-primary);border-radius:10px;padding:4px 10px;font-size:.75rem;cursor:pointer}.cycle-digest__history:disabled{opacity:.4;cursor:not-allowed}.cycle-digest__list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:var(--spacing-sm)}.cycle-digest__item{display:grid;grid-template-columns:auto 1fr;gap:var(--spacing-sm);align-items:flex-start;padding:var(--spacing-sm);border-radius:12px;background:#3b82f614}.cycle-digest__item:first-child{border:1px solid rgba(102,170,255,.6);box-shadow:0 0 22px #66aaff40;background:#3b82f629}.cycle-digest__icon{font-size:1.25rem;line-height:1}.cycle-digest__body{display:flex;flex-direction:column;gap:2px;font-size:.85rem}.cycle-digest__body span{color:var(--text-muted);font-size:.75rem}.cycle-digest__empty{margin:0;font-size:.85rem;color:var(--text-muted);padding:var(--spacing-sm) var(--spacing-sm) var(--spacing-sm) calc(var(--spacing-sm) + 6px)}.cycle-digest__sweep{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:inherit;pointer-events:none;background:linear-gradient(90deg,#6af0,#66aaff40,#a6f3,#6af0);transform:translate(-100%);opacity:0}.cycle-digest__sweep.is-animating{animation:cycleSweepGlow .35s ease-out}@keyframes cycleSweepGlow{0%{transform:translate(-80%);opacity:.65}to{transform:translate(120%);opacity:0}}.cycle-digest__history-panel{margin-top:var(--spacing-sm);background:#0f172ae6;border:1px solid var(--border-soft);border-radius:12px;padding:var(--spacing-sm);pointer-events:auto}.cycle-digest__history-panel.hidden{display:none}.cycle-digest__history-panel h4{margin:0 0 var(--spacing-xs) 0;font-size:.75rem;letter-spacing:.08em;text-transform:uppercase;color:var(--text-muted)}.cycle-digest__history-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;font-size:.75rem}.cycle-digest__history-list li{display:flex;flex-direction:column;gap:2px}.cycle-digest.is-history-open .cycle-digest__history{border-color:#6af6}.warcalls-dock{display:flex;flex-direction:column;gap:var(--spacing-md);height:100%}.warcalls-dock header{display:flex;flex-direction:column;gap:var(--spacing-sm)}.warcalls-dock h2{margin:0;letter-spacing:.1em;font-size:.9rem;text-transform:uppercase}.warcalls-tabs{display:flex;gap:var(--spacing-xs)}.warcalls-tab{font-size:.75rem;border-radius:999px;background:#182334cc}.warcalls-tab.is-active{background:#3b82f633;border-color:#3b82f666}.warcall-list{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:var(--spacing-sm)}.warcall-item{background:#0f172ad9;border:1px solid var(--border-soft);border-radius:12px;padding:var(--spacing-sm);display:flex;flex-direction:column;gap:var(--spacing-sm);cursor:pointer}.warcall-item header{display:flex;justify-content:space-between;font-size:.8rem}.warcall-kind{font-weight:600}.warcall-phase{color:var(--text-muted)}.warcall-meta,.warcall-risk{margin:0;color:var(--text-muted);font-size:.75rem}.warcall-avatars{display:flex;gap:0}.warcall-avatar{width:32px;height:32px;border-radius:12px;overflow:hidden;background:none;border:2px solid var(--bg-panel);box-shadow:0 0 0 1px var(--border-soft);margin-left:-8px}.warcall-avatar:first-child{margin-left:0}.warcall-avatar__img{width:100%;height:100%;display:block;border-radius:inherit}.warcall-avatar.is-dead .warcall-avatar__img,.warcall-participants__list article.is-dead .warcall-participant__img{filter:grayscale(.9) brightness(.85)}.warcall-item footer{display:flex;justify-content:space-between;align-items:center}.warcall-item footer button{font-size:.75rem;padding:4px 10px;border-radius:8px}.warcall-empty{color:var(--text-muted);text-align:center;margin-top:40px}.warcall-modal{position:fixed;top:0;right:0;bottom:0;left:0;display:grid;place-items:center;background:#020617a6;z-index:60}.warcall-modal.hidden{display:none}.warcall-modal__dialog{background:#11192af2;border-radius:16px;border:1px solid var(--border-strong);padding:var(--spacing-lg);width:min(560px,90vw);max-height:90vh;overflow-y:auto;position:relative}.warcall-modal__close{position:absolute;top:var(--spacing-sm);right:var(--spacing-sm);width:32px;height:32px;border-radius:50%;background:#0f172acc}.warcall-modal__content header{margin-bottom:var(--spacing-md)}.warcall-timeline{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--spacing-sm);margin-bottom:var(--spacing-md)}.timeline-step{padding:var(--spacing-sm);border-radius:12px;border:1px solid var(--border-soft);text-align:center;font-size:.75rem;color:var(--text-muted)}.timeline-step.is-active{border-color:var(--accent);color:var(--accent)}.warcall-participants__list{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:var(--spacing-sm);margin-bottom:var(--spacing-md)}.warcall-participants__list article{display:flex;gap:var(--spacing-sm);background:#0f172ab3;padding:var(--spacing-sm);border-radius:10px;border:1px solid var(--border-soft)}.warcall-participant__img{width:40px;height:40px;border-radius:12px;flex-shrink:0;display:block}.warcall-log p{margin:4px 0;font-size:.85rem}.help-overlay{position:fixed;top:0;right:0;bottom:0;left:0;display:grid;place-items:center;background:#02061799;z-index:50}.help-overlay.hidden{display:none}.help-overlay__panel{background:#11192af2;border-radius:18px;border:1px solid var(--border-strong);width:min(540px,90vw);padding:var(--spacing-lg);max-height:85vh;overflow-y:auto}.help-overlay__panel header{display:flex;justify-content:space-between;align-items:center}.help-overlay__panel h2{margin:0}.help-overlay__panel section{margin-top:var(--spacing-md)}.help-overlay__panel ul{list-style:none;padding:0;margin:0;display:grid;gap:var(--spacing-xs)}.help-overlay__relations .dot{width:12px;height:12px;border-radius:50%;display:inline-block;margin-right:8px}.help-overlay__relations .dot.rival{background:var(--danger)}.help-overlay__relations .dot.ally{background:var(--ally)}.help-overlay__relations .dot.blood{background:var(--blood)}.help-overlay__relations .dot.hierarchy{background:var(--hierarchy)}.ui-toast{position:fixed;bottom:var(--spacing-lg);left:50%;transform:translate(-50%) translateY(20px);padding:var(--spacing-sm) var(--spacing-md);background:#0d1117e6;border:1px solid var(--border-strong);border-radius:999px;z-index:70;opacity:0;transition:opacity .16s ease,transform .16s ease;pointer-events:none}.ui-toast.is-visible{opacity:1;transform:translate(-50%) translateY(0)}.cycle-sweep{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:30;display:grid;place-items:center;background:#080d1700;transition:background .2s ease}.cycle-sweep.is-active{background:#080d1759}.cycle-sweep__wave{width:60%;height:2px;background:linear-gradient(90deg,transparent,var(--accent),transparent);opacity:0;animation:waveSweep .36s ease}.mode-gate{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;padding:var(--spacing-lg);z-index:140}.mode-gate[hidden]{display:none!important}.mode-gate__backdrop{position:absolute;top:0;right:0;bottom:0;left:0;background:#070b11c7;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.mode-gate__panel{position:relative;background:#11192af5;border:1px solid var(--border-strong);border-radius:20px;padding:var(--spacing-lg);width:min(520px,90vw);display:flex;flex-direction:column;gap:var(--spacing-md);box-shadow:0 24px 48px #070b1166}.mode-gate__panel header h2{margin:0}.mode-gate__panel header p{margin:4px 0 0;color:var(--text-muted)}.mode-gate__options{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,1fr));gap:var(--spacing-md)}.mode-gate__options button{display:flex;flex-direction:column;align-items:flex-start;gap:6px;padding:16px;border-radius:16px;border:1px solid var(--border-soft);background:#0d1421d9;font-size:1rem;text-align:left;transition:border-color .16s ease,box-shadow .16s ease,transform .16s ease}.mode-gate__options button.is-active{border-color:var(--accent);box-shadow:0 0 0 2px #38bdf847}.mode-gate__options button[disabled]{opacity:.45;cursor:not-allowed;transform:none;box-shadow:none}.mode-gate__mode{font-size:1.1rem;font-weight:600}.mode-gate__hint{font-size:.8rem;color:var(--text-muted)}.mode-gate__panel footer{margin-top:var(--spacing-sm);display:flex;justify-content:flex-end}.mode-gate__panel footer button{min-width:160px}@keyframes waveSweep{0%{transform:translate(-60%) scaleX(.2);opacity:0}50%{transform:translate(0) scaleX(1);opacity:1}to{transform:translate(60%) scaleX(.2);opacity:0}}@media (max-width: 1200px){.layout{grid-template-columns:minmax(0,1fr) minmax(0,1fr);grid-template-areas:"ranks feed"}.dock{grid-column:1 / -1;order:-1}}@media (max-width: 900px){.layout{grid-template-columns:minmax(0,1fr)}.feed{max-height:240px}}.free-roam-shell{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:stretch;justify-content:center;padding:clamp(16px,3vw,48px);background:#060c18c7;-webkit-backdrop-filter:blur(18px);backdrop-filter:blur(18px);z-index:48;box-sizing:border-box}.free-roam{display:flex;flex-direction:column;height:100%;width:100%;max-width:1440px;margin:0 auto;border-radius:28px;overflow:hidden;background:radial-gradient(circle at 20% 25%,rgba(59,130,246,.2),transparent 60%),radial-gradient(circle at 80% 70%,rgba(248,113,113,.18),transparent 65%),var(--bg-base);color:var(--text-primary)}.free-roam__hud{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-lg);padding:20px 28px;border-bottom:1px solid var(--border-strong);background:#0d1117f0;-webkit-backdrop-filter:blur(18px);backdrop-filter:blur(18px);box-shadow:0 14px 24px #080d1766;flex-wrap:wrap}.free-roam__title h1{margin:0;font-size:1.6rem;letter-spacing:.04em}.free-roam__title p{margin:4px 0 0;color:var(--text-muted);max-width:460px}.free-roam__status{display:flex;gap:var(--spacing-lg);font-weight:600;font-size:.95rem;flex-wrap:wrap}.free-roam__actions{display:flex;gap:var(--spacing-sm)}.free-roam__body{flex:1;min-height:0;display:grid;grid-template-columns:minmax(0,1fr) minmax(260px,340px);gap:var(--spacing-lg);padding:var(--spacing-lg);align-items:stretch}.free-roam__stage{position:relative;border-radius:20px;overflow:hidden;border:1px solid var(--border-strong);background:radial-gradient(circle at 28% 32%,rgba(59,130,246,.12),transparent 65%),radial-gradient(circle at 72% 68%,rgba(248,113,113,.12),transparent 70%),#0a101af2;min-height:0;display:flex;touch-action:none;cursor:grab;-webkit-user-select:none;user-select:none}.free-roam__stage:active{cursor:grabbing}.free-roam__viewport{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;transform-origin:center center;will-change:transform}.free-roam__highlight-host{position:absolute;top:0;right:0;bottom:0;left:0;z-index:6}.free-roam__canvas{flex:1;width:100%;height:100%;display:block;image-rendering:pixelated;image-rendering:crisp-edges}.free-roam__overlay{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;font-size:.75rem}.free-roam__marker{position:absolute;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;gap:4px;pointer-events:auto;text-align:center}.free-roam__marker--warcall{z-index:4}.free-roam__marker--officer{z-index:3}.free-roam__marker-avatar{border-radius:14px;border:2px solid rgba(148,163,184,.45);box-shadow:0 12px 20px #090c138c}.free-roam__marker-label{padding:2px 8px;border-radius:999px;background:#0f172acc;border:1px solid rgba(148,163,184,.3);color:var(--text-primary);font-size:.7rem;white-space:nowrap;box-shadow:0 6px 10px #080d1766}.free-roam__marker-icon{width:34px;height:34px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;color:#f8fafc;font-size:.95rem;box-shadow:0 10px 18px #080d1780;background:#ef4444e6}.free-roam__marker--warcall.free-roam__marker--prep .free-roam__marker-icon{background:#6366f1e6}.free-roam__marker--warcall.free-roam__marker--travel .free-roam__marker-icon{background:#0ea5e9eb}.free-roam__marker--warcall.free-roam__marker--event .free-roam__marker-icon{background:#f97316f2}.free-roam__marker--warcall.free-roam__marker--resolution .free-roam__marker-icon{background:#22c55eeb}.free-roam__sidebar{display:flex;flex-direction:column;gap:var(--spacing-lg);min-width:0}.free-roam__panel{background:#0f172ad1;border:1px solid var(--border-strong);border-radius:18px;padding:var(--spacing-lg);display:flex;flex-direction:column;gap:var(--spacing-sm);min-height:0}.free-roam__panel h2{margin:0;font-size:1rem;letter-spacing:.05em;text-transform:uppercase;color:var(--text-muted)}.free-roam__list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:var(--spacing-sm);overflow-y:auto;max-height:45vh}.free-roam__list-item{padding:10px 12px;background:#1e293b99;border-radius:12px;border:1px solid rgba(51,65,85,.55);box-shadow:inset 0 0 0 1px #94a3b80d}.free-roam__list-title{display:flex;flex-wrap:wrap;gap:6px;align-items:baseline}.free-roam__list-title strong{font-weight:600}.free-roam__list-meta{margin-top:4px;color:var(--text-muted);font-size:.75rem}.free-roam__empty{margin:0;color:var(--text-muted);font-size:.85rem}
