:root{color-scheme:dark;--bg-base: #0d1117;--bg-elevated: #111827;--bg-panel: #131c2b;--border-soft: #1f2937;--border-strong: #273554;--text-primary: #e2e8f0;--text-muted: #94a3b8;--accent: #38bdf8;--danger: #ee6666;--ally: #66aaff;--friend: #38bdf8;--blood: #aa66ff;--hierarchy: #888899;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 12px;--spacing-lg: 16px}*{box-sizing:border-box}html,body{height:100%;margin:0;background:var(--bg-base);color:var(--text-primary);font:14px/1.45 Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}body.modal-open{overflow:hidden}#app,.nemesis-app{height:100%;display:flex;flex-direction:column}.hud{display:flex;align-items:center;padding:var(--spacing-md);gap:var(--spacing-md);border-bottom:1px solid var(--border-strong);background:#0d1117f2;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);position:sticky;top:0;z-index:20}.brand{font-weight:700;letter-spacing:.1em}.hud-controls{display:flex;gap:var(--spacing-sm);margin-left:auto;flex-wrap:wrap}button{background:var(--bg-elevated);color:var(--text-primary);border:1px solid var(--border-soft);padding:6px 12px;border-radius:999px;font-weight:600;cursor:pointer;transition:background .12s ease,transform .12s ease}button:hover,button:focus-visible{background:#1b2435;transform:translateY(-1px);outline:none}button:disabled{opacity:.4;cursor:default;transform:none}.layout{flex:1;display:grid;grid-template-columns:minmax(240px,280px) minmax(0,1fr) minmax(260px,320px);gap:var(--spacing-lg);padding:var(--spacing-lg);overflow:hidden}.layout>*{background:var(--bg-panel);border:1px solid var(--border-strong);border-radius:16px;padding:var(--spacing-lg);overflow:hidden}.dock{display:flex;flex-direction:column;overflow:hidden}.feed{display:flex;flex-direction:column;gap:var(--spacing-sm);overflow-y:auto;max-height:100%}.feed-item{padding:var(--spacing-sm);background:#18243666;border-radius:8px;color:#cbd5e1}.feed-empty{color:var(--text-muted);text-align:center;margin:auto}.ranks{position:relative;overflow-y:auto}.rank-group{margin-bottom:var(--spacing-lg)}.rank-group h3{margin:0 0 var(--spacing-sm) 0;font-size:.85rem;text-transform:uppercase;letter-spacing:.12em;color:var(--text-muted)}.rank-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:var(--spacing-md)}.officer-card{display:flex;gap:var(--spacing-md);background:#11192ad9;border:1px solid var(--border-soft);border-radius:16px;padding:var(--spacing-md);transition:border-color .16s ease,box-shadow .16s ease}.officer-card:focus-visible,.officer-card:hover{border-color:var(--accent);box-shadow:0 8px 24px #38bdf833;outline:none}.officer-card.rank-changed{animation:rankGlow .6s ease;border-color:#fbbf24}@keyframes rankGlow{0%{box-shadow:0 0 #fbbf2499}to{box-shadow:0 0 #fbbf2400}}.officer-card__portrait{width:72px;height:72px;border-radius:16px;overflow:hidden;border:1px solid var(--border-soft);background:#0f172a;flex-shrink:0}.officer-card__portrait img{width:100%;height:100%;display:block}.officer-card__body{display:flex;flex-direction:column;gap:var(--spacing-sm);flex:1 1 auto;min-width:0}.officer-card__header{display:flex;flex-direction:column;gap:2px}.officer-card__header h3{margin:0;font-size:1rem}.officer-card__subtitle{margin:0;color:var(--text-muted);font-size:.85rem}.officer-card__badge-row{display:flex;gap:var(--spacing-xs)}.officer-card__badge{font-size:.7rem;background:#3b82f61f;border:1px solid rgba(59,130,246,.35);color:#93c5fd;border-radius:999px;padding:2px 8px}.officer-card__badge--muted{background:#94a3b81a;border:1px solid rgba(148,163,184,.3);color:var(--text-muted)}.officer-card__traits{display:flex;flex-wrap:wrap;gap:var(--spacing-xs)}.officer-card__trait{background:#0f172ae6;border:1px solid rgba(59,78,109,.6);border-radius:8px;padding:2px 6px;font-size:.75rem}.officer-card__trait--muted{opacity:.6}.officer-card__stats{display:grid;grid-template-columns:80px 1fr;gap:var(--spacing-xs) var(--spacing-md);margin:0}.officer-card__stats div{display:contents}.officer-card__stats dt{color:var(--text-muted);font-size:.75rem;letter-spacing:.05em;text-transform:uppercase}.officer-card__stats dd{margin:0;display:flex;align-items:center;gap:var(--spacing-sm)}.officer-card__bar{flex:1;height:6px;background:#0f172ab3;border-radius:999px;overflow:hidden}.officer-card__bar-fill{height:100%;background:var(--ally);width:0;transition:width .26s cubic-bezier(.2,.8,.2,1)}.officer-card__bar-fill.is-animating{background:var(--accent)}.officer-card__stat-value{font-variant-numeric:tabular-nums;font-size:.75rem;min-width:42px;display:inline-flex;justify-content:flex-end}.officer-card__stat-value.is-up:after,.officer-card__stat-value.is-down:after{content:attr(data-delta);margin-left:4px;font-size:.7rem}.officer-card__stat-value.is-up:after{color:#4ade80}.officer-card__stat-value.is-down:after{color:var(--danger)}.officer-card__relationship-badges{display:flex;gap:var(--spacing-xs);flex-wrap:wrap}.officer-card__rel{font-size:.7rem;padding:2px 6px;border-radius:6px;background:#3b4e6d4d;border:1px solid rgba(59,78,109,.5)}.officer-card__rel--ally,.officer-card__rel--friend{color:var(--ally);border-color:#60a5fa99}.officer-card__rel--rival{color:var(--danger);border-color:#f8717199}.officer-card__rel--blood_oath,.officer-card__rel--bloodoath{color:var(--blood);border-color:#c084fc99}.officer-tooltip{position:absolute;min-width:280px;max-width:320px;background:#0f172afa;border:1px solid var(--border-strong);border-radius:12px;padding:var(--spacing-md);pointer-events:auto;z-index:40;box-shadow:0 16px 40px #0f172a80}.officer-tooltip header{display:flex;flex-direction:column;gap:4px}.officer-tooltip h2{margin:0;font-size:1.05rem}.officer-tooltip .sub{color:var(--text-muted);font-size:.8rem}.officer-tooltip .archetype{color:var(--ally);font-size:.75rem}.officer-tooltip .tooltip-traits,.officer-tooltip footer{display:flex;gap:var(--spacing-xs);flex-wrap:wrap;margin-top:var(--spacing-sm)}.tooltip-badge{background:#3b4e6d99;border-radius:6px;padding:2px 6px;font-size:.7rem}.tooltip-badge--muted{opacity:.6}.officer-tooltip dl{margin:var(--spacing-md) 0;display:grid;grid-template-columns:80px 1fr;gap:var(--spacing-xs) var(--spacing-md)}.officer-tooltip dt{color:var(--text-muted);font-size:.75rem}.officer-tooltip dd{margin:0;font-variant-numeric:tabular-nums}.tooltip-relations,.tooltip-memories{list-style:none;margin:var(--spacing-sm) 0 0 0;padding:0;display:flex;flex-direction:column;gap:6px}.tooltip-relations li,.tooltip-memories li{display:flex;gap:var(--spacing-sm)}.tooltip-relations li .icon{font-size:1rem}.tooltip-empty{color:var(--text-muted);font-size:.8rem}.officer-tooltip footer button{flex:1;font-size:.8rem;border-radius:8px}.relations-overlay{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.relations-legend{position:absolute;top:var(--spacing-lg);right:var(--spacing-lg);background:#0d1117eb;border:1px solid var(--border-soft);border-radius:12px;padding:var(--spacing-sm);pointer-events:auto;z-index:10}.relations-legend__toggle{background:transparent;border-radius:6px;border:1px solid var(--border-soft);padding:4px 8px;font-size:.75rem;cursor:pointer}.relations-legend__body{display:none;margin-top:var(--spacing-sm);gap:4px;font-size:.75rem}.relations-legend.is-open .relations-legend__body{display:grid}.cycle-digest{position:fixed;top:88px;right:24px;width:320px;z-index:30;pointer-events:none}.cycle-digest.hidden{display:none}.cycle-digest__card{position:relative;background:#0f172aeb;border:1px solid rgba(102,170,255,.25);border-radius:18px;padding:var(--spacing-md);box-shadow:0 18px 36px #0f172a73;pointer-events:auto}.cycle-digest__card header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-sm)}.cycle-digest__title{font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--accent)}.cycle-digest__history{border:1px solid var(--border-soft);background:transparent;color:var(--text-primary);border-radius:10px;padding:4px 10px;font-size:.75rem;cursor:pointer}.cycle-digest__history:disabled{opacity:.4;cursor:not-allowed}.cycle-digest__list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:var(--spacing-sm)}.cycle-digest__item{display:grid;grid-template-columns:auto 1fr;gap:var(--spacing-sm);align-items:flex-start;padding:var(--spacing-sm);border-radius:12px;background:#3b82f614}.cycle-digest__item:first-child{border:1px solid rgba(102,170,255,.6);box-shadow:0 0 22px #66aaff40;background:#3b82f629}.cycle-digest__icon{font-size:1.25rem;line-height:1}.cycle-digest__body{display:flex;flex-direction:column;gap:2px;font-size:.85rem}.cycle-digest__body span{color:var(--text-muted);font-size:.75rem}.cycle-digest__empty{margin:0;font-size:.85rem;color:var(--text-muted);padding:var(--spacing-sm) var(--spacing-sm) var(--spacing-sm) calc(var(--spacing-sm) + 6px)}.cycle-digest__sweep{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:inherit;pointer-events:none;background:linear-gradient(90deg,#6af0,#66aaff40,#a6f3,#6af0);transform:translate(-100%);opacity:0}.cycle-digest__sweep.is-animating{animation:cycleSweepGlow .35s ease-out}@keyframes cycleSweepGlow{0%{transform:translate(-80%);opacity:.65}to{transform:translate(120%);opacity:0}}.cycle-digest__history-panel{margin-top:var(--spacing-sm);background:#0f172ae6;border:1px solid var(--border-soft);border-radius:12px;padding:var(--spacing-sm);pointer-events:auto}.cycle-digest__history-panel.hidden{display:none}.cycle-digest__history-panel h4{margin:0 0 var(--spacing-xs) 0;font-size:.75rem;letter-spacing:.08em;text-transform:uppercase;color:var(--text-muted)}.cycle-digest__history-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;font-size:.75rem}.cycle-digest__history-list li{display:flex;flex-direction:column;gap:2px}.cycle-digest.is-history-open .cycle-digest__history{border-color:#6af6}.relations-legend__body span[data-type=ally]{color:var(--ally)}.relations-legend__body span[data-type=rival]{color:var(--danger)}.relations-legend__body span[data-type=bloodoath]{color:var(--blood)}.relations-legend__body span[data-type=hierarchy]{color:var(--hierarchy)}.relation-tooltip{position:absolute;transform:translate(-50%,-100%);background:#0f172af2;border:1px solid var(--border-soft);border-radius:8px;padding:6px 10px;font-size:.75rem;display:flex;flex-direction:column;gap:2px;pointer-events:none;opacity:0;transition:opacity .12s ease;z-index:35}.relation-tooltip.is-visible{opacity:1}.warcalls-dock{display:flex;flex-direction:column;gap:var(--spacing-md);height:100%}.warcalls-dock header{display:flex;flex-direction:column;gap:var(--spacing-sm)}.warcalls-dock h2{margin:0;letter-spacing:.1em;font-size:.9rem;text-transform:uppercase}.warcalls-tabs{display:flex;gap:var(--spacing-xs)}.warcalls-tab{font-size:.75rem;border-radius:999px;background:#182334cc}.warcalls-tab.is-active{background:#3b82f633;border-color:#3b82f666}.warcall-list{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:var(--spacing-sm)}.warcall-item{background:#0f172ad9;border:1px solid var(--border-soft);border-radius:12px;padding:var(--spacing-sm);display:flex;flex-direction:column;gap:var(--spacing-sm);cursor:pointer}.warcall-item header{display:flex;justify-content:space-between;font-size:.8rem}.warcall-kind{font-weight:600}.warcall-phase{color:var(--text-muted)}.warcall-meta,.warcall-risk{margin:0;color:var(--text-muted);font-size:.75rem}.warcall-avatars{display:flex;gap:0}.warcall-avatar{width:32px;height:32px;border-radius:50%;overflow:hidden;border:2px solid var(--bg-panel);box-shadow:0 0 0 1px var(--border-soft);margin-left:-8px}.warcall-avatar:first-child{margin-left:0}.warcall-avatar img{width:100%;height:100%;display:block}.warcall-item footer{display:flex;justify-content:space-between;align-items:center}.warcall-item footer button{font-size:.75rem;padding:4px 10px;border-radius:8px}.warcall-empty{color:var(--text-muted);text-align:center;margin-top:40px}.warcall-modal{position:fixed;top:0;right:0;bottom:0;left:0;display:grid;place-items:center;background:#020617a6;z-index:60}.warcall-modal.hidden{display:none}.warcall-modal__dialog{background:#11192af2;border-radius:16px;border:1px solid var(--border-strong);padding:var(--spacing-lg);width:min(560px,90vw);max-height:90vh;overflow-y:auto;position:relative}.warcall-modal__close{position:absolute;top:var(--spacing-sm);right:var(--spacing-sm);width:32px;height:32px;border-radius:50%;background:#0f172acc}.warcall-modal__content header{margin-bottom:var(--spacing-md)}.warcall-timeline{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--spacing-sm);margin-bottom:var(--spacing-md)}.timeline-step{padding:var(--spacing-sm);border-radius:12px;border:1px solid var(--border-soft);text-align:center;font-size:.75rem;color:var(--text-muted)}.timeline-step.is-active{border-color:var(--accent);color:var(--accent)}.warcall-participants__list{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:var(--spacing-sm);margin-bottom:var(--spacing-md)}.warcall-participants__list article{display:flex;gap:var(--spacing-sm);background:#0f172ab3;padding:var(--spacing-sm);border-radius:10px;border:1px solid var(--border-soft)}.warcall-participants__list img{width:40px;height:40px;border-radius:12px}.warcall-log p{margin:4px 0;font-size:.85rem}.help-overlay{position:fixed;top:0;right:0;bottom:0;left:0;display:grid;place-items:center;background:#02061799;z-index:50}.help-overlay.hidden{display:none}.help-overlay__panel{background:#11192af2;border-radius:18px;border:1px solid var(--border-strong);width:min(540px,90vw);padding:var(--spacing-lg);max-height:85vh;overflow-y:auto}.help-overlay__panel header{display:flex;justify-content:space-between;align-items:center}.help-overlay__panel h2{margin:0}.help-overlay__panel section{margin-top:var(--spacing-md)}.help-overlay__panel ul{list-style:none;padding:0;margin:0;display:grid;gap:var(--spacing-xs)}.help-overlay__relations .dot{width:12px;height:12px;border-radius:50%;display:inline-block;margin-right:8px}.help-overlay__relations .dot.rival{background:var(--danger)}.help-overlay__relations .dot.ally{background:var(--ally)}.help-overlay__relations .dot.blood{background:var(--blood)}.help-overlay__relations .dot.hierarchy{background:var(--hierarchy)}.ui-toast{position:fixed;bottom:var(--spacing-lg);left:50%;transform:translate(-50%) translateY(20px);padding:var(--spacing-sm) var(--spacing-md);background:#0d1117e6;border:1px solid var(--border-strong);border-radius:999px;z-index:70;opacity:0;transition:opacity .16s ease,transform .16s ease;pointer-events:none}.ui-toast.is-visible{opacity:1;transform:translate(-50%) translateY(0)}.cycle-sweep{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:30;display:grid;place-items:center;background:#080d1700;transition:background .2s ease}.cycle-sweep.is-active{background:#080d1759}.cycle-sweep__wave{width:60%;height:2px;background:linear-gradient(90deg,transparent,var(--accent),transparent);opacity:0;animation:waveSweep .36s ease}@keyframes waveSweep{0%{transform:translate(-60%) scaleX(.2);opacity:0}50%{transform:translate(0) scaleX(1);opacity:1}to{transform:translate(60%) scaleX(.2);opacity:0}}@media (max-width: 1200px){.layout{grid-template-columns:minmax(0,1fr) minmax(0,1fr);grid-template-areas:"ranks feed"}.dock{grid-column:1 / -1;order:-1}}@media (max-width: 900px){.layout{grid-template-columns:minmax(0,1fr)}.feed{max-height:240px}}
