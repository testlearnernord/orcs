var Ke=Object.defineProperty;var ze=(s,e,t)=>e in s?Ke(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var l=(s,e,t)=>ze(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();window.addEventListener("error",s=>console.error("window.error:",s.error||s.message));window.addEventListener("unhandledrejection",s=>console.error("unhandled:",s.reason));const J={König:1,Spieler:0,Captain:4,Späher:4,Grunzer:11},De={König:{},Spieler:{demoteBelow:120,demoteTo:"Captain"},Captain:{promoteAt:150,promoteTo:"Spieler",demoteBelow:40,demoteTo:"Späher"},Späher:{promoteAt:90,promoteTo:"Captain",demoteBelow:20,demoteTo:"Grunzer"},Grunzer:{promoteAt:50,promoteTo:"Späher"}},Ye={Feigling:-.4,Berserker:.45,Hinterhältig:.3,Trinkfest:.15,Tierjäger:.2,Intrigant:.25},Ze={ALLY:.35,FRIEND:.2,RIVAL:-.45,BLOOD_OATH:.5},Pe=10,qe=5,L={DEATH:100,SPAWN:80,PROMOTION:70,WARCALL:60,RELATIONSHIP:50,GENERAL:10};function w(s,e,t){return`${t}_${e}_${Math.floor(s.next()*1e6)}`}function F(s){return[`Basis ${s.base.toFixed(2)}`,`Traits ${s.traits.toFixed(2)}`,`Beziehungen ${s.relationships.toFixed(2)}`,`Zufall ${s.random.toFixed(2)}`].join(", ")}function je(s,e,t){const i=[`${t.name} kippt beim Festmahl den Krug – Allianz besiegelt?`,`${t.name} streift den Schlackennebel ab und schließt sich der Horde an.`,`Im Schatten des Pilzwaldes hebt ${t.name} den Blutkrug – Willkommen in den Reihen.`,`${t.name} brüllt durch den Hof und verlangt nach Ruhm.`,`Zwischen Knochenfeuern schwört ${t.name} dem Kriegstrupp Treue.`],n=s.pick(i);return{id:w(s,e,"spawn"),cycle:e,text:n,tone:"SPAWN",priority:L.SPAWN}}function $e(s,e,t,i){const n=[`${t.name} fällt ${i} – die Halle verstummt.`,`${t.name} sinkt in den Schatten, ${i} hallt nach.`,`Blutige Sippe: ${t.name} erliegt ${i}.`,`${t.name} zerbirst unter ${i}.`,`Ein dumpfer Schlag, ein letzter Blick – ${t.name} findet sein Ende (${i}).`],r=s.pick(n);return{id:w(s,e,"death"),cycle:e,text:r,tone:"DEATH",priority:L.DEATH}}function _e(s,e,t,i){const n=[`${t.name} lässt den Trophäenkranz klirren – Aufstieg zum ${i}.`,`${t.name} erkämpft sich den Titel ${i} mitten im Jubel.`,`Ein neues Banner für ${t.name}: ${i}!`];return{id:w(s,e,"promotion"),cycle:e,text:s.pick(n),tone:"PROMOTION",priority:L.PROMOTION}}function et(s,e,t,i,n){const r=[`${t.initiator} führt die Meute bei ${t.location} zum Sieg (${t.kind}). (${F(n)})`,`Im Sturm auf ${t.location} triumphiert der Trupp (${t.kind}). (${F(n)})`],a=[`${t.location} verschlingt die Krieger – ${t.kind} scheitert. (${F(n)})`,`Der Ruf nach Krieg verhallt in ${t.location} (${t.kind}). (${F(n)})`],o=i?s.pick(r):s.pick(a);return{id:w(s,e,"warcall"),cycle:e,text:o,tone:"WARCALL",priority:L.WARCALL}}function tt(s,e,t,i,n){const a={ALLY:["schmiedet","besiegelt","formt"],RIVAL:["reizt","verhöhnt","verletzt"],BLOOD_OATH:["ritzt","bindet","verschlingt"],FRIEND:["lacht mit","rauft freundschaftlich mit","teilt den Humpen mit"]}[n].map(o=>`${t.name} ${o} ${i.name}.`);return{id:w(s,e,"relation"),cycle:e,text:s.pick(a),tone:"RELATIONSHIP",priority:L.RELATIONSHIP}}function X(s,e,t){return{id:w(s,e,"general"),cycle:e,text:t,tone:"GENERAL",priority:L.GENERAL}}const st=[{seed:"orc-001",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA6klEQVR4AeXBIUoEAQBA0e9nFjyAt9gmmBabfYvJNGDwSGIQ9gCWOYNmr2AxegCb1k2LLKMw/vdObq62X4RJnMRJnMRJnMRJnMRJ3MCRHm6f2Xf3eMkSSZzESZzESZzESdyw2rwzh9XmnSWSOImTOImTOImTOImTuIGZ7LY7DhmnkZ/abXccMk4jc5E4iZO4gZmM08hcxmnkr0icxEmcxEmcxEncwMzOnz75Ta/Xp8xJ4iRuYGav16csicRJ3LD+OOM4b+xbf5yxRBIncRIncRIncRI3cKT7lwv+A4mTOImTOImTOImTOIn7Br2tGZU78ySjAAAAAElFTkSuQmCC"},{seed:"orc-002",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/0lEQVR4AeXBMUoDUQBF0evjp88GwmCTxiWkE/v0Vr+xMeuJ9eAO0lmmsXUBdgPZRQLaJhCGIMM4cM+5e35a/yAW5IJckAtyQS7IBbkgF+QKI3k9Ljn3NvtmCoJckAtyQS7IBbkgV2arA6PYLzk3Wx2YgiAX5IJckAtyQS7IBbkgVxhIu27p87l/51btuqVP3VWGEuSCXJArDKTuKn1eeORWdVcZS5ALckEuyAW5IBfkglyQKwzstO246oELp23HX5RNw5CCXJArDKxsGq7ac6FsGqagLLo5/2HRzZmCIBfkglyQC3JBLsgVRvJx/8UUBbkgF+SCXJALckEuyAW5Xyd+HiXyVe2AAAAAAElFTkSuQmCC"},{seed:"orc-003",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABCUlEQVR4AeXBoWoCcQDH8e9+/AfGhUUfQtwb7AUsFtuVpb3HnuNYWbEIaxbLqg9gtlkWRISFrd6BDGR34+D7+dw8zxbfiAW5IBfkglyQC3JBLsgFuULPFp9jmt7u9gxJkAtyQS7IBbkgF+TKcbKjV5sxTcfJjiEJckEuyAW5IFfoSD2rueRj88o16lnNb6pVRZeCXJALcoWOVKuKS5545BrVquI/BbkgF+SCXJALckEuyBU6Nl2eabmnZbo88xfb+YguBbkgV+jYdj6i6WFDy3Y+YkiCXJALckEuyJXD+kSvbmk5rE8MSZALckEuyAW5IBfkCj17+XpnyIJckAtyQS7IBbkgF+SC3A94ECRcOZn3sQAAAABJRU5ErkJggg=="},{seed:"orc-004",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA80lEQVR4AeXBIU4DUQBF0cvLXwgS06S7QM5IcN8h2ECXwDImKGRHsoXacV1HXZtMbWsQ8IdMcs95eO9eZ8SCXJALckEuyAW5IBfkglxhZT5evrm1+3pmSUEuyAW5IBfkglyQK6ftkTU7bY8sKcgFuSAX5IJcoZGhG/hJHSu/MXQDt+pYaSnIBbkgV2ikjpUl1LGypCAX5IJckAtyQS7IFRrb7C/8yY47m/2FW1NfaCnIBblCY1NfaGnqC0sKckEuyAW5IBfkyvkwsypP3DkfZpYU5IJckAtyQS7IBbnCyrx9PvKfglyQC3JBLsgFuSAX5ILcFSkVIPj17/d2AAAAAElFTkSuQmCC"},{seed:"orc-005",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+0lEQVR4AeXBIW7CYACG4Xdf/h1hGr+JIWd2DHwVpoJbzFdgqjjEHIZkJ0HXY0rC7CpGwlYKyfs8D6/PbyfEglyQC3JBLsgFuSAX5IJc4Q6sn975qe6+mEqQC3JBLsgFuSAX5Mp80XNzOwbmi56pBLkgF+SCXJALckEuyBVGslmuOKdqG/5is1xxTtU2/EeQC3JBrjCSqm24hqptuKYgF+SCXJALckEuyAW5IBfkCiM7rvdc7IWB43rPb0o9Y0xBLsgVRlbqGRfbMVDqGVMp3fbAzT0y0G0PTCXIBbkgF+SCXJALcoU78NF/citBLsgFuSAX5IJckAtyQe4bF4Qg4Y7W6YIAAAAASUVORK5CYII="},{seed:"orc-006",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA7ElEQVR4AeXBoTZDAQCA4d9/7llekLwAUfIKokq7aUVQBQ+gri4tSroXWfAMgrBOpThn3IX5v+/o9urmgzCJkziJkziJkziJkziJG9jR4/ULX90/XXLIJE7iJE7iJE7iJG7Ynr/yF9vzVw6ZxEmcxEmcxEmcxEmcxA1MZL244yfjaslvrBd3/GRcLfkLiZM4iRuYyLhasg/jask+SZzESZzESZzESZzESZzEDUxsvn5jn97HY6YkcRI3zDczdnLGN/PNjG8uTtin+YZJSZzESZzESZzESdzAjh6eT/lPJE7iJE7iJE7iJE7iJO4TzWwaOSyblOsAAAAASUVORK5CYII="},{seed:"orc-007",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/ElEQVR4AeXBIU4DUQBF0cvLT3VVTT0QDJUI9lBV/9N1gMKxiGZWQDJ7YA0VmKox3UIFBNciMP1DSu45V/d3D5+IBbkgF+SCXJALckEuyAW5woV6f/7g2OPLNWMIckEuyAW5IBfkglxZrA78B4vVgTEEuSAX5IJckCs00i07flP7yjm6ZcdPta+cK8gFuSBXaKT2lTHVvjKGIBfkglyQC3JBLsgFuSAX5IJcobH5Zk8Tr5yYb/Z8G9YzWgpyQa7Q2LCe0caOY8N6xhiCXJAr0+2Ei3TLiel2whiCXJALckEuyAW5IFe4UE9vN/yFIBfkglyQC3JBLsgFuSD3BWoGHRmplfkFAAAAAElFTkSuQmCC"},{seed:"orc-008",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA50lEQVR4AeXBMS4EYQBA4eflP8A2SoVWIpQaZ6DRT+88+j2C7ZQSvcYJ1I5AQotCIjtTTN73HZydXHwSJnESJ3ESJ3ESJ3ESJ3GDGdwdXvLd7dsTayFxEidxEidxEidx4/zmnb098sP5zTtrIXESJ3ESJ3GDBWyvtvw27Sb+a3u15S/TbmJfEidxEjdYwLSbmMO0m1iaxEmcxEmcxEmcxEmcxA0WcHr/wVJergdzkjiJGyzg5XqwFhIncRIncePodcPcjl43rIXESZzESZzESZzEDWbwcPzMWkmcxEmcxEmcxEmcxEncF5vxGayW9uuAAAAAAElFTkSuQmCC"},{seed:"orc-009",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/0lEQVR4AeXBsUkDYQCG4TcfvxtkgdQxlZ2FiBCwzAam8dr0Nnb2aWNzIziBpNEBvDGSDRQi6WIjCP/Byfs8o6vL2wNiQS7IBbkgF+SCXJALckGuUNnT2YxTD58dQxbkglyQC3JBLsgFuTKZ76hqyw+T+Y4hC3JBLsgFuSBXqKRtVhy9bTtOtc2Ko+VmzV+0zYrfLDdraghyQS7Ije4eLw5UdL+94dTz9StDFuSCXJALckEuyAW5IBfkglyQK/Rs9vJFTd2iUFOQC3KFnnWLwpAFuSBXpvsxfZruxwxZkAtyQS7IBbkgF+QKlb2ff/CfBLkgF+SCXJALckEuyAW5b+FWH8xp6wfaAAAAAElFTkSuQmCC"},{seed:"orc-010",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABCElEQVR4AeXBsUpCYQCG4dePH6FNGgRx8goabGpoE1q6hkAQvACnlram5ggCr8izegcSKHUFga0npKA4yoH3eTrXVzd7xIJckAtyQS7IBbkgF+SCXOEEXs8LdbOPT9oiyAW5IBfkglyQC3JlNNlxdNWAutFkR1sEuSAX5IJckCs0ZDFf8aPZLX+xmK/4zdPLJU0JckEuyHXuHsZ7juy+GlD3OH6jLYJckAtyQS7IBbkgV2jYcLnlwMWAuuFyy39tpn2aFOSCXKFhm2mfAxXfbKZ92iLIBbkgF+SCXJArvXWXU+utu7RFkAtyQS7IBbkgF+QKJ/B89k5bBbkgF+SCXJALckEuyAW5L2mUHxT7kIBfAAAAAElFTkSuQmCC"},{seed:"orc-011",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA7ElEQVR4AeXBsUlDUQBA0evlDRAkjYWFO6SysBMcI43gABkjAwRsBNfRIawVsbMRtE2joH6Fzz3n4Oz04p0wiZM4iZM4iZM4iZM4iRv8wvXhYN/l8xtzI3ESJ3ESJ3ESJ3Hj5PyRH7s/Yt/J+SNzI3ESJ3ESJ3ESN5jQ5uqOz2x3K75jc3XHV7a7FVOQOImTuMGEtrsVU9nuVvwHiZM4iZM4iZM4iZM4iRtMbHHzxF96WS+ZksRJ3GBiL+slcyJxEidx4/hhwVSOHxbMjcRJnMRJnMRJnMQNfuF2+crcSZzESZzESZzESZzESdwHQ4MZtWziv1oAAAAASUVORK5CYII="},{seed:"orc-012",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA5UlEQVR4AeXBsUlDUQBA0evljaB1eiNoaeMYLpHfZZB0cR5BcAA3sNYNImirICLkK3zuOSeX59fvhEmcxEmcxEmcxEmcxEnc4Ej7sxs+m14eWBKJkziJkziJkziJG1e3B45yzxdXtweWROIkTuIkTuIGM9tv7/jOtNvwW/vtHT+ZdhvmInESJ3GDmU27Dceadhv+i8RJnMRJnMRJnMQNZva2f+YvjWnFnCRO4gYzG9OKJZE4iZM4iZM4iRvr11PmtH49ZUkkTuIkTuIkTuIkbnCkx4snlkziJE7iJE7iJE7iJE7iPgAFFhlObVOqDQAAAABJRU5ErkJggg=="},{seed:"orc-013",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+0lEQVR4AeXBoU5CYQCG4ddv/wWcQKU6ZxGbwdugk89pdJNFy2mQuQ27V2GjE9iIBK0QYLr9O8ftfZ6bh/unb8SCXJALckEuyAW5IBfkglxhQJ8vX5x6fr1lbEEuyAW5IBfkglyQK7P5kbHM5kfGFuSCXJALckGuUMlqueaarm/5rdVyzTVd31JLkAtyQa5QSde31NL1LUMJckEuyAW5IBfkglyQK1TWbHZc9MaZZrPjr/aLCTUFuSBXqGy/mHDZgVP7xYSxBbkgF+SCXJAr023DYO44M902jC3IBbkgF+SCXJALcoUBvX888t8EuSAX5IJckAtyQS7IBbkfbjodfAcY99kAAAAASUVORK5CYII="},{seed:"orc-014",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABCklEQVR4AeXBIU5CcQDH8S+//Q9AIHIDZGOzGJ0XkEoyWaRxAW9gg+IBLAZO4F4yO2lkI8FAZNNpehSDe8899/18evPL2QdiQS7IBbkgF+SCXJALckGu0JLZ+5C6h/4bXRTkglyQC3JBLsgFubKfbGlFNaRuP9nSRUEuyAW5IBfkglyQC3JBrtCQ5WJF3Uv1yG8sFyt+Mr+7oUlBLsgFud7V7ekHLbiuLqi7P3+ii4JckAtyQS7IBbkgF+QKDRuvD3zrc2S8PtCEzbTQpCAX5AoN20wLX84qjmymhS4KcmW0G/AXRrsBXRTkglyQC3JBLsgFuUJLnk9e+Q+CXJALckEuyAW5IBfkgtwnc1QiqVSdPUcAAAAASUVORK5CYII="},{seed:"orc-015",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+klEQVR4AeXBsUkDYQCG4dePvzisdQkbQ2xs3CJZ4q7LINddpsgKQsAuRRZxgcAVSWsgCIaf8+B9nofXl/czYkEuyAW5IBfkglyQC3JBrjATw/MHP3XfX0whyAW5IBfkglyQC3JlsR6ZhT1XFuuRKQS5IBfkglyQC3JBLsgFuUIlw2bLb7q+5S+GzZZbur6lpiAX5IJcoZKub6mp61umEOSCXJALckEuyAW5QmXL3Ym7PHFluTtxy3HVUFOQC3KFyo6rhnu87blyXDVMIcgFuTIezszReDgzhSAX5IJckAtyQS7IFWZi+/jJfwhyQS7IBbkgF+SCXJALchfcTyC8Jy8G0gAAAABJRU5ErkJggg=="},{seed:"orc-016",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+0lEQVR4AeXBMU4CUQBF0evLXwAFiVuwZBeWlmpHPdNRuQSqaQzUlG7BsBO2AMUkElptoQGjg9/knnPTPjx/IhbkglyQC3JBLsgFuSAX5AoVzJ/eOfbydk8tQS7IBbkgF+SCXJAr+8mG2vaTDbUEuSAX5IJckCsMZDFbck7bNfzEYrbknLZr+I0gF+SCXGEgbddwDW3XcE1BLsgFuSAX5IJckAtyQa4wsNFqx0VzToxWO76rn44ZUpALcoWB9dMxl31wrJ+OqSXIBbkgF+TKdn3gz91xYrs+UEuQC3JBLsgFuSAX5AoVPL7e8l8EuSAX5IJckAtyQS7IBbkv230hpD5izc8AAAAASUVORK5CYII="},{seed:"orc-017",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA6ElEQVR4AeXBoU1DUQBA0cvNC7oKRdIVugm6K/Q7BqkrKyBYAsEMiDoSBkAgScBWEQq/otxzLqab9SdhEidxEidxEidxEidxEjc4wvrtmkP3i1fOncRJnMRJnMRJnMSN99WeH3u85tD7as+5kziJkziJk7jBTHa3d3xn2m74jd3tHd+Zthv+QuIkTuIGM5m2G05h2m44JYmTOImTOImTOImTOImTOIkbzOxj98IpjWnJnCRO4gYzG9OScyJxEjcWz5f81uL5knMncRIncRIncRIncYMjPFw98d9InMRJnMRJnMRJnMRJ3Bf9sxorUwcLhQAAAABJRU5ErkJggg=="},{seed:"orc-018",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+ElEQVR4AeXBsU0CYQCG4dcvfyisrpERKEyIlDTuYMMSdx2DXHcsYcMIJrqBCQvQ6QiQSMs1Nvwkl7zP8/DyvP5DLMgFuSAX5IJckAtyQS7IFSZseHrlWvf7SW1BLsgFuSAX5IJckCurzYnJ+mBktTlRW5ALckEuyAW5IBfkglyQK1QybHf8p+tbbjVsd1zr+pZbBbkgF+QKlXR9y711fUttQS7IBbkgF+SCXJALckEuyBUqW+7PVNMwstyf+X4r1BTkglxpDjNqOi5m1LL+YeS4eKQ5UFWQC3JBLsgFuSAX5AoT9j7/4t6CXJALckEuyAW5IBfkgtwFA3EdKAA1SLMAAAAASUVORK5CYII="},{seed:"orc-019",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABDUlEQVR4AeXBsUpCYQCG4deP393JRRzaXKNR2lqa2lsCGwJt8gaaa3BKoSEvI2juJtpE0MWbsCk4LkF0hBPv87SuL672iAW5IBfkglyQC3JBLsgFucIRvNx+UHX3ek5TBbkgF+SCXJALckGutIcbjq093NBUQS7IBbkgF+SCXJALcoWazKcLvu3fLqmaTxdMZmN+az5d8JPJbMxfBbkgF+RaNw9ne2r2PFhRdf95QlMFuSAX5IJckAtyQS7IBbkgV6hZb7mDJw70ljvqsh11qVOQC3KFmm1HXWBF1XbUpalKf92hdgMO9NcdmirIBbkgF+SCXJALcoUjeHw/5b8IckEuyAW5IBfkglyQC3Jf1uEi6ZtT1PMAAAAASUVORK5CYII="},{seed:"orc-020",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+UlEQVR4AeXBsU0CYQCG4dcvPxuQaxiB2orY2dNb/cHCXVzAWEhuhZtB96CBhrADtthcgh53Ju/z3D09rs+IBbkgF+SCXJALckEuyAW5wsTenz+59PLxwJiCXJALckEuyAW5IFdmqz3/yWy1Z0xBLsgFuSAX5IJckCsMpF239Kld5TfadUuf2lX+IsgFuSBXGEjtKrdQu8otBbkgF+SCXJALckEuyAW5IBfkCgNbbI9c5ZUfFtsjfQ6bhiEFuSBXGNhh03CdHZcOm4YxleVpzrR2XFqe5owpyAW5IBfkglyQC3KFib193TOlIBfkglyQC3JBLsgFuSD3DcGrHjHNHIjKAAAAAElFTkSuQmCC"},{seed:"orc-021",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/UlEQVR4AeXBIU7DYACG4Xdf/oOAmyFZwgGQyE6Cog4BB8BhOQAHaFBIJrnC7AzMcIm6kRRFUgwJyd+k5H2exU1zOSAW5IJckAtyQS7IBbkgF+QKFT1cvDJ293zO3AW5IBfkglyQC3JBrvSrPVPpV3vmLsgFuSAX5IJckCtU0jUd/fsZY13T8a3dtPxF13T8pt201BDkglyQW1zdnw5U8rj8YOz27Zi5C3JBLsgFuSAX5IJckAtyQS7IFSZ08vJJbbt1oaYgF+QKE9qtC3MX5MphO1DNkh8O24G5C3JBLsgFuSAX5IJcoaLrpyP+myAX5IJckAtyQS7IBbkg9wUuuyNGU87/MAAAAABJRU5ErkJggg=="},{seed:"orc-022",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/UlEQVR4AeXBIU4DUQBF0cvLx6NqWsUKupPRdT+17INlNOPQk+Bquo5qxrQG0dQgQJG0CASdIZPcc+6emtUnYkEuyAW5IBfkglyQC3JBrjBBq/cFl14e3hhLkAtyQS7IBbkgF+TKablncnYLLp2We8YS5IJckAtyQS7IBbnCQNqm5Te1q/xV27T8VLvKEIJckAtyhYHUrjKW2lXGEuSCXJALckEuyAW5IBfkglxhYPPNgZs9cmW+OfCtX88YUpALcoWB9esZN9txpV/PGEuQK8ftmcm558pxe2YsQS7IBbkgF+SCXJArTNDzxyv/JcgFuSAX5IJckAtyQS7IfQFQLCMN+EtlIAAAAABJRU5ErkJggg=="},{seed:"orc-023",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+UlEQVR4AeXBIU4DUQBF0cvLTzMIkiZVSLbQDVCJaFLTBfw9sA4sehZQMwvpyG6hCoWpA9sxmP4mQ+45D9vX7Q9iQS7IBbkgF+SCXJALckGuMGMfT0y8f9NckAtyQS7IBbkgF+TKanNmto7PXFttzrQW5IJckAtyQS7IBblCI/2u5y91qNyq3/Vcq0PlVkEuyAW5QiN1qNxbHSqtBbkgF+SCXJALckEuyAW5IBfkCo2tDxeaeWFifbgw7jtaCnJBrtDYuO9o5e3IxLjvaK0sTwv+i+VpQWtBLsgFuSAX5IJckCvM2OfjF/cW5IJckAtyQS7IBbkgF+R+AfKrHGb5nDDRAAAAAElFTkSuQmCC"},{seed:"orc-024",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABDElEQVR4AeXBsU1CUQCG0Y8/t7XRisIRqBhABsDABr4VjJU2dnbu8EaAmhmo6EysKUhsTKhIsDLhNSbGS/LMd85gejM9IhbkglyQC3JBLsgFuSAX5Apn8HpBx8MnvRXkglyQC3JBLsgFuXI12VLdesipq8mWvgpyQS7IBbkgF+QKlbSzlm9v60dOtbOWZtnwW+2s5SfNsuGvglyQC3KDu+fxkcqe1kNOvYy39FWQC3JBLsgFuSAX5IJckCtUNloc4JqO0eJALZt5oaYgF+QKlW3mhds1HZt5oa+CXJALcmW32lPdJR271Z6+CnJBLsgFuSAX5IJc4QzuP975L4JckAtyQS7IBbkgF+SC3Be69yZgSgr5xwAAAABJRU5ErkJggg=="},{seed:"orc-025",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+UlEQVR4AeXBsU3DUABF0cvTH8BCblKkyAAsQEEXiS4r/IapaCwxgQfJEKkTIXc0SNCaJkHg8JHuOTcP948fiAW5IBfkglyQC3JBLsgFuUIDz7eFuafXd1oJckEuyAW5IBfkglzZbI/8uf2Kuc32SCtBLsgFuSAX5IJckAtyhYUMu4Fz6lj5iWE3cE4dK78R5IJckCsspI6Va6hj5ZqCXJALckEuyAW5IBfkglyQKyysG05cdLdirhtOfNdUe5YU5IJcYWFT7blozxdT7WmlrA8dra0PHa0EuSAX5IJckAtyQa7QwEv/xn8R5IJckAtyQS7IBbkgF+Q+AV/eHfo8aflpAAAAAElFTkSuQmCC"},{seed:"orc-026",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA50lEQVR4AeXBoU1DUQBA0cvNSzUJCRbdKWAAElb4vgswAgvg61F/AwQzgEZ1CRKwVYTCryj3nLPb69tPwiRO4iRO4iRO4iRO4iRucIB71ux74I1TJ3ESJ3ESJ3ESJ3Hj4mbHjz2v2Xdxs+PUSZzESZzESZzESZzEDRayvdvynWme+I3t3ZbvTPPEX0icxEncYCHTPHEM0zxxTBIncRIncRIncRIncRIncYOFfTy+c0xjc8WSJE7iBgsbmytOyTh/XfFb568rTp3ESZzESZzESZzEDQ7wdPnCfyNxEidxEidxEidxEidxX5tnF5CU4+pAAAAAAElFTkSuQmCC"},{seed:"orc-027",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABBUlEQVR4AeXBsUpCYQCG4beP/wIkQhBx8AraG9qELuMgZKN7d+FqIEJb9+INtDm4KLS2BAVOp6VBfuXE+zxX93cP34gFuSAX5IJckAtyQS7IBbnCmbxcF9oeP77ooiAX5IJckAtyQS7IlfHkwFlsBrSNJwe6KMgFuSAX5IJckCtUsp7NaXt/euMU69mcvzTLBTUFuSAX5AqVNMsFbc8MOEWzXHBJQS7IBbkgF+SCXJALcoXKhqs9R7cD2oarPTXspn1qCnJBrlDZbtrnaMMvu2mfLgpyQS7IBbky2va4hNG2RxcFuSAX5IJckAtyQa5wJq83n/wHQS7IBbkgF+SCXJALckHuBzpDHxykfg68AAAAAElFTkSuQmCC"},{seed:"orc-028",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/ElEQVR4AeXBsU0CYQCG4dcvv70FC1Dj9cbCjsSSEa6ipXcA+2uvYgRGoHIAbwzYQBJtvQIjyZ+D5H2eu5fn12/EglyQC3JBLsgFuSAX5IJc4Qa83zf89vY1MJUgF+SCXJALckEuyJX58sDV7RmZLw9MJcgFuSAX5IJckAtyhUq26w1/afuO/9quN5zT9h01BbkgF+QKlbR9Ry1t3zGVIBfkglyQC3JBLsgVKmt2Jy72wEizO3HOsCrUFOSCXKGyYVW41NOekWFVmEqQC3JBLsiVxXHGrVkcZ0wlyAW5IBfkglyQC3KFG/Dx+Mm1BLkgF+SCXJALckEuyAW5H4SrHhAP44j3AAAAAElFTkSuQmCC"},{seed:"orc-029",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA8ElEQVR4AeXBMWoCUQBF0ZvnF7ICIbgU2/TpUw0Wti4huIRppwiuR8guNEVWEBAZW5MiBGa+MNxzHl6fX3rEglyQC3JBLsgFuSAX5IJcYQRvjxdu7b5nTEWQC3JBLsgFuSAX5Mp8dWSwjyduzVdHpiLIBbkgF+SCXJALckGuUMF+s+W3pmv5r/1my1+armUsQS7IBblCBU3XMkTTtdxLkAtyQS7IBbkgF+QKFSzfv6jltF4wpiAX5AoVnNYLpiLIBbkgV86HnsFm/HA+9ExFkAtyQS7IBbkgF+QKI9hdPpmqIBfkglyQC3JBLsgFuSB3BW8SHgxGs1pgAAAAAElFTkSuQmCC"},{seed:"orc-030",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA7ElEQVR4AeXBITJEAQCA4d8/7wCSYlRjFDTBNVxAfNt0SVK2Ed1DdwptwxZX2ECl7Oyst8H+33dwcX79RZjESZzESZzESZzESZzEDWzo/eGDn24eT9kHEidxEidxEidxEjdc3q7YxuXtin0gcRIncRIncRIncQMTeb5/YZ3ZfGQbz/cvrDObj/yFxEmcxA1MZDYf2YXZfGSXJE7iJE7iJE7iJE7iJE7iBiZ2/PrJLi3vjpiSxEncwMSWd0f8JxI3nCwO2cgZv5wsDtkHEidxEidxEidxEjewoae3K/aRxEmcxEmcxEmcxEmcxH0D8McY+uaoo18AAAAASUVORK5CYII="},{seed:"orc-031",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA90lEQVR4AeXBIU7DYACG4Zcv/wEmikczEiYxHGO+unU7SN2md5QlJByAa1AxPwGWmqWEkn/J+zx3z48vX4gFuSAX5IJckAtyQS7IBblCJfv7V37qP9+oIcgFuSAX5IJckAtyZbO9UMWJic32Qg1BLsgFuSAX5IJcYSH73YFr+qHjt/a7A9f0Q8dfBbkgF+QKC+mHjqX1Q8d/C3JBLsgFuSAX5IJckAtyQS7IFRa2Oo7M8sDE6jgyx7ltWFKQC3KFhZ3bhllOTJzbhhqCXFmPDbdgPTbUEOSCXJALckEuyAW5QiXvTx/cgiAX5IJckAtyQS7IBbkg9w2n5R4EjN7pagAAAABJRU5ErkJggg=="},{seed:"orc-032",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABAklEQVR4AeXBoUpDYQCG4XcffzKZVtxFDLwB8QbMS8LAsrVzA97B2k4RrBZvQVleMi+7YjKsLRxZO0kQ/sGR93lGy7tZh1iQC3JBLsgFuSAX5IJckCtUNvue0Pdy+cmQBbkgF+SCXJALckGuHKY7qtpM6DtMdwxZkAtyQS7IBbkgF+QKlayblpOPzSt966blZLla8BfrpuU3y9WCGoJckAtyo/vH646KHja39D3dvDNkQS7IBbkgF+SCXJALckEuyAW5wpldPX9R034+pqYgF+QKZ7afjxmyctx2nNNx2zFkQS7IBbkgF+SCXJArVNZevPGfBLkgF+SCXJALckEuyAW5H51OJKLZhZJlAAAAAElFTkSuQmCC"},{seed:"orc-033",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABAUlEQVR4AeXBMUoDUQBF0ZvHX4DF2FsbwYCNjSDuIbU2NpkuG3AH6SaNjQtwDTIgWIvbMIV9iki6sRGEHxi550zOTy93iAW5IBfkglyQC3JBLsgFucLIdcdXDLWfr9QU5IJckAtyQS7IBbkym28ZtZ4fZvMtNQW5IBfkglyQC3JBLsgVKumWa37Trhb8Rbdcs/fePzPULdfstasFNQS5IBfkJrcPFztG7L6/Yejx+oWaglyQC3JBLsgFuSAX5IJckCtUdvS0oaoTDirIBblCZV93DVX1HFSZbhr+k+mmoaYgF+SCXJALckEuyBVG7u3sg0MKckEuyAW5IBfkglyQC3LfNmgfwBUewRwAAAAASUVORK5CYII="},{seed:"orc-034",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/UlEQVR4AeXBIVICYQCG4dfPH0Yb1eARaNuoVEeyJ+AAdMe+2dljcBBIzHACqt2Ao2MDg4V/nXXe57l6mj9+IhbkglyQC3JBLsgFuSAX5AoD9XzzwamX92v6EOSCXJALckEuyAW5MpodGKTtHadGswN9CHJBLsgFuSAX5IJckCtUslpu+E3bNVxitdzwU9s1XCrIBbkgV6ik7Rr61HYNfQhyQS7IBbkgF+SCXJALckGuUNl0faSKe85M10e+7RaFmoJckCtUtlsUanjYcma3KPShTPZj/oPJfkwfglyQC3JBLsgFuSBXGKjX2zf+QpALckEuyAW5IBfkglyQ+wL4aR0cwPGZogAAAABJRU5ErkJggg=="},{seed:"orc-035",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA70lEQVR4AeXBsU1CUQCG0c8/t6Cxkco1zOtlAEqGoDUyxrN/Q7gBKyAbWFOQ2JAQO22hMTHcW9x859wtn5c/iAW5IBfkglyQC3JBLsgFuUIlb/dceT3RhSAX5IJckAtyQS7IlfniQBUfj1yaLw70IMgFuSAX5IJckAtyQa7QyGa949I4DfzXZr3jL+M0cKsgF+SCXKGRcRq41TgNtBbkglyQC3JBLsgFuSAX5IJcoZGn929a2K9m1BTkglyhkf1qRg/KcXumigeuHLdnehDkglyQC3JBLsgFuUIlL1+f9CjIBbkgF+SCXJALckEuyP0Cmp0cINcz5AIAAAAASUVORK5CYII="},{seed:"orc-036",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+0lEQVR4AeXBMUrDYACG4deP/wBFXDqU0DtkEAe3ghcRCll7jKyFgKPXaQ+RueDqUtC1LoFqmgjv89w9P718IRbkglyQC3JBLsgFuSAX5Aoze7svXHr9ODOlIBfkglyQC3JBLsiV9ebErI5LLq03J6YU5IJckAtyQS7IFUay2x4Y0nY1v7HbHhjSdjV/EeSCXJArjKTtam6h7WpuKcgFuSAX5IJckAtyQS7IFUZ23vdc5XHJpfO+Z0hpKsYU5IJcYWSlqbjKkR9KUzGlIBfkglxZ9Qv+k1W/YEpBLsgFuSAX5IJckCvM7P3hkzkFuSAX5IJckAtyQS7IBblvKrMc/QgcuRcAAAAASUVORK5CYII="},{seed:"orc-037",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA6klEQVR4AeXBq02DYQBA0cvNlya4hmCQrIHAkTAGBtM6BqlrDYaFsCzBIwxAAraqSeGvKPeck+ur22/CJE7iJE7iJE7iJE7iJG6wp8ezwbb7jy+OmcRJnMRJnMRJnMSNy5tX9vJ8wbbLm1eOmcRJnMRJnMRJnMQNJrJ+2LDLcrXgN9YPG3ZZrhb8hcRJnMQNJrJcLTiE5WrBIUmcxEmcxEmcxEmcxEmcxEncYGLzpzcO6fPunClJnMQNJvZ5d84xGfOXGX8xf5lxzCRO4iRO4iRO4iRusKfN6Tv/icRJnMRJnMRJnMRJnMT9AFelGWX9rQ8gAAAAAElFTkSuQmCC"},{seed:"orc-038",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABB0lEQVR4AeXBsUkDYQCG4TcffysEYpPiRkiVAcwAEdJb2GsXOxsLwU67ZIEskEVS3QQpJANY2ARimwMRxDs5eJ9nML+anxALckEuyAW5IBfkglyQC3KFjr1e0PDwQa8EuSAX5IJckAtyQa6MZgc6tRtzbjQ70CdBLsgFuSAX5IJckCu0ZLVc8533m2d+Y7Vc85P7tzvaFOSCXJAb3D5NT3TocTfm3Mv0QJ8EuSAX5IJckAtyQS7IBblCyybbIw0VDZPtkb+oF4U2BbkgV2hZvSicu97RUC8KfRLkglyp9kP+U7Uf0idBLsgFuSAX5IJckCt0bHP5SZ8FuSAX5IJckAtyQS7IBbkvyVwfVSneabUAAAAASUVORK5CYII="},{seed:"orc-039",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/UlEQVR4AeXBMUrDYACG4deP/wRSCqWDdO7g7uBW8BwBl2TrQbK1i9A7eJAeI0tbegEFXePiYBMJvM9z9/z08oVYkAtyQS7IBbkgF+SCXJArTMzbfaHv9frJmIJckAtyQS7IBbkgV1abM5NyXNC32pwZU5ALckEuyAW5IBfkglxhILvtnt80bc1f7LZ7+pq2ZkhBLsgFucJAmrZmDE1bM6YgF+SCXJALckEuyBUGtjycuMnjgr7l4URfV80ZUpALcoWBddWcmxz5oavmjCnIBbkgV9aXGVO2vswYU5ALckEuyAW5IBfkChPz/vDBfwpyQS7IBbkgF+SCXJALct/qrB4wS2ec6gAAAABJRU5ErkJggg=="},{seed:"orc-040",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/klEQVR4AeXBIU4DUQBF0cvLX8CIMYgaJAmhYgQbKXpkF9BlzAJGNsGxlnYLJPUVdRUVEFybEEz/kJJ7zt3z48snYkEuyAW5IBfkglyQC3JBrnCj3h9azr1+7JlCkAtyQS7IBbkgF+TKfHHiJm25MF+cmEKQC3JBLsgFuSAX5AqVrJYbfjOMHddYLTf8ZBg7rhHkglyQK1QyjB1TGsaOKQS5IBfkglyQC3JBrlBZs95TxdM955r1nm+HvqWmIBfkCpUd+pYqtlw49C1TCHJBLsgFuTLbNfwHs13DFIJckAtyQS7IBbkgV7hRb+2RvxDkglyQC3JBLsgFuSAX5L4Aor8d3qpKjCwAAAAASUVORK5CYII="},{seed:"orc-041",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA50lEQVR4AeXBsUkEUQAA0XH4GF+iRQjihSbW4CXmm1uP+eUmXgeCdiDYhCUoaKogItwqLPPewdnJ+TthEidxEidxEidxEidxEjfY083RBZ9dvzywJBIncRIncRIncRI31lev7OWeL9ZXryyJxEmcxEmcxEncYGbbyy3fmXYTv7W93PKTaTcxF4mTOIkbzGzaTexr2k38F4mTOImTOImTOIkbzOz07o2/9LQZzEniJG4ws6fNYEkkTuIkTuIkbqyeD5nT6vmQJZE4iZM4iZM4iZO4wZ5ujx9ZMomTOImTOImTOImTOIn7ACjDGUaAijDvAAAAAElFTkSuQmCC"},{seed:"orc-042",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+UlEQVR4AeXBMWoCUQBF0ZvHX4CFCEFsUqbRMruwMvXHhclAunSzELcQsLCR9CksklabIYHPTOCe87B+fvlGLMgFuSAX5IJckAtyQS7IFUb2/jTn1uvHJ1MKckEuyAW5IBfkglzZ7K6M6sidze7KlIJckAtyQS7IFRrpth1Dal/5jW7bMaT2lZaCXJALcoVGal9pofaVMQW5IBfkglyQC3JBLsgFuUJjy8OFQetHbi0PF/7ivF/QUpALcoXGzvsFg47cOe8XTCnIBbkgF+TK6jRjSqvTjCkFuSAX5IJckAtyQa4wsrf5F/9JkAtyQS7IBbkgF+SCXJD7Af2+Hgs7iuEuAAAAAElFTkSuQmCC"},{seed:"orc-043",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABB0lEQVR4AeXBMUrDYACG4bef/yoU6dJDCIUepLOT2QXBURc3D+AJcgXnniEXKDg7tEjA0k0qdEoXFxOIvM8zuVvdHBELckEuyAW5IBfkglyQC3KFgdx/f9H1enHJGAW5IBfkglyQC3JBruwXGwbRzOnaLzaMUZALckEuyAW5IBfkglyQK/SkXtV0bZpH/qJe1fymeqvoQ5ALckFucvu8PDKAp2ZO18vygzEKckEuyAW5IBfkglyQK/RsWu84uZ7TNa139KGtZvQpyAW5Qs/aasZJw5m2mjFGQa5s1wcGccWZ7frAGAW5IBfkglyQC3JBrjCQh893/oMgF+SCXJALckEuyAW5IPcD/aImPXGHKbAAAAAASUVORK5CYII="},{seed:"orc-044",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+UlEQVR4AeXBMUoDUQBF0evzE7AQ0qaaLaR0F6ntfj/gYoRYzxZmIWlTpMsCrEwZ0TaCBAyfceCec9dvnr8QC3JBLsgFuSAX5IJckAtyhZl4+fzg0uv9I1MIckEuyAW5IBfkglw5rQ/Mwm7FpdP6wBSCXJALckEuyAW5IBfkglyhkWEzcE0dK38xbAauqWOlhSAX5IJcoZE6VlqqY2UKQS7IBbkgF+SCXJArNHbeHrnJ04pL5+2R35S+o6UgF+QKjZW+4yY7fih9xxSCXJAry/2COVruF0whyAW5IBfkglyQC3KFmXh7eOc/BLkgF+SCXJALckEuyAW5byF/HnYXncybAAAAAElFTkSuQmCC"},{seed:"orc-045",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/0lEQVR4AeXBoU0DYQCG4Zcv/yU3ADN0gCJr8TWnUL9mEEZA3wA1l+BqOkEHQNfVN00qwLYIBL0jl7zP8/DyvP5CLMgFuSAX5IJckAtyQS7IFWbm9bLg2nvzyZSCXJALckEuyAW5IFea1YFZ2S241qwOTCnIBbkgF+SCXJALckEuyBVG0q97flOHyl/0656f6lAZS5ALckGuMJI6VKZQh8qUglyQC3JBLsgFuSAX5IJcYWTLzZm7PHJjuTlzbd+1jCnIBbnCyPZdyz2edtzYdy1TKsftiVlpuHHcnphSkAtyQS7IBbkgF+QKM/N2+eA/BbkgF+SCXJALckEuyAW5bwQVIS8lHg7uAAAAAElFTkSuQmCC"},{seed:"orc-046",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABBElEQVR4AeXBsU0CYQCG4ZcvP3OgHb0lMTb29DaSWFDgDg6hFBYmFzdwBjom0IqQMIIdJGenh4WF3plL3ucZXF1Oa8SCXJALckEuyAW5IBfkglyhQ483K5rmT+f0TZALckEuyAW5IBfkynCy478MJzv6JsgFuSAX5IJckAtyQS7IFVpSTSu+e3+74DeqacVPZi8z2hLkglyQG1zfndV05GG8oen29ZS+CXJBLsgFuSAX5IJcoWWH5ZZP9xw5LLf8VVmMaFOQC3KFlpXFiC8bmspiRN8EuSBX9uuazow5sl/X9E2QC3JBLsgFuSAX5Aodmj+f0HdBLsgFuSAX5IJckAtyQe4DL3UiRXPzUPoAAAAASUVORK5CYII="},{seed:"orc-047",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABAElEQVR4AeXBsU1CUQCG0c8/t2AAFqCmI9HCwo7ExIKGAW7s3cAtLGzfADSvcAMrC1ZgABiATlsoIJrcvGfynXPzcP/4jViQC3JBLsgFuSAX5IJckCsM6OPli1NPb3eMLcgFuSAX5IJckAtyZbbcM5bZcs/YglyQC3JBLsgVGulWHdfUvvIb3arjmtpXWgpyQS7IFRqpfaWF2leGFOSCXJALckEuyAW5IFdobLE5ctErZxabI3+1XU9oKcgFuUJj2/WES545t11PGFuQC3JBLsgFuTI/TBnOjlPzw5SxBbkgF+SCXJALckGuMKD3z1v+myAX5IJckAtyQS7IBbkg9wPGNB2gcWhoJQAAAABJRU5ErkJggg=="},{seed:"orc-048",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA6ElEQVR4AeXBoU1DUQBA0cvNw3cBRAfoAggcCQ5G+HMwAHN0BL5DMgGmE6A7AiRgwTSk+ZCUe87Z1eXNB2ESJ3ESJ3ESJ3ESJ3ESNzjSw/mGr+7fdpwiiZM4iZM4iZM4iRvr6z1Heeab9fWeUyRxEidxEidxg4Vsb7ccMs0TP7G93XLINE8sSeIkTuIGC5nmiSVM88RfkjiJkziJkziJkziJGyxs8/jOb9rdDZYkcRI3WNjubnBKJE7iJE7iJG5cvK5YwsXrilMkcRIncRIncRIncYMjPa1f+A8kTuIkTuIkTuIkTuIk7hNxZxl9K1jedQAAAABJRU5ErkJggg=="},{seed:"orc-049",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA60lEQVR4AeXBoU0DAQBA0c/PgUbVgOkAeILANWGMBlFbzwD42gqCZwkEG5B0AwxoFAIsGATciea/d3B5cfVJmMRJnMRJnMRJnMRJnMQNjOT28Izvbj6e2QcSJ3ESJ3ESJ3ESN8wXb4zikR/mizf2gcRJnMRJnMRJnMRJ3MBE7ldrvltuN/zF/WrNb5bbDf8hcRIncQMTWW43jGG53TAliZM4iZM4iZM4iZM4iZM4iRuYyMndK1N4uZ4xJomTuOF4d8QU3s9PmcLxjlFJnMRJnMRJnMRJ3MBIHmZP7COJkziJkziJkziJkziJ+wJ1cxllaXg/8gAAAABJRU5ErkJggg=="},{seed:"orc-050",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABB0lEQVR4AeXBoUpDYQCG4Xcf//oJqwMtuwFtKyJ2u2GuWOyzegF2i2XsKkxyLmB4AbbB4sK6YdYdEEE8Rw68zzO4ubo+IBbkglyQC3JBLsgFuSAX5Aodu/+ccOx5+EGfBLkgF+SCXJALckGuDKdbOlVPODacbumTIBfkglyQC3KFlswWa75VP/Abs8Wan6yezmlTkAtyQW5w+3h2oEN39SXHXi7e6JMgF+SCXJALckEuyAW5IBfkglyhZdVyR8MJDdVyx1/s5yPaFOSCXKFl+/mIhpqG/XxEnwS5IFfGm4r/NN5U9EmQC3JBLsgFuSAX5Aodez19p8+CXJALckEuyAW5IBfkgtwXfhsfkyKuI00AAAAASUVORK5CYII="},{seed:"orc-051",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/klEQVR4AeXBIVICYQCG4ddvfsgkCgfQA2xjbHa6gYDBE9A8gXsCg4Q9gJewkqkWKFxCKxCckfnX2Zn3eW4eHxbfiAW5IBfkglyQC3JBLsgFucKAvD19cur5/Z6+BbkgF+SCXJALckGujOZ7hmo039O3IBfkglyQC3KFSpbrLb/p2oa/Wq63XOrahpqCXJALcoVKurahtq5t6FuQC3JBLsgFuSAX5IJckAtyhcpmmyNXe+XMbHPk0mE1paYgF+QKlR1WU673xanDakrfglyQC3JlshszGHecmezG9C3IBbkgF+SCXJALcoUBefm45b8FuSAX5IJckAtyQS7IBbkfoHkcnbJjkisAAAAASUVORK5CYII="},{seed:"orc-052",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA7UlEQVR4AeXBIU4DUQBF0cvjtymuqglhKbV4fGXljOsGCBsY15HsCNsVtKYJHkPA1kAI8yH5uedcbe4fPhALckEuyAW5IBfkglyQC3KFCR4X71x6erumNUEuyAW5IBfkglyQK7P1kV97ueXSbH2kNUEuyAW5IBfkglyQC3JBrlDRfjfylX7o+In9buQ7/dBRU5ALckGuUFE/dEzVDx3/KcgFuSAX5IJckAtyhcruns/8pdN2RU1BLsgVKjttV7QkyAW5sjzMqWV5mNOaIBfkglyQC3JBLsgVJhhvXmldkAtyQS7IBbkgF+SCXJD7BAMuGTGnS8ZrAAAAAElFTkSuQmCC"},{seed:"orc-053",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABCElEQVR4AeXBsUpCYQCG4devX2h0aHHwEpwcXVsj5xraa3NskQga2/QGugFv5ExegWB0CTUYtiqIRBxOB97n6dxcXu8QC3JBLsgFuSAX5IJckAtyhYbMzr/Z9/R1RhsEuSAX5IJckAtyQa50xxsaUfXZ1x1vaIMgF+SCXJALckEuyAW5IFeoyXy64JT322d+az5dcMrD6z11CXJBLsh17majHQ14rPrsexl90AZBLsgFuSAX5IJckAtyhZoNl1uOGnBguNzyF6tJoU5BLsgVaraaFI65qjiwmhTaIMiVwbrHfxise7RBkAtyQS7IBbkgF+QKDXm7+KSNglyQC3JBLsgFuSAX5ILcD0Y9ID+tm2P0AAAAAElFTkSuQmCC"},{seed:"orc-054",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABDUlEQVR4AeXBoUpDYQCG4Xcfv920siWvYOANiDdgXhIGFtd2AzajbSvCqsVoG8i5BPOyK1sxDIth1h0Qg54DB97n6U2vxgfEglyQC3JBLsgFuSAX5IJcoWXjjyHHnk7f6ZIgF+SCXJALckEuyJX9aE2rqiHH9qM1XRLkglyQC3JBrtCQ+WzBT96qZ/5iPlvwm+nDLU0IckEuyPWu784PtOimuuTY48UrXRLkglyQC3JBLsgFuSBXaNhguaXmjJrBcst/bCZ9mhTkglyhYZtJn5qKms2kT5cEuSAX5IJckCu71SetOqFmt/qkS4JckAtyQS7IBbkgV2jZ/dcLXRbkglyQC3JBLsgFuSAX5L4BoSUmEU3hzjQAAAAASUVORK5CYII="},{seed:"orc-055",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+0lEQVR4AeXBMUoDUQBF0evzE7AQppgmixCyE2u71DNgkYVMISR1NpQ2RdYQIWBa0TaKCIY/MnDPuekfnz4QC3JBLsgFuSAX5IJckAtyhQl5fn/j0svtPWMLckEuyAW5IBfkglw5Lw5Mxm7OpfPiwNiCXJALckEuyAW5QiXr1Ybf9EPHX61XG37SDx21BLkgF+QKlfRDR2390DG2IBfkglyQC3JBLsgVKmu2R672MOdSsz3y3WnZUlOQC3KFyk7Llqvt+OK0bBlbkAtyQS7IBbnS7GdMVbOfMbYgF+SCXJALckEuyBUmZHP3yn8LckEuyAW5IBfkglyQC3KfAFcfJSH9nmgAAAAASUVORK5CYII="},{seed:"orc-056",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+ElEQVR4AeXBIW4CUQBF0duXvwPwaDKV48sCWAjJWESXUDGWZJaDqkLVVKMwLIGktSBKSvIzTHLPeVm/rX8QC3JBLsgFuSAX5IJckAtyhQl4Z8m1D74ZS5ALckEuyAW5IBfkymx14un2S67NVifGEuSCXJALckGuUMl2c+Cefmj5r+3mwD390FJLkAtyQa5QST+01NIPLWMJckEuyAW5IBfkglyQK1R22R15WMONy+7IX0q3oKYgF+QKlZVuwcP23CjdgrEEuSAX5IJckCvNec7UNOc5YwlyQS7IBbkgF+SCXGECPl+/eJYgF+SCXJALckEuyAW5IPcLe7gcBlSAIl8AAAAASUVORK5CYII="},{seed:"orc-057",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABBUlEQVR4AeXBoU5CYQCG4Zdvf2BWvAkq2GVmIt3kxgUwZ7MazM7NW+AWZCczRvUSyDY2wjHpwGDQc9zZ3ufpTS+nNWJBLsgFuSAX5IJckAtyQa7QojuGHHvgja4JckEuyAW5IBfkglwZTHa0phpybDDZ0TVBLsgFuSAX5AoNWcw3fPde3fIbi/mGnzw+X9CUIBfkglzv+n5c05Kb6opjL5MVXRPkglyQC3JBLsgFuSBXaNhouefLOSdGyz1/tZ31aVKQC3KFhm1nfT6NK05sZ326JsgFuSAX5IJcOaxr/sthXdM1QS7IBbkgF+SCXJArtOjp7JWuC3JBLsgFuSAX5IJckAtyH706IrVf+FjmAAAAAElFTkSuQmCC"},{seed:"orc-058",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+klEQVR4AeXBMU4CUQBF0evLdwf0E+rRbioLOxKXQkJL5QKspiWZ5VBZUekKqGEHkGgrBUSTnxmTe87d89PLF2JBLsgFuSAX5IJckAtyQa4worf7R356PX0ytSAX5IJckAtyQS7IlfniwGi2XJgvDkwtyAW5IBfkglyQC3JBLsgVKlkvd9zSDx2/sV7uuKUfOmoKckEuyBUq6YeOGvqhY0xBLsgFuSAX5IJckCtUdt7suarlwnmz56/KqqGmIBfkCpWVVcNVWy6UVcPUglyQK+1xxlTa44ypBbkgF+SCXJALckGuMKL3hw/+myAX5IJckAtyQS7IBbkg9w31Jhz0o7R9IgAAAABJRU5ErkJggg=="},{seed:"orc-059",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA7UlEQVR4AeXBMS4EAQBA0e9nii0lar2WbKXhAFtq3GAPsJeQ7AHmBhoXcAGVuIPKFXS0KESYkUz+ewebi80bYRIncRIncRIncRIncRI3MIHb7QMfXY/nLIXESZzESZzESZzEDUeXL0zt6PKFpZA4iZM4iZM4iZM4iZO4gRnsto98tR/X/MRu+8h39uOaKUmcxEncwAz245rf2o9r/pPESZzESZzESZzESZzEDczg7O6VuTxdrZiSxEncwAyerlYsxXD8fMifnfDJ8fMhSyFxEidxEidxEidxAxO4uT9lqSRO4iRO4iRO4iRO4iTuHTWjGGu4cM3UAAAAAElFTkSuQmCC"},{seed:"orc-060",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABAElEQVR4AeXBIU4DUQBF0cvLX0BFE3ZACIaKEQi20WAru4BaFAYxDjOy+6hFdgVsoRVNmtRUgG3NBJKfGZJ7zs3jw9M3YkEuyAW5IBfkglyQC3JBrjCwz9cvLj2/3TGmIBfkglyQC3JBLsiV2fzMmGbzM2MKckEuyAW5IFeoZLXc0qftGn5rtdzSp+0aaglyQS7IFSppu4Za2q5hKEEuyAW5IBfkglyQC3JBLsgFuUJlk/WeXu9cmaz3/MVhMaWmIBfkCpUdFlP6Hbl0WEwZU5ALcmW3OTGoe67sNifGFOSCXJALckEuyAW5wsBePm75T4JckAtyQS7IBbkgF+SC3A+L+iAQAePTXwAAAABJRU5ErkJggg=="},{seed:"orc-061",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABD0lEQVR4AeXBoUpDYQCG4Xcv5wJWtIwFDQsWBxosgrhrWBYEYWAdVm9gVRCEXYdJBtbhLciCZSbzwAlLWzHIf+DI9zyt46OzNcEknISTcBJOwkk4CSfhJFxFTR72ztl2+/lKE0k4CSfhJJyEk3ASruoPV9Rixo7+cEUTSTgJJ+EknISTcBJOwkm4ikLGoznbvmZ3/MV4NOc3k8dTSpJwEk7Cta7uT9bU4GZ2ybanixeaSMJJOAkn4SSchJNwEk7CSTgJV1FYZ7pk45AdnemSEj6u9ylJwlXdRZuSvllSp+6iTUkVhTnosfHODgc9mkjCSTgJJ+EknISrqMnzwRv/gYSTcBJOwkk4CSfhJJyE+wHOUSDhZh7h0wAAAABJRU5ErkJggg=="},{seed:"orc-062",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABAElEQVR4AeXBsUkDYQCG4dePnxRWaXSEFEIwxRVp3MEmOwRsM8a1wu1gkxEELdMFskA6HSEBbQ0cguHnDLzPc3V/N/9CLMgFuSAX5IJckAtyQS7IFS7E880DPz19vjGEIBfkglyQC3JBLsiV2eLARXjlxGxxYAhBLsgFuSAX5IJckAtyQa5QyWq54Tdt1/AXq+WGPm3XUFOQC3JBrlBJ2zXU1HYNQwhyQS7IBbkgF+SCXJALckGuUNl0feQsY05M10f6bB8LNQW5IFfGuxE17ScjzjH/4MR+ck2f8Y6qglyQC3JBLsgFuSBXuBAvt+/8hyAX5IJckAtyQS7IBbkg9w1z1R0SBUHibwAAAABJRU5ErkJggg=="},{seed:"orc-063",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/UlEQVR4AeXBIU4DUQBF0cvLF5Wwk6abqGzS1OC+JewBgWMXs4CakaQrwHQB3UIFiKapA9uaCYSfGXHPuXtePX4jFuSCXJALckEuyAW5IBfkChP7fF1y7eHlnTEFuSAX5IJckAtyQa6c5gemteTaaX5gTEEuyAW5IBfkglyQC3JBrtBIt+oYUvvKb3SrjiG1r7QU5IJckCs0UvtKC7WvjCnIBbkgF+SCXJALckEuyBUaW2wv/MXHmhuL7YUh+82MloJckCs0tt/M+I/9ZsaYynF3Zkr3a24cd2fGFOSCXJALckEuyAW5wsS+nt6YUpALckEuyAW5IBfkglyQ+wFLeSKIDarOHgAAAABJRU5ErkJggg=="},{seed:"orc-064",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA80lEQVR4AeXBIU4DUQBF0duXvw5AVtawBuRYcN8hugGWwAbwExR2JFuYJdSxh7ohGRQJNQ2UX5LhnrPadnczYkEuyAW5IBfkglyQC3JBrnCCx9tXvnp4uWGpglyQC3JBLsgFuSBX9psdv7Xf7FiqIBfkglyQC3JBLsgFuSBXaKTveo6pQ+U7+q7nmDpUWgpyQS7IFRqpQ6WFOlT+UpALckEuyAW5IBfkglyQC3JBrtDY+9Mb51S2l7QU5Mo0zvzYmgPTOPNpxXlN40xLhcbm6wuWJMgFuSAX5IJckCuc4P75iv8iyAW5IBfkglyQC3JBLsh9AKs9IHA/Nn4sAAAAAElFTkSuQmCC"},{seed:"orc-065",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/UlEQVR4AeXBIU4DUQBF0cvLT1NZwyZA0FSxiybNVOC+ZCEsAtw4TM0sA1NHN8EGmlSAImkNAv6QSe45V3c395+IBbkgF+SCXJALckEuyAW5wgTdvj5y7v3hmbEEuSAX5IJckAtyQa4styem5sSl5fbEWIJckAtyQS7IFRrp1z0/qUPlt/p1z7k6VFoJckEuyBUaqUNlLHWojCXIBbkgF+SCXJALckEuyAW5IFdobLU78ldvGy6sdke+7bs5LQW5IFdobN/NaW3fzRlLkAtyZXGYMTUfGy4sDjPGEuSCXJALckEuyAW5wgRdP73wX4JckAtyQS7IBbkgF+SC3BcgpB6JCR43QwAAAABJRU5ErkJggg=="},{seed:"orc-066",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA5UlEQVR4AeXBMUoDUQAA0XH46b2ACF4jrX2wtdre0nOIlX3AA0guJAS8hYK2phGRXWGZ985ur3efhEmcxEmcxEmcxEmcxEncYC4PN5y4f2ENJE7iJE7iJE7iJG5stm/M4Z1Tm+0bayBxEidxEidxEjdYyH6357vpMPFb+92en0yHiblInMRJ3GAh02Hir6bDxH+ROImTOImTOImTOImTOIkbLOTj6cgSxt0lc5I4iRssZNxdsgYSJ3Hj4njOHF45dXE8Zw0kTuIkTuIkTuIkbjCTq8dn1kjiJE7iJE7iJE7iJE7ivgAGCBh9NcmUkgAAAABJRU5ErkJggg=="},{seed:"orc-067",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABCklEQVR4AeXBsUlDUQCG0S8/l9QB26wQLLSyMU26SLKBbw8FKwdwgzdCgqUr2EggEwgpbcQqECshrxGEG3jynTOYX88PiAW5IBfkglyQC3JBLsgFucIJnD8+c+zt7oa+CnJBLsgFuSAX5IJcOZvuOLWz6Y6+CnJBLsgFuSAX5AqVtIuWH/dfdLSLlmbd8BftouU3zbqhhiAX5ILc4Pbh4kBl49krx95fLumrIBfkglyQC3JBLsgFuSAX5IJcobLJas/HjI7Jak8tm2WhpiAX5AqVbZaFMV2bZaGvglwZbYdUN6NjtB3SV0EuyAW5IBfkglyQK5zA59MV/0WQC3JBLsgFuSAX5IJckPsG6gEiO3XixPEAAAAASUVORK5CYII="},{seed:"orc-068",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABCUlEQVR4AeXBIU4DUQBF0duXv4CqGlrRNYAiAcUkoLoEJl0EigTPGkgzW6hCILFsogk1rceW1HUMQXySIfec0fXl7QGxIBfkglyQC3JBLsgFuSBXGLCr51dOvT/cUVuQC3JBLsgFuSAX5Mq82fNfzJs9tQW5IBfkglyQK1TSLTp+0q5bfqtbdBw9ftHTLTqO2nVLLUEuyAW50f3T+YGBmjYfnPp8u6C2IBfkglyQC3JBLsgFuSBXqOxstaOahp6z1Y7tckJNQS7IFSrbLifUMqVvu5xQW5ALckEuyJXZZsxQHeibbcbUFuSCXJALckEuyAW5woCNXm74a0EuyAW5IBfkglyQC3JB7huy5iG5sjvWnwAAAABJRU5ErkJggg=="},{seed:"orc-069",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA50lEQVR4AeXBMS5EUQBA0evm9ySms4QpLIFSMTJbePtQ28fv1BMrsQrNFKyAlkjEyCfhnnO0udi8ECZxEidxEidxEidxEidxEwc4v73nrYeba/46iZM4iZM4iZM4iZtOLx/5rtPLR/46iZM4iZM4iZM4iZM4iZtYyLyd+czYDb5i3s58ZuwGS5I4iZO4iYWM3WAJYzf4TRIncRIncRIncRIncRIncRMLO5n3/KSnsWJJEidx03q/4queeW+9X/HBZsVPOtuzKImTOImTOImTOImbOMDx3RX/jcRJnMRJnMRJnMRJnMS9AjYaGWZUKvePAAAAAElFTkSuQmCC"},{seed:"orc-070",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/klEQVR4AeXBsU1CUQCG0c8/t2AIJrCRkFfoAHSW0FK6AS7xNrB8NaUdA9gQ3EN6QkKhrTQEkxsvyXfO3cP94zdiQS7IBbkgF+SCXJALckGu0Mjz2we/vb880UKQC3JBLsgFuSAX5MpkceIWTBYnWghyQS7IBbkgF+QKlSxXWy4Z+o6/WK62XDL0HTUEuSAX5AqVDH1HTUPf8R+CXJALckEuyAW5IFeobLo+co2vGWem6yPX2M1H1BTkglyhst18xDXGnNvNR7QQ5IJckAtyQa7sNwdaGM84s98caCHIBbkgF+SCXJALcoVGPl/vuQVBLsgFuSAX5IJckAtyQe4HeEsgX1RVjsMAAAAASUVORK5CYII="},{seed:"orc-071",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA6klEQVR4AeXBMS7DcQBA4eflF7NzSIShA3aboYvV6AZO0clq7AkM7mCxNelJbJWwskjJn0Tf9+0dH56+ESZxEidxEidxEidxEidxgy1d3j/x0ePNGbtA4iRO4iRO4iRO4sbJ1YafOLnasAskTuIkTuIkbjCR69tnvrJczPiO69tnvrJczJiCxEmcxA0mslzMmNJyMeMvSJzESZzESZzESZzESdxgYkcPr/ym1XwwJYmTuMHEVvPBfyJxEidxEjcO1vts5YJPDtb77AKJkziJkziJkziJG2zp5e6cXSRxEidxEidxEidxEidx787UGOVIEfk5AAAAAElFTkSuQmCC"},{seed:"orc-072",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/0lEQVR4AeXBIU4DUQBF0duXj0ewChA0oYJ1TFKBKUgMsgmOBdSBwZDQGhwLacYiWQEI/IhBkUwNQfwmQ+45k9Pj8x6xIBfkglyQC3JBLsgFuSBXGLmTl2uG3i4eqSnIBbkgF+SCXJALcmU67xizjl3TeUdNQS7IBbkgF+SCXJALckGuUMli2fKbzWrGXy2WLT+e3tcMLZYtm9WMWoJckAtyk8u7s54R65obhg5eH6gpyAW5IBfkglyQC3JBrlDZ4fMnNX007FWQC3KFyr6ujvhPglzptj2j1rCj2/bUFOSCXJALckEuyAW5wtjd3rNPQS7IBbkgF+SCXJALckHuGzvRIwOk2l5AAAAAAElFTkSuQmCC"},{seed:"orc-073",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABAklEQVR4AeXBsU0CYQCG4Zcv/wAMQEJvRSIrUFtrcQ5w9dk6ALULULgEiRNcojUdiR2NBaEywdBBYyx+kjPv84zau/sjYkEuyAW5IBfkglyQC3JBrlDZuHvl3NfygSELckEuyAW5IBfkglzZzzbUNObSfrZhyIJckAtyQS7IBbkgF+SCXKGSpus5efvgQtP1nKyWc/6i6Xp+s1rOqSnIBbkgN3p8vj1S0WTRc+5zPWfIglyQC3JBLsgFuSBXuLLvly01lXZKTUEuyBWurLRThizIBbmyWx+oabLgwm59YMiCXJALckEuyAW5IFeo7P3phv8kyAW5IBfkglyQC3JBLsj9ADxAIn4ixc2TAAAAAElFTkSuQmCC"},{seed:"orc-074",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA9klEQVR4AeXBIU4DQQCG0Y8/cwdkHSEYKhFco+EOO64ehV/TbC9TyykwpLq+pk3AUtOsmDBNvvfunp9efhALckEuyAW5IBfkglyQC3KFTj7fv/jr9eOBHoJckAtyQS7IBbkgV5arE7dguTrRQ5ALckEuyAW5IFdoZFpvuaaOA3NM6y3X1HGgpSAX5IJcoZE6DrRQx4H/FOSCXJALckEuyAW5IBfkglyhsfO0Z5YNF87TnjlKXdBSkAtyhcZKXTDPN3+VuqCHIBfkymF3pItHLhx2R3oIckEuyAW5IBfkglyhk7fNPbcgyAW5IBfkglyQC3JBLsj9AlIWH0dsNWRLAAAAAElFTkSuQmCC"},{seed:"orc-075",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA8ElEQVR4AeXBoU1DUQCG0Y8/V9SyScMSlSSkhhXedVUoBAM8QdJOwQKsUNEBugSmgqTi1RbTXHEh4X3n3NXH5wmxIBfkglyQC3JBLsgFuSBXaPT1tuLa/esncxDkglyQC3JBLsgFuXJaHmmz4tppeWQOglyQC3JBLsgVOtludtxSx4EW282OW+o40FOQC3JBrtBJHQd6qOPAXwpyQS7IBbkgF+SCXJALckEuyBU6e/j45jcd1gt6CnJBrtDZYb3gPwlyQa6c9xNNnvjhvJ+YgyAX5IJckAtyQS7IFVq9vDNHQS7IBbkgF+SCXJALckHuAkL6Hbm6qoqUAAAAAElFTkSuQmCC"},{seed:"orc-076",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABAklEQVR4AeXBoUpDYQCG4XcfvwumFW/BoIgDi9cxWDDZRDYsuwGLeUXO0CuwiVdic1bByziDmYRjEcM/OPI+z+D06HyLWJALckEuyAW5IBfkglyQK/Tc8dM1XW8XD9QU5IJckAtyQS7IBbkynrb0WctP42lLTUEuyAW5IBfkglyQC3JBrlBJs1jxm/lyxl81ixXfrj7e6WoWK+bLGbUEuSAX5AaXt2dbeqyd3NC193xPTUEuyAW5IBfkglyQC3JBLsgFuUJlJy8banqdsFNBrozWQ+rasEuj9ZCaCpV9Hu7znwS5IBfkglyQC3KFnju4e2SXglyQC3JBLsgFuSAX5ILcF6COH/Rq4qKAAAAAAElFTkSuQmCC"},{seed:"orc-077",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABAElEQVR4AeXBIUsDcQCH4Xc/LtiMZosMi0OLwS9gdxjtm+m6GOwr7u5TmAVZNZvF4gewD2HgydpZxPAfTN7nGRwdnnaIBbkgF+SCXJALckEuyAW5isKeb97oO7s7YJsFuSAX5IJckAtyQa4ajVds0mi8YpsFuSAX5IJckAtyQS7IBbmKQpq6Za17PKevqVvWprMJf9XULb+ZziaUEuSCXJAbXN2edBQ0H77Td/26zzYLckEuyAW5IBfkglyQC3JBrmLDjh8+KenlYoeSglyQqz4WS4oa8sPT7hdFLZaUFOSCXJALckEuyAW5isIu7/f4T4JckAtyQS7IBbkgF+SC3Dd1ECECKHt1UAAAAABJRU5ErkJggg=="},{seed:"orc-078",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA60lEQVR4AeXBMS4EAQBA0e9negrRqLS0W0noNqFxCJUDiEPIHGArrSM4gHavoUHjBLQoJGJGsvnvbZ0en70TJnESJ3ESJ3ESJ3ESJ3EDEzi5feCzx5tzNoXESZzESZzESZzEDQfLF6Z2sHxhU0icxEmcxEmcxEmcxEncwAyur9Z8N64W/Mb11ZqfjKsFU5A4iZO4gRmMqwV/Na4W/AeJkziJkziJkziJkziJk7iBGezfPTOXp8s9piRxEjccve7yV298tXNxyFx2XpmUxEmcxEmcxEmcxA1MYPv+jE0lcRIncRIncRIncRIncR/emhg9RKSXsQAAAABJRU5ErkJggg=="},{seed:"orc-079",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+UlEQVR4AeXBsU1CUQCG0Y8/dwALWwoGoCB5lYlWvkQ7x2AA4hDmDfAKh6BzAFs6J6CmgAFINHTY2HivwXznTO5uHj4RC3JBLsgFuSAX5IJckAtyhQt1+/LGuffnR1oIckEuyAW5IBfkglyZ9Tv+g1m/o4UgF+SCXJALckEuyAW5IFeoZLXc8JNh7PiN1XLDuWHsqCHIBbkgV6hkGDtaGsaOFoJckAtyQS7IBbkgF+SCXJArVDZfH6lh3/PNfH3k5OOpUFOQC3Jlur2ipsOCJg6La06mW6oKckEuyAW5IBfkglzhQk1e7/kLQS7IBbkgF+SCXJALckHuC3caG+8G4hnHAAAAAElFTkSuQmCC"},{seed:"orc-080",data:"iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA+0lEQVR4AeXBoU7DUACG0Y8/9wEmKjHTM4gqBG4JGoWsHH6PUU+DmoOHmeAhcKuYR4ClZozkZiX5zrm6u73/QizIBbkgF+SCXJALckEuyBVmcP38yE8fT2/MJcgFuSAX5IJckAtyZbk+cGmfTC3XB+YS5IJckAtyQS7IBbkgF+QKlWw3e07ph5ZzbTd7TumHllqCXJALcoVK+qGlln5ouZQgF+SCXJALckEuyAW5IFeobLEb+c3hgYnFbuRcx66hpiAX5AqVHbuGvzp2DXMpq7Hh0t6ZWo0NcwlyQS7IBbkgF+SCXGEGNy+v/BdBLsgFuSAX5IJckAtyQe4bStke1OTTX5wAAAAASUVORK5CYII="}],b=st,it="data:image/png;base64,";function nt(s){if(b.length===0)return"default";let e=0;for(let t=0;t<s.length;t+=1)e=(e<<5)-e+s.charCodeAt(t),e|=0;return b[(e>>>0)%b.length].seed}function x(s){if(b.length===0)return"";const e=b.find(t=>t.seed===s)??b[0];return`${it}${e.data}`}const rt=["Bog","Gor","Lug","Maz","Naz","Or","Ruk","Shag","Urz","Zog"],at=["dak","gash","muk","nak","rag","ruk","snak","thor","zug","zul"],ot={König:220,Spieler:160,Captain:120,Späher:80,Grunzer:40},ct={König:[12,14],Spieler:[10,12],Captain:[6,10],Späher:[4,7],Grunzer:[2,5]};function lt(s){return`${s.pick(rt)}${s.pick(at)}`}function At(s){const e=["Feigling","Berserker","Hinterhältig","Trinkfest","Tierjäger","Intrigant"],t=s.chance(.3)?2:1;return s.shuffle(e).slice(0,t)}function dt(s){return{gier:s.next(),tapferkeit:s.next(),loyalitaet:s.next(),stolz:s.next()}}function E(s,e,t=16){const i=[...s.memories,e];return i.length>t&&i.splice(0,i.length-t),{...s,memories:i}}function Se(s,e,t,i={}){const[n,r]=ct[e],a=s.int(n,r),o=Math.max(10,Math.round(ot[e]+s.int(-15,15))),c=i.id??`orc_${t}_${s.int(100,999999)}`,A=i.portraitSeed??nt(c);return{id:c,name:i.name??lt(s),rank:e,level:i.level??a,merit:i.merit??o,traits:i.traits??At(s),personality:i.personality??dt(s),relationships:i.relationships??[],portraitSeed:A,status:i.status??"ALIVE",cycleJoined:i.cycleJoined??t,cycleDied:i.cycleDied,memories:i.memories??[]}}function te(s,e){const t=s.relationships.filter(i=>i.with!==e.with);return{...s,relationships:[...t,e]}}function M(s,e){return s.officers.find(t=>t.id===e)}function se(s,e){s.officers=s.officers.map(t=>t.id===e.id?e:t)}function Ce(s,e,t,i,n,r){if(e===t)return;const a=M(s,e),o=M(s,t);if(!a||!o)return;const c=i==="BLOOD_OATH"?n+Pe:void 0,A={with:o.id,type:i,sinceCycle:n,expiresAtCycle:c},h={with:a.id,type:i,sinceCycle:n,expiresAtCycle:c};let d=te(a,A),u=te(o,h);return d=E(d,{cycle:n,category:i==="BLOOD_OATH"?"BLOOD_OATH":"RELATIONSHIP",summary:`${i} mit ${u.name}`}),u=E(u,{cycle:n,category:i==="BLOOD_OATH"?"BLOOD_OATH":"RELATIONSHIP",summary:`${i} mit ${d.name}`}),se(s,d),se(s,u),tt(r,n,d,u,i)}function Ie(s,e,t){const i=[],n=s.officers.filter(a=>a.id!==e.id);if(n.length===0)return i;const r=t.chance(.4)?2:1;for(let a=0;a<r;a+=1){const o=t.pick(n),c=t.next();let A;if(c<.05?A="BLOOD_OATH":c<.2?A="RIVAL":c<.5?A="ALLY":c<.7&&(A="FRIEND"),!A)continue;const h=Ce(s,e.id,o.id,A,s.cycle,t);h&&i.push(h)}return i}function ht(s,e,t){const i=[],n=new Set;for(const r of s.officers)for(const a of r.relationships){if(a.type!=="BLOOD_OATH"||a.expiresAtCycle===void 0||a.expiresAtCycle>e)continue;const o=[r.id,a.with].sort().join(":");if(n.has(o))continue;n.add(o);const c=M(s,a.with);if(!c)continue;const A=(r.personality.loyalitaet+c.personality.loyalitaet)/2,h=(r.personality.stolz+c.personality.stolz)/2,d=(r.personality.gier+c.personality.gier)/2;let u="ALLY";d>A&&h>A&&(u="RIVAL");const f=Ce(s,r.id,c.id,u,e,t);f&&i.push(f)}return i}function ut(s,e,t){const i=new Set,n=[...e];for(;n.length>0;){const r=n.pop();if(!r)continue;const a=M(s,r);if(a)for(const o of a.relationships)o.type==="BLOOD_OATH"&&(o.expiresAtCycle!==void 0&&o.expiresAtCycle<=t||e.has(o.with)||i.has(o.with)||(i.add(o.with),n.push(o.with)))}return i}function gt(s,e){let t=0;for(const i of s.relationships){if(!e.find(a=>a.id===i.with))continue;const r=Ze[i.type];typeof r=="number"&&(t+=r)}return t}const be=.1,pt=.25,ft=.002,mt=.005,yt=.01,Et=.002,kt=.01,Bt=.03,St=.0015,Ct=5e-4,It=5e-4;function v(s,e=0,t=1){return Math.max(e,Math.min(t,s))}function ve(s,e){return s.relationships.some(t=>t.type==="BLOOD_OATH"&&t.with===e)}function Le(s){return{reignCycles:0,crownPressure:0,tributeRate:be+s.next()*.05,instability:"stable"}}function D(s,e,t){const i=e.fork(`crown:reset:${t.id}`);s.crown=Le(i)}function bt(s,e,t){const i=Math.max(0,t-be)*.03;i<=0||(s.officers=s.officers.map(n=>{if(n.id===e.id)return n;const r=v(n.personality.loyalitaet-i);return r===n.personality.loyalitaet?n:{...n,personality:{...n.personality,loyalitaet:r}}}))}function vt(s,e){const t={...e,personality:{...e.personality,tapferkeit:v(e.personality.tapferkeit-St),loyalitaet:v(e.personality.loyalitaet-Ct),stolz:v(e.personality.stolz+It)}};return s.officers=s.officers.map(i=>i.id===e.id?t:i),t}function Lt(s,e){const t=s.officers.filter(o=>o.id!==e.id&&o.status==="ALIVE"),i=[...t].sort((o,c)=>c.merit-o.merit).slice(0,8),n=i.length===0?.5:i.reduce((o,c)=>o+c.personality.loyalitaet,0)/i.length,r=t.reduce((o,c)=>c.relationships.some(h=>h.type==="RIVAL"&&h.with===e.id)?o+1:o,0);let a="stable";return n<.28||r>=5?a="crisis":(n<.35||r>=3)&&(a="shaky"),{instability:a,avgLoyalty:n,rivalCount:r}}function wt(s,e,t){let i=s.crownPressure;return e==="crisis"?i+=Bt:e==="shaky"?i+=kt:i+=Et,t&&(i=Math.max(0,i-mt)),v(i,0,1)}function Jt(s,e){const{gier:t,tapferkeit:i,loyalitaet:n}=s.personality,r=s.relationships.some(o=>o.type==="RIVAL"&&o.with===e)?.5:0,a=ve(s,e)?-.8:0;return i*.7+(1-n)*.9+t*.4+r+a+s.merit/140}function Rt(s,e){const{tapferkeit:t,loyalitaet:i,gier:n}=s.personality,r=s.relationships.some(o=>o.type==="RIVAL"&&o.with===e)?.6:0,a=ve(s,e)?-.5:0;return t*.8+(1-i)*.8+n*.3+s.merit/120+r+a}function ie(s,e){let t=s.personality.tapferkeit*1.1+s.personality.loyalitaet*.6+s.merit/120+s.level*.05+s.personality.stolz*.2;return e==="shaky"&&(t*=.92),e==="crisis"&&(t*=.85),t}function Xt(s,e){s.officers=s.officers.map(t=>e.get(t.id)??t)}function Qt(s,e,t,i,n){const r=s.officers.filter(g=>g.id!==t.id&&g.status==="ALIVE");if(r.length===0)return null;const a=r.map(g=>({officer:g,score:Jt(g,t.id)})).sort((g,m)=>m.score-g.score),o=a[0];if(!o)return null;let c=o.officer,A=a.slice(1);if(o.score<.3&&A.length>0){const g=A.find(m=>m.score>o.score+.1);g&&(c=g.officer,A=a.filter(m=>m.officer.id!==c.id))}let h=[];const d=A.filter(g=>g.score>.2);if(d.length>0&&(h=e.shuffle(d.map(g=>g.officer)).slice(0,Math.min(2,d.length))),h.length===0){const g=r.find(m=>m.id!==c.id);g&&(h=[g])}const u=[c,...h],f=u.reduce((g,m)=>g+Rt(m,t.id),0),p=i.instability;let y=f*(1+i.crownPressure*.6);p==="shaky"&&(y*=1.12),p==="crisis"&&(y*=1.35);const N=ie(t,p),xe=y<=0?.1:y/(y+N),j=e.fork(`crown:noise:${s.cycle}`).next()*.2-.1,V=v(xe+j+i.crownPressure*.1,.05,.95),S=e.fork(`crown:resolve:${s.cycle}`).next()<V,C=[];if(S){if(C.push(t.id),e.fork(`crown:spill:${s.cycle}`).next()>.6&&u.length>1){const g=e.fork(`crown:support:${s.cycle}`).pick(h);C.push(g.id)}}else{const g=e.fork(`crown:leader:${s.cycle}`).pick(u);if(C.push(g.id),e.fork(`crown:return:${s.cycle}`).next()>.7&&h.length>0){const m=e.fork(`crown:return-extra:${s.cycle}`).pick(h);C.includes(m.id)||C.push(m.id)}}const W=new Map,Me=S?"Thronschlacht: Thron erobert":"Thronschlacht gescheitert",He=S?"Thronschlacht verloren":"Thronschlacht abgewehrt";if(!S){const m=E({...t,merit:Math.max(0,t.merit+25)},{cycle:s.cycle,category:"WARCALL",summary:He,details:"Hof verteidigt"});W.set(m.id,m)}u.forEach((g,m)=>{if(C.includes(g.id))return;const Ge=S?m===0?35:22:m===0?-18:-12,ee=E({...g,merit:Math.max(0,g.merit+Ge)},{cycle:s.cycle,category:"WARCALL",summary:Me});W.set(ee.id,ee)}),Xt(s,W);const Ne=S?`${c.name} stürzt ${t.name}.`:`${t.name} hält ${c.name} nieder.`,$=X(e,s.cycle,`Thronschlacht! ${Ne}`);n.push($);const _={id:`throne_${s.cycle}_${Math.floor(e.next()*1e6)}`,cycleAnnounced:s.cycle,resolveOn:s.cycle,initiator:c.id,participants:[t.id,...u.map(g=>g.id)],location:"Thronsaal",baseDifficulty:.65,kind:"Thronschlacht",risk:.95,rewardHint:"Thronanspruch"};_.breakdown={base:V,traits:f,relationships:-ie(t,p),random:j,logistic:V};const Ve={warcall:_,success:S,casualties:C,feed:[$]},We=S?0:Math.max(.15,i.crownPressure*.45);return{resolution:Ve,casualties:C,pressure:We}}function Ft(s,e,t){const i=s.officers.find(h=>h.id===s.kingId);if(!i)return s.crown.instability="stable",s.crown.crownPressure=0,{casualties:[]};const n=s.crown,r=n.reignCycles;n.reignCycles+=1;const a=i.relationships.some(h=>h.type==="BLOOD_OATH");n.tributeRate=Math.min(pt,n.tributeRate+ft+(a?yt:0)),bt(s,i,n.tributeRate);let o=i;n.reignCycles>20&&(o=vt(s,i));const c=Lt(s,o);n.instability=c.instability,n.crownPressure=wt(n,n.instability,a),r<120&&n.reignCycles>=120&&(n.crownPressure=Math.max(n.crownPressure,.8),t.push(X(e,s.cycle,"Hofintrigen eskalieren – der Thron steht unter Dauerbelagerung.")));const A=Qt(s,e,o,n,t);return A?(n.crownPressure=A.pressure,{casualties:A.casualties,resolution:A.resolution}):{casualties:[]}}const Tt=["Schädelhügel","Schlackengrube","Pilzwald","Aschepass","Knochenarena","Teersümpfe"],Ut=["Feast","Hunt","Ambush","Duel","Monsterjagd","Diplomatie"],Ot=["Neue Waffenversorgung","Rufzuwachs","Sonderrechte im Hof","Seltene Trophäe","Strategischer Vorteil"];function xt(s){return 1/(1+Math.exp(-s))}function Mt(s,e){const t=[];for(const i of e.participants){const n=s.officers.find(r=>r.id===i);n&&t.push(n)}return t}function Ht(s,e,t,i){let n=.5-e.baseDifficulty;i==="UNGEFESTIGT"&&(n-=.2);const r=t.reduce((d,u)=>{const f=u.traits.reduce((p,y)=>p+(Ye[y]??0),0);return d+f},0),a=t.reduce((d,u)=>d+gt(u,t),0),o=r/Math.max(t.length,1),c=a/Math.max(t.length,1),A=s.fork(`warcall:${e.id}`).next()-.5,h=n+o+c+A;return{base:n,traits:o,relationships:c,random:A,logistic:h}}function Nt(s,e,t,i){return e.length===0?[]:t?[]:i==="UNGEFESTIGT"&&e.length>1?s.shuffle(e).slice(0,2).map(a=>a.id):[s.pick(e).id]}function Vt(s,e,t){let i=e?20:Math.max(-10,-s.merit*.1);return e&&t==="UNGEFESTIGT"&&(i/=2),{...s,merit:Math.max(0,s.merit+i)}}function Wt(s,e,t){const i=Mt(s,t),n=Ht(e,t,i,s.kingStatus),r=xt(n.logistic),a=e.fork(`resolve:${t.id}`).next()<=r;t.breakdown=n;const o=Nt(e.fork(`casualties:${t.id}`),i,a,s.kingStatus),c=et(e,s.cycle,t,a,n);for(const A of i){const h=E(Vt(A,a,s.kingStatus),{cycle:s.cycle,category:"WARCALL",summary:`${a?"Triumph":"Schmach"} bei ${t.location}`,details:`Chance ${(r*100).toFixed(1)}%`});s.officers=s.officers.map(d=>d.id===h.id?h:d)}return{warcall:t,success:a,casualties:o,feed:[c]}}function Gt(s,e,t){const i=e.filter(a=>a.status==="ALIVE"&&a.rank!=="König"),n=[],r=s.shuffle(i);for(let a=0;a<Math.min(t,r.length);a+=1)n.push(r[a]);return n}function we(s,e,t){const i=Gt(e,s.officers,3);if(i.length===0)return;const n=e.pick(i),r=e.pick(Ut),a=Math.min(1,Math.max(0,e.next()));return{id:`warcall_${t}_${e.int(100,999999)}`,cycleAnnounced:t,resolveOn:t+1,initiator:n.id,participants:i.map(o=>o.id),location:e.pick(Tt),baseDifficulty:e.next(),kind:r,risk:a,rewardHint:e.pick(Ot)}}function Kt(s,e){const t=s.warcalls.filter(r=>r.resolveOn<=s.cycle),i=s.warcalls.filter(r=>r.resolveOn>s.cycle),n=t.map(r=>Wt(s,e,r));return s.warcalls=i,n}function Je(s,e){s.warcalls=[...s.warcalls,...e]}function Re(s){const e={König:0,Spieler:0,Captain:0,Späher:0,Grunzer:0};return s.forEach(t=>{e[t.rank]+=1}),e}function zt(s,e){return s.map(t=>({...t,relationships:t.relationships.filter(i=>!e.has(i.with))}))}function Dt(s,e,t){const i=[],n=[];if(e.size===0)return{feed:i,deadIds:n};s.officers=zt(s.officers,e);for(const r of e){const a=s.officers.find(c=>c.id===r);if(!a)continue;const o=E({...a,status:"DEAD",cycleDied:s.cycle},{cycle:s.cycle,category:"DEATH",summary:`Gefallen in Zyklus ${s.cycle}`});i.push($e(t,s.cycle,o,"im Blutrausch")),n.push(o.id),s.graveyard=[{...o},...s.graveyard],s.officers=s.officers.filter(c=>c.id!==r)}return{feed:i,deadIds:n}}function Yt(s,e,t){if(s.officers.find(o=>o.id===s.kingId)||s.officers.length===0)return;const r={...[...s.officers].sort((o,c)=>c.merit-o.merit)[0],rank:"König"};s.kingId=r.id,s.kingStatus="UNGEFESTIGT",s.kingStatusExpires=s.cycle+qe,s.officers=s.officers.map(o=>o.id===r.id?r:o),D(s,e,r),t.push(X(e,s.cycle,`${r.name} besteigt als UNGEFESTIGT den Thron.`));const a=E(r,{cycle:s.cycle,category:"PROMOTION",summary:"Zum König erhoben"});s.officers=s.officers.map(o=>o.id===a.id?a:o)}function Zt(s,e,t){const i=[],n=[],r=Re(s.officers);return Object.keys(J).forEach(a=>{const o=J[a];for(;r[a]+n.filter(c=>c.rank===a).length<o;){let c=Se(e,a,t);c=E(c,{cycle:t,category:"SPAWN",summary:"Neu in der Horde"}),s.officers.push(c),n.push(c),i.push(je(e,t,c));const A=Ie(s,c,e);i.push(...A)}}),{spawns:n,feed:i}}function Pt(s,e){const t=[],i=[],n=Re(s.officers),r=[...s.officers].sort((a,o)=>o.merit-a.merit);for(const a of r){const o=De[a.rank];if(o.promoteAt!==void 0&&o.promoteTo&&a.merit>=o.promoteAt&&n[o.promoteTo]<J[o.promoteTo]){n[a.rank]-=1,n[o.promoteTo]+=1;const c=E({...a,rank:o.promoteTo},{cycle:s.cycle,category:"PROMOTION",summary:`Aufstieg zu ${o.promoteTo}`});s.officers=s.officers.map(A=>A.id===c.id?c:A),i.push({officerId:a.id,from:a.rank,to:o.promoteTo}),t.push(_e(e,s.cycle,c,o.promoteTo));continue}if(o.demoteBelow!==void 0&&o.demoteTo&&a.merit<o.demoteBelow){n[a.rank]-=1,n[o.demoteTo]+=1;const c=E({...a,rank:o.demoteTo},{cycle:s.cycle,category:"PROMOTION",summary:`Abstieg zu ${o.demoteTo}`});s.officers=s.officers.map(A=>A.id===c.id?c:A),i.push({officerId:a.id,from:a.rank,to:o.demoteTo}),t.push(X(e,s.cycle,`${c.name} wird zum ${o.demoteTo} zurückgestuft.`))}}return{promotions:i,feed:t}}function qt(s,e,t){s.kingStatus==="UNGEFESTIGT"&&s.cycle>=s.kingStatusExpires&&(s.kingStatus="GEFESTIGT",t.push(X(e,s.cycle,"Der König gilt wieder als GEFESTIGT.")))}function jt(s,e){const t=[],i=1+s.cycle%2;for(let n=0;n<i;n+=1){const r=we(s,e,s.cycle);r&&t.push(r)}return Je(s,t),t}function $t(s){return[...s].sort((e,t)=>e.priority===t.priority?e.id.localeCompare(t.id):t.priority-e.priority)}function _t(s,e){s.cycle+=1;const t=[];qt(s,e,t);const i=Ft(s,e,t),n=ht(s,s.cycle,e);t.push(...n);const r=[];i.resolution&&r.push(i.resolution);const a=Kt(s,e);r.push(...a),r.forEach(y=>{t.push(...y.feed)});const o=new Set(i.casualties);r.forEach(y=>{y.casualties.forEach(N=>o.add(N))}),ut(s,o,s.cycle).forEach(y=>o.add(y));const A=Dt(s,o,e);t.push(...A.feed),Yt(s,e,t);const{spawns:h,feed:d}=Zt(s,e,s.cycle);t.push(...d);const u=jt(s,e),f=Pt(s,e);t.push(...f.feed);const p=$t(t);return s.feed=[...s.feed,...p].slice(-120),{cycle:s.cycle,warcallsResolved:r,warcallsPlanned:u,deaths:A.deadIds,spawns:h,promotions:f.promotions,feed:p}}class Q{constructor(e){l(this,"state");let t=0;const i=typeof e=="number"?e.toString():e;for(let n=0;n<i.length;n+=1)t=(t<<5)-t+i.charCodeAt(n),t|=0;this.state=t||1831565813}next(){let e=this.state;return e^=e<<13,e^=e>>>17,e^=e<<5,this.state=e,(e>>>0)/4294967296}int(e,t){return Math.floor(this.next()*(t-e+1))+e}pick(e){if(e.length===0)throw new Error("Cannot pick from empty array");return e[Math.floor(this.next()*e.length)]}shuffle(e){const t=[...e];for(let i=t.length-1;i>0;i-=1){const n=Math.floor(this.next()*(i+1));[t[i],t[n]]=[t[n],t[i]]}return t}chance(e){return this.next()<e}fork(e){return new Q(`${e}:${this.state}`)}}function es(s,e=new Q(s)){const t={seed:s,cycle:0,officers:[],graveyard:[],warcalls:[],kingId:"",kingStatus:"GEFESTIGT",kingStatusExpires:0,feed:[],playerId:null,crown:Le(e)};Object.keys(J).forEach(n=>{const r=J[n];for(let a=0;a<r;a+=1){let o=Se(e,n,t.cycle);o=E(o,{cycle:0,category:"SPAWN",summary:"Teil des Ausgangszugs"}),t.officers.push(o),Ie(t,o,e)}});const i=t.officers.find(n=>n.rank==="König");if(i)t.kingId=i.id,D(t,e,i);else if(t.officers.length>0){t.kingId=t.officers[0].id;const n={...t.officers[0],rank:"König"};t.officers[0]=n,D(t,e,n)}return t}class H{constructor(){l(this,"listeners",new Map)}on(e,t){const i=this.listeners.get(e)??new Set;return i.add(t),this.listeners.set(e,i),()=>this.off(e,t)}off(e,t){const i=this.listeners.get(e);i&&(i.delete(t),i.size===0&&this.listeners.delete(e))}emit(e,t){const i=this.listeners.get(e);i&&i.forEach(n=>{n(t)})}}const ts=["Grunzer","Späher","Captain","Spieler","König"],ne=new Map(ts.map((s,e)=>[s,e]));function ss(s){let e=0;for(let i=0;i<s.length;i+=1)e=(e*31+s.charCodeAt(i))%9973;return(e%200-100)/1e3}function B(s,e){return s+ss(e)}function is(s,e){const t=new Map,i=n=>{t.has(n.id)||t.set(n.id,n)};return[...s.officers,...s.graveyard,...e.officers,...e.graveyard].forEach(i),t}function k(s,e){var t;return((t=s.get(e))==null?void 0:t.name)??e}function T(s,e){const t=new Map;return s.forEach(i=>{i.relationships.forEach(n=>{if(n.type!==e)return;const[r,a]=[i.id,n.with].sort(),o=`${r}:${a}:${e}`;t.has(o)||t.set(o,{ids:[r,a],relation:n})})}),t}function ns(s,e,t){return s?s.promotions.map(i=>{const n=e.get(i.officerId),r=(ne.get(i.to)??0)-(ne.get(i.from)??0),a=r>=0?"up":"down",c=Math.abs(r)*5,A=n?a==="up"?`${n.name} steigt zum ${i.to} auf`:`${n.name} fällt zum ${i.to}`:`${i.officerId} wechselt Rang`,h=`${i.from} → ${i.to}`,d=a==="up"?"⬆️":"⬇️";return{id:`rank:${i.officerId}:${i.to}`,icon:d,title:A,text:h,score:B(c,`rank:${i.officerId}:${i.to}`),cycle:t}}):[]}function rs(s,e,t){return s?s.deaths.map(i=>{const n=e.get(i),r=n?`${n.name} fällt im Zyklus ${s.cycle}`:`${i} fällt im Zyklus ${s.cycle}`,a=n?`Letzter Rang: ${n.rank}`:void 0;return{id:`death:${i}:${s.cycle}`,icon:"☠️",title:r,text:a,score:B(4,`death:${i}:${s.cycle}`),cycle:t}}):[]}function as(s,e){return s?s.spawns.map(t=>({id:`spawn:${t.id}:${s.cycle}`,icon:"✨",title:`${t.name} verstärkt die Horde als ${t.rank}`,text:`Trait: ${t.traits.join(", ")||"keine"}`,score:B(4,`spawn:${t.id}:${s.cycle}`),cycle:e})):[]}function os(s,e,t,i){const n=[],r=T(s.officers,"BLOOD_OATH"),a=T(e.officers,"BLOOD_OATH");a.forEach((A,h)=>{if(r.has(h))return;const[d,u]=A.ids;n.push({id:`blood:new:${h}`,icon:"🩸",title:`Blutschwur zwischen ${k(t,d)} und ${k(t,u)}`,text:A.relation.sinceCycle!==void 0?`Seit Zyklus ${A.relation.sinceCycle}`:void 0,score:B(3,`blood:new:${h}`),cycle:i})}),r.forEach((A,h)=>{if(a.has(h))return;const[d,u]=A.ids;n.push({id:`blood:end:${h}`,icon:"💔",title:`Blutschwur erloschen: ${k(t,d)} & ${k(t,u)}`,text:A.relation.expiresAtCycle!==void 0?`Abgelaufen in Zyklus ${A.relation.expiresAtCycle}`:"Bindung zerschnitten",score:B(3,`blood:end:${h}`),cycle:i})});const o=T(s.officers,"RIVAL"),c=T(e.officers,"RIVAL");return c.forEach((A,h)=>{if(o.has(h))return;const[d,u]=A.ids;n.push({id:`rival:new:${h}`,icon:"⚔️",title:`Rivalität entflammt: ${k(t,d)} vs. ${k(t,u)}`,text:A.relation.sinceCycle!==void 0?`Seit Zyklus ${A.relation.sinceCycle}`:void 0,score:B(2,`rival:new:${h}`),cycle:i})}),o.forEach((A,h)=>{if(c.has(h))return;const[d,u]=A.ids;n.push({id:`rival:end:${h}`,icon:"🤝",title:`Rivalität beigelegt: ${k(t,d)} & ${k(t,u)}`,text:"Konflikt beruhigt sich",score:B(2,`rival:end:${h}`),cycle:i})}),n}function cs(s,e,t){return s?s.warcallsResolved.flatMap(i=>{const n=i.warcall.participants.map(A=>e.get(A)).filter(A=>!!A),r=n.some(A=>A.rank==="Spieler"),a=n.map(A=>A.name).join(", "),o=`warcall:${i.warcall.id}:${s.cycle}`,c=k(e,i.warcall.initiator);if(r){const A=i.success?3:2,h=i.success?`${c} triumphiert bei ${i.warcall.location}`:`${c} scheitert bei ${i.warcall.location}`,d=i.success?"🏆":"⚠️",u=a?`Teilnehmer: ${a}`:void 0;return[{id:`${o}:player`,icon:d,title:h,text:u,score:B(A,`${o}:player`),cycle:t}]}return n.length>=4?[{id:`${o}:mass`,icon:"⚔️",title:`Große Schar bei ${i.warcall.location} (${n.length})`,text:a?`Teilnehmer: ${a}`:void 0,score:B(1,`${o}:mass`),cycle:t}]:[]}):[]}function ls(s,e,t){const i=is(s,e),n=[],r=(t==null?void 0:t.cycle)??e.cycle;return n.push(...ns(t,i,r)),n.push(...rs(t,i,r)),n.push(...as(t,r)),n.push(...os(s,e,i,r)),n.push(...cs(t,i,r)),n.filter((a,o,c)=>c.findIndex(A=>A.id===a.id)===o).sort((a,o)=>o.score-a.score||a.id.localeCompare(o.id))}function As(s){return{...s}}function re(s){return{...s,traits:[...s.traits],personality:{...s.personality},relationships:s.relationships.map(e=>({...e})),memories:s.memories.map(e=>({...e}))}}function ds(s){return{...s,participants:[...s.participants],breakdown:s.breakdown?{...s.breakdown}:void 0}}function hs(s){return{...s,officers:s.officers.map(re),graveyard:s.graveyard.map(re),warcalls:s.warcalls.map(ds),feed:s.feed.map(As),crown:{...s.crown}}}class us{constructor(e){l(this,"events",new H);l(this,"rng");l(this,"state");this.rng=new Q(e),this.state=es(e,this.rng)}getState(){return this.state}tick(){const e=hs(this.state),t=_t(this.state,this.rng);this.events.emit("cycle:completed",t),t.warcallsResolved.forEach(n=>this.events.emit("warcall:resolved",n)),t.feed.length>0&&this.events.emit("feed:appended",t.feed),this.events.emit("graveyard:changed",this.state.graveyard),this.events.emit("state:changed",this.state);const i=ls(e,this.state,t);return this.events.emit("cycle:digest",{cycle:this.state.cycle,highlights:i}),t.warcallsPlanned.forEach(n=>this.events.emit("warcall:planned",n)),t}scheduleWarcall(){const e=we(this.state,this.rng,this.state.cycle);if(e)return Je(this.state,[e]),this.events.emit("warcall:planned",e),this.events.emit("state:changed",this.state),e}}function ae(s){return s.mode==="spectate"?{mode:"spectate",playerId:null}:s}class gs extends H{constructor(){super(...arguments);l(this,"state",{mode:"spectate",playerId:null})}getState(){return this.state}setMode(t,i=this.state.playerId){const n=ae({mode:t,playerId:i});this.state.mode===n.mode&&this.state.playerId===n.playerId||(this.state=n,this.emit("mode:changed",this.state))}setPlayer(t){const i=ae({mode:this.state.mode,playerId:t});this.state.playerId===i.playerId&&this.state.mode===i.mode||(this.state=i,this.emit("mode:changed",this.state))}}function ps(s,e){return s.resolveOn<=e?"event":s.resolveOn-e===1?"travel":"prep"}function Xe(s){return s.phase==="resolution"?"done":s.phase==="prep"&&(!s.participants||s.participants.length===0)?"pending":"active"}function fs(s,e){return{...s,participants:[...s.participants],phase:ps(s,e)}}function oe(s,e){return s.warcalls.map(t=>fs(t,s.cycle)).filter(t=>Xe(t)===e)}const Qe={MODAL:900,FEED:700};class ms{constructor(e,t,i){this.x=e,this.y=t,this.radius=i}contains(e){const t=e.x-this.x,i=e.y-this.y;return t*t+i*i<=this.radius*this.radius}}class Fe{constructor(e={x:0,y:0}){l(this,"children",[]);l(this,"depth",0);l(this,"scrollFactor",1);l(this,"hitArea");l(this,"visible",!0);this.position=e}add(e){this.children.push(e)}setDepth(e){return this.depth=e,this}setScrollFactor(e){return this.scrollFactor=e,this}setCircleHitArea(e){return this.hitArea=new ms(this.position.x,this.position.y,e),this}hitTest(e){return this.hitArea?this.hitArea.contains(e):!1}}function ys(s,e){const t=[];let i=s;for(;i.length>e;)t.push(i.slice(0,e)),i=i.slice(e);return i.length>0&&t.push(i),t}function Es(s,e){const t=s.split(/\s+/),i=[];let n="";for(const r of t){const a=r.length>e?ys(r,e):[r];for(const o of a){if(n.length===0){n=o;continue}(n+" "+o).length<=e?n=`${n} ${o}`:(i.push(n),n=o)}}return n.length>0&&i.push(n),i}class ks extends Fe{constructor(t=420,i=18,n=6){super({x:0,y:0});l(this,"width");l(this,"lineHeight");l(this,"lineSpacing");l(this,"layout",[]);this.width=t,this.lineHeight=i,this.lineSpacing=n,this.setDepth(Qe.FEED)}render(t){const i=[],n=Math.max(10,Math.floor(this.width/8));let r=0;return t.forEach(a=>{const o=Es(a.text,n);o.forEach((c,A)=>{i.push({text:c,y:r}),A<o.length-1&&(r+=this.lineHeight+this.lineSpacing)}),r+=this.lineHeight+this.lineSpacing}),this.layout=i,i}getLines(){return this.layout}}class ce extends Fe{constructor(t,i={}){super({x:0,y:0});l(this,"entries");l(this,"rowHeight");l(this,"viewHeight");l(this,"offset",0);l(this,"isOpen",!0);this.entries=t.map(n=>({id:n.id,name:n.name,cycle:n.cycleDied??0})),this.rowHeight=i.rowHeight??36,this.viewHeight=i.viewHeight??180,this.setDepth(Qe.MODAL)}get size(){return this.entries.length}get scrollOffset(){return this.offset}get maxScroll(){return Math.max(0,this.entries.length*this.rowHeight-this.viewHeight)}scroll(t){this.offset=Math.min(this.maxScroll,Math.max(0,this.offset+t))}onWheel(t){this.scroll(t)}close(){this.isOpen=!1}listVisible(){const t=Math.floor(this.offset/this.rowHeight),i=Math.ceil(this.viewHeight/this.rowHeight);return this.entries.slice(t,t+i)}}const le={duration:220,easing:"cubic-bezier(.2,.8,.2,1)",fill:"both"};function Bs(s){return s.getBoundingClientRect()}function Ss(s,e,t=le){const i=e??s.getBoundingClientRect(),n=s.getBoundingClientRect(),r=i.left-n.left,a=i.top-n.top,o=i.width===0?1:i.width/Math.max(n.width,1),c=i.height===0?1:i.height/Math.max(n.height,1);if(Math.abs(r)<.5&&Math.abs(a)<.5&&Math.abs(1-o)<.01)return;const A=[{transformOrigin:"top left",transform:`translate(${r}px, ${a}px) scale(${o}, ${c})`,opacity:.9},{transformOrigin:"top left",transform:"translate(0, 0) scale(1, 1)",opacity:1}];return(d=>{if(typeof d.animate!="function"){d.style.transition="transform 0.22s cubic-bezier(.2,.8,.2,1)",d.style.transform=`translate(${r}px, ${a}px)`,requestAnimationFrame(()=>{d.style.transform="translate(0, 0)"});return}return d.animate(A,{...le,...t})})(s)}const Ae=["gier","tapferkeit","loyalitaet","stolz"],Cs={gier:"Gier",tapferkeit:"Tapferkeit",loyalitaet:"Loyalität",stolz:"Stolz"},Is=["ALLY","FRIEND","RIVAL","BLOOD_OATH"],bs={ALLY:"ALLY",FRIEND:"FRIEND",RIVAL:"RIVAL",BLOOD_OATH:"BLOODOATH"},vs={ALLY:"ally",FRIEND:"friend",RIVAL:"rival",BLOOD_OATH:"blood"},Ls={König:"king",Spieler:"player",Captain:"captain",Späher:"scout",Grunzer:"grunt"};class ws{constructor(e,t){l(this,"element");l(this,"options");l(this,"officer");l(this,"portrait");l(this,"nameEl");l(this,"levelBadge");l(this,"rankBadge");l(this,"meritBadge");l(this,"cycleBadge");l(this,"traitContainer");l(this,"footer");l(this,"statBars",new Map);l(this,"statValues",new Map);l(this,"previousRect",null);this.options=t,this.officer=e,this.element=document.createElement("article"),this.element.className="officer-card",this.element.tabIndex=0,this.element.dataset.officerId=e.id;const i=document.createElement("div");i.className="officer-card__portrait",this.portrait=document.createElement("img"),this.portrait.className="officer-card__portrait-img",this.portrait.alt=e.name,this.portrait.src=x(e.portraitSeed),i.appendChild(this.portrait);const n=document.createElement("div");n.className="officer-card__content";const r=document.createElement("header");r.className="officer-card__header";const a=document.createElement("div");a.className="officer-card__title-row",this.nameEl=document.createElement("h3"),this.nameEl.textContent=e.name,this.levelBadge=document.createElement("span"),this.levelBadge.className="officer-card__level",a.appendChild(this.nameEl),a.appendChild(this.levelBadge);const o=document.createElement("div");o.className="officer-card__meta",this.rankBadge=document.createElement("span"),this.rankBadge.className="officer-card__role",this.meritBadge=document.createElement("span"),this.meritBadge.className="officer-card__badge",this.cycleBadge=document.createElement("span"),this.cycleBadge.className="officer-card__badge officer-card__badge--muted",o.append(this.rankBadge,this.meritBadge,this.cycleBadge),r.append(a,o),n.appendChild(r),this.traitContainer=document.createElement("div"),this.traitContainer.className="officer-card__traits",n.appendChild(this.traitContainer);const c=document.createElement("div");c.className="officer-card__stats",Ae.forEach(A=>{const h=document.createElement("div");h.className="officer-card__stat";const d=document.createElement("span");d.className="officer-card__stat-label",d.textContent=Cs[A];const u=document.createElement("div");u.className="officer-card__stat-bar";const f=document.createElement("div");f.className="officer-card__stat-fill",u.appendChild(f);const p=document.createElement("span");p.className="officer-card__stat-value",h.append(d,u,p),c.appendChild(h),this.statBars.set(A,f),this.statValues.set(A,p)}),n.appendChild(c),this.footer=document.createElement("footer"),this.footer.className="officer-card__footer",n.appendChild(this.footer),this.element.append(i,n),this.attachTooltipListeners(),this.update(e)}attachTooltipListeners(){const{tooltip:e}=this.options;this.element.addEventListener("mouseenter",()=>{e.show(this.element,this.officer)}),this.element.addEventListener("mouseleave",()=>{e.scheduleHideFromTarget()}),this.element.addEventListener("focus",()=>{e.show(this.element,this.officer)}),this.element.addEventListener("blur",()=>e.hide()),this.element.addEventListener("keydown",t=>{var i,n;t.key==="Enter"&&(t.preventDefault(),(n=(i=this.options).onOpenDetails)==null||n.call(i,this.officer))})}setRank(e){const t=Ls[e];this.element.dataset.rank=t,this.rankBadge.textContent=e}updateMeta(e){this.nameEl.textContent=e.name,this.levelBadge.textContent=`Lv. ${e.level}`,this.meritBadge.textContent=`Merit ${Math.round(e.merit)}`,this.cycleBadge.textContent=`Zyklus ${e.cycleJoined}`}updateTraits(e){if(this.traitContainer.innerHTML="",e.traits.length===0){const t=document.createElement("span");t.className="officer-card__trait officer-card__trait--muted",t.textContent="Keine Merkmale",this.traitContainer.appendChild(t);return}e.traits.forEach(t=>{const i=document.createElement("span");i.className="officer-card__trait",i.textContent=t,this.traitContainer.appendChild(i)})}updateStats(e,t){Ae.forEach(i=>{const n=e.personality[i],r=t.personality[i],a=this.statBars.get(i),o=this.statValues.get(i);if(!a||!o)return;const c=`${Math.round(n*100)}%`;a.style.width?(a.classList.add("is-animating"),requestAnimationFrame(()=>{a.style.width=c;const h=()=>a.classList.remove("is-animating");a.addEventListener("transitionend",h,{once:!0})})):a.style.width=c;const A=n-r;o.textContent=n.toFixed(2),o.dataset.delta=A!==0?A>0?`+${A.toFixed(2)}`:A.toFixed(2):"",o.classList.remove("is-up","is-down"),A>.01?o.classList.add("is-up"):A<-.01&&o.classList.add("is-down")})}updateRelationships(e){const t=new Map;if(e.relationships.forEach(i=>{t.set(i.type,(t.get(i.type)??0)+1)}),this.footer.innerHTML="",Is.forEach(i=>{const n=t.get(i);if(!n)return;const r=document.createElement("span");r.className=`officer-card__status officer-card__status--${vs[i]}`,r.textContent=`${bs[i]} · ${n}`,this.footer.appendChild(r)}),this.footer.childElementCount===0){const i=document.createElement("span");i.className="officer-card__status officer-card__status--empty",i.textContent="Keine Bindungen",this.footer.appendChild(i)}}captureBounds(){this.previousRect=Bs(this.element)}playFlip(){this.previousRect&&(Ss(this.element,this.previousRect),this.previousRect=null)}update(e){const t=this.officer;this.officer=e,this.element.dataset.officerId=e.id,this.setRank(e.rank),this.portrait.src=x(e.portraitSeed),this.portrait.alt=e.name,this.updateMeta(e),this.updateTraits(e),this.updateRelationships(e),this.updateStats(e,t)}}const Js={ALLY:"🤝",FRIEND:"🍻",RIVAL:"⚔️",BLOOD_OATH:"🩸"};function Rs(s){switch(s.type){case"ALLY":return"Allianz";case"FRIEND":return"Freundschaft";case"RIVAL":return"Rivalität";case"BLOOD_OATH":return"Blutschwur";default:return s.type}}function U(s){return s.toFixed(2)}function Xs(s){var i;const{personality:e}=s;switch((i=Object.entries(e).sort((n,r)=>r[1]-n[1])[0])==null?void 0:i[0]){case"tapferkeit":return"Frontkrieger";case"gier":return"Plünderer";case"loyalitaet":return"Bannerträger";case"stolz":return"Championsgeist";default:return"Unbekannt"}}function Qs(s){switch(s.rank){case"König":return"Herr der Horde";case"Spieler":return"Kriegsrat";case"Captain":return"Klingenführer";case"Späher":return"Schattenauge";default:return"Grubenläufer"}}class Fs{constructor(e={}){l(this,"root");l(this,"hideTimer",null);l(this,"currentTarget",null);l(this,"options");this.options=e,this.root=document.createElement("div"),this.root.className="officer-tooltip",this.root.setAttribute("role","tooltip"),this.root.setAttribute("aria-hidden","true"),this.root.addEventListener("mouseenter",()=>this.cancelHide()),this.root.addEventListener("mouseleave",()=>this.scheduleHide(120)),document.body.appendChild(this.root)}cancelHide(){this.hideTimer!==null&&(window.clearTimeout(this.hideTimer),this.hideTimer=null)}scheduleHide(e=80){this.cancelHide(),this.hideTimer=window.setTimeout(()=>this.hide(),e)}resolveRelations(e){return e.relationships.map(t=>{var i,n;return{...t,name:(n=(i=this.options).resolveName)==null?void 0:n.call(i,t.with)}})}buildMemories(e){return!e.memories||e.memories.length===0?'<p class="tooltip-empty">Keine Erinnerungen verzeichnet.</p>':`<ul class="tooltip-memories">${e.memories.slice(-3).reverse().map(i=>`<li><span>${i.cycle}</span><p>${i.summary}${i.details?` <small>${i.details}</small>`:""}</p></li>`).join("")}</ul>`}render(e){var o,c,A;const t=Xs(e),i=Qs(e),n=this.resolveRelations(e),r=n.length>0?`<ul class="tooltip-relations">${n.map(h=>{const d=h.expiresAtCycle?`bis Zyklus ${h.expiresAtCycle}`:"stabil";return`<li><span class="icon">${Js[h.type]}</span><span><strong>${Rs(h)}</strong>${h.name?` mit ${h.name}`:""}<small>${d}</small></span></li>`}).join("")}</ul>`:'<p class="tooltip-empty">Keine bekannten Bande.</p>',a=e.traits.length>0?e.traits.map(h=>`<span class="tooltip-badge">${h}</span>`).join(""):'<span class="tooltip-badge tooltip-badge--muted">Kein Merkmal</span>';this.root.innerHTML=`
      <header>
        <div class="tooltip-heading">
          <h2>${e.name}</h2>
          <span class="sub">Lv ${e.level} • ${i}</span>
          <span class="archetype">${t}</span>
        </div>
        <div class="tooltip-traits">${a}</div>
      </header>
      <section class="tooltip-stats">
        <dl>
          <div><dt>Gier</dt><dd>${U(e.personality.gier)}</dd></div>
          <div><dt>Tapferkeit</dt><dd>${U(e.personality.tapferkeit)}</dd></div>
          <div><dt>Loyalität</dt><dd>${U(e.personality.loyalitaet)}</dd></div>
          <div><dt>Stolz</dt><dd>${U(e.personality.stolz)}</dd></div>
        </dl>
      </section>
      <section class="tooltip-relations-section">
        <h3>Beziehungen</h3>
        ${r}
      </section>
      <section class="tooltip-mem-section">
        <h3>Erinnerungen</h3>
        ${this.buildMemories(e)}
      </section>
      <footer>
        <button type="button" data-action="invite">Warcall einladen</button>
        <button type="button" data-action="rival">Als Rival markieren</button>
        <button type="button" data-action="details">Details öffnen</button>
      </footer>
    `,(o=this.root.querySelector('[data-action="invite"]'))==null||o.addEventListener("click",()=>{var h,d;return(d=(h=this.options).onInvite)==null?void 0:d.call(h,e)}),(c=this.root.querySelector('[data-action="rival"]'))==null||c.addEventListener("click",()=>{var h,d;return(d=(h=this.options).onMarkRival)==null?void 0:d.call(h,e)}),(A=this.root.querySelector('[data-action="details"]'))==null||A.addEventListener("click",()=>{var h,d;return(d=(h=this.options).onOpenDetails)==null?void 0:d.call(h,e)})}show(e,t){this.cancelHide(),this.render(t),this.currentTarget=e;const i=`tooltip-${t.id}`;this.root.id=i,e.setAttribute("aria-describedby",i);const{top:n,left:r,width:a}=e.getBoundingClientRect(),o=this.root.getBoundingClientRect(),c=n+window.scrollY-o.height-12,A=r+window.scrollX+a/2-o.width/2;this.root.style.left=`${Math.max(12,A)}px`,this.root.style.top=`${Math.max(12,c)}px`,this.root.setAttribute("aria-hidden","false"),this.root.classList.add("is-visible"),typeof this.root.animate=="function"&&this.root.animate([{opacity:0,transform:"translateY(4px)"},{opacity:1,transform:"translateY(0)"}],{duration:12,easing:"linear"})}hide(){var e;this.cancelHide(),(e=this.currentTarget)==null||e.removeAttribute("aria-describedby"),typeof this.root.animate=="function"?this.root.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(4px)"}],{duration:80,easing:"ease-out"}).addEventListener("finish",()=>{this.root.classList.remove("is-visible"),this.root.setAttribute("aria-hidden","true"),this.currentTarget=null}):(this.root.classList.remove("is-visible"),this.root.setAttribute("aria-hidden","true"),this.currentTarget=null)}scheduleHideFromTarget(){this.scheduleHide()}}function O(s,e,t,i){const n=s.createSVGPoint();n.x=t,n.y=i;const r=n.matrixTransform(e);return{x:r.x,y:r.y}}function de(s,e){const t=e.getBoundingClientRect(),i=s.getScreenCTM();if(!i){const A={tl:{x:t.left,y:t.top},tr:{x:t.right,y:t.top},bl:{x:t.left,y:t.bottom},br:{x:t.right,y:t.bottom}};return{...A,center:{x:(A.tl.x+A.br.x)/2,y:(A.tl.y+A.br.y)/2}}}const n=i.inverse(),r=O(s,n,t.left,t.top),a=O(s,n,t.right,t.top),o=O(s,n,t.left,t.bottom),c=O(s,n,t.right,t.bottom);return{tl:r,tr:a,bl:o,br:c,center:{x:(r.x+c.x)/2,y:(r.y+c.y)/2}}}function Ts(s,e,t){const i=de(s,e),n=de(s,t),r=i.center.x<n.center.x,a=r?{x:i.tr.x,y:(i.tr.y+i.br.y)/2}:{x:i.tl.x,y:(i.tl.y+i.bl.y)/2},o=r?{x:n.tl.x,y:(n.tl.y+n.bl.y)/2}:{x:n.tr.x,y:(n.tr.y+n.br.y)/2};return{A:a,B:o}}function Us(s,e,t){return Ts(s,e,t)}function Os(s,e){const t=e.x-s.x,i=e.y-s.y,n={x:s.x+t*.25,y:s.y+i*.15},r={x:s.x+t*.75,y:s.y+i*.85};return`M ${s.x} ${s.y} C ${n.x} ${n.y}, ${r.x} ${r.y}, ${e.x} ${e.y}`}const Te={ally:"Allianz",friend:"Freundschaft",rival:"Rivalität",bloodoath:"Blutschwur",hierarchy:"Befehlskette"},xs={ally:"var(--line-ally)",friend:"var(--line-friend)",rival:"var(--line-rival)",bloodoath:"var(--line-blood)",hierarchy:"var(--line-hierarchy)"},Ms={bloodoath:"6 4"},he={bloodoath:5,rival:4,ally:3,friend:2,hierarchy:1},ue=6,ge=2,pe=12,fe=typeof window<"u"&&"IntersectionObserver"in window;function Hs(s){switch(s){case"ALLY":return"ally";case"FRIEND":return"friend";case"RIVAL":return"rival";case"BLOOD_OATH":default:return"bloodoath"}}function Ns(s,e){return s.fromId===e?s.toId:s.fromId}function me(s){if(s)for(let e=s.memories.length-1;e>=0;e-=1){const t=s.memories[e];if(t.category==="RELATIONSHIP")return{summary:t.summary,cycle:t.cycle}}}function Vs(s,e){const t=[],i=me(s);i&&t.push(i);const n=me(e);if(n&&t.push(n),t.length!==0)return t.sort((r,a)=>a.cycle-r.cycle),t[0]}function Ws(s){return[...s].sort((e,t)=>{const i=he[t.type]-he[e.type];if(i!==0)return i;const n=(t.strength??0)-(e.strength??0);if(n!==0)return n;const r=e.sinceCycle??0;return(t.sinceCycle??0)-r})}function Gs(s,e,t){const i=s.get(e);if(!i)return[];const n=t.activeTypes,r=new Map,a=new Set;let o=0;for(const c of i)if(n.has(c.type)&&(r.set(c.id,c),a.add(Ns(c,e)),o+=1,o>=t.density))break;return t.includeSecondOrder&&a.forEach(c=>{const A=s.get(c);if(!A)return;let h=0;for(const d of A)if(n.has(d.type)&&!r.has(d.id)&&(r.set(d.id,d),h+=1,h>=t.density))break}),Array.from(r.values())}function Ks(s,e){const t=[],i=new Map(s.map(o=>[o.id,o])),n=new Set;s.forEach(o=>{o.relationships.forEach(c=>{const A=i.get(c.with),h=[o.id,c.with,c.type].sort().join(":");if(n.has(h))return;n.add(h);const d=Hs(c.type),u=Vs(o,A),f=c.type==="BLOOD_OATH"?1:c.type==="RIVAL"?.75:c.type==="ALLY"?.65:.5;t.push({id:h,fromId:o.id,toId:c.with,type:d,strength:f,sinceCycle:c.sinceCycle,expiresAtCycle:c.expiresAtCycle,lastMemory:u})})});const r=["König","Spieler","Captain","Späher","Grunzer"],a=new Map(r.map(o=>[o,[]]));return s.forEach(o=>{const c=a.get(o.rank);c==null||c.push(o)}),r.forEach((o,c)=>{if(c===0)return;const A=a.get(o)??[],h=r.slice(0,c);A.forEach(d=>{for(const u of h){const f=a.get(u)??[];if(f.length===0)continue;const p=f[0];t.push({id:`hierarchy:${d.id}->${p.id}`,fromId:d.id,toId:p.id,type:"hierarchy",strength:.3,sinceCycle:e});break}})}),t}class zs{constructor(){l(this,"el");this.el=document.createElement("div"),this.el.className="relations-tooltip hidden",document.body.appendChild(this.el)}show(e){const{edge:t,anchor:i,from:n,to:r,currentCycle:a}=e;this.el.innerHTML="";const o=document.createElement("header"),c=document.createElement("span");c.className="relations-tooltip__label",c.dataset.type=t.type,c.textContent=Te[t.type];const A=document.createElement("span");A.className="relations-tooltip__names",A.textContent=`${(n==null?void 0:n.name)??t.fromId} ↔ ${(r==null?void 0:r.name)??t.toId}`,o.append(c,A);const h=document.createElement("ul"),d=document.createElement("li");if(d.textContent=`Stärke ${(t.strength??0).toFixed(2)}`,h.appendChild(d),t.sinceCycle!==void 0){const p=document.createElement("li"),y=Math.max(0,a-t.sinceCycle);p.textContent=`Dauer ${y} Zyklen`,h.appendChild(p)}if(t.expiresAtCycle!==void 0){const p=document.createElement("li");p.textContent=`Gültig bis Zyklus ${t.expiresAtCycle}`,h.appendChild(p)}if(t.lastMemory){const p=document.createElement("li");p.textContent=`Letzte Erinnerung (Zyklus ${t.lastMemory.cycle}): ${t.lastMemory.summary}`,h.appendChild(p)}this.el.append(o,h);const u=i.left+i.width/2+window.scrollX,f=i.top+i.height+12+window.scrollY;this.el.style.left=`${u}px`,this.el.style.top=`${f}px`,this.el.classList.remove("hidden")}hide(){this.el.classList.add("hidden")}}class Ds{constructor(e){l(this,"options");l(this,"container");l(this,"svg");l(this,"toolbar");l(this,"toggleButtons",new Map);l(this,"slider");l(this,"sliderValue");l(this,"checkbox");l(this,"tooltip",new zs);l(this,"adjacency",new Map);l(this,"observedCards",new Map);l(this,"visibleCards",new Set);l(this,"activeTypes",new Set(["ally","friend","rival","bloodoath","hierarchy"]));l(this,"lensMask",new Set(["ally","friend","rival","bloodoath","hierarchy"]));l(this,"focusId",null);l(this,"hoverId",null);l(this,"pinnedId",null);l(this,"density",ue);l(this,"includeSecondOrder",!1);l(this,"currentCycle",0);l(this,"pendingFrame",null);l(this,"resizeObserver");l(this,"mutationObserver");l(this,"cardObserver");l(this,"enabled",!0);l(this,"legendVisible",!0);this.options=e,this.container=document.createElement("div"),this.container.className="relations-overlay",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("width","100%"),this.svg.setAttribute("height","100%"),this.svg.setAttribute("fill","none"),this.container.appendChild(this.svg),this.toolbar=this.buildToolbar(),this.container.appendChild(this.toolbar),e.host.appendChild(this.container),this.resizeObserver=new ResizeObserver(()=>this.requestRender()),this.resizeObserver.observe(e.host),this.mutationObserver=new MutationObserver(()=>{this.syncObservedCards(),this.requestRender()}),this.mutationObserver.observe(e.host,{childList:!0,subtree:!0,attributes:!0}),e.host.addEventListener("pointerover",t=>this.handlePointerOver(t)),e.host.addEventListener("pointerleave",t=>this.handlePointerLeave(t)),e.host.addEventListener("focusin",t=>this.handleFocusIn(t)),e.host.addEventListener("focusout",t=>this.handleFocusOut(t)),e.host.addEventListener("scroll",()=>this.requestRender(),{passive:!0}),window.addEventListener("resize",()=>this.requestRender()),window.addEventListener("scroll",()=>this.requestRender(),{passive:!0}),window.addEventListener("keydown",t=>this.handleKeydown(t)),fe?this.cardObserver=new IntersectionObserver(t=>{t.forEach(i=>{const r=i.target.dataset.officerId;r&&(i.isIntersecting?this.visibleCards.add(r):this.visibleCards.delete(r))}),this.requestRender()},{root:e.host,threshold:.05}):this.cardObserver=null,this.syncToolbarState()}setEdges(e,t){this.currentCycle=t,this.adjacency.clear(),e.forEach(i=>{const n=this.adjacency.get(i.fromId)??[];n.push(i),this.adjacency.set(i.fromId,n);const r=this.adjacency.get(i.toId)??[];r.push(i),this.adjacency.set(i.toId,r)}),this.adjacency.forEach((i,n)=>{this.adjacency.set(n,Ws(i))}),this.focusId&&!this.adjacency.has(this.focusId)&&(this.focusId=null,this.pinnedId=null),this.syncObservedCards(),this.requestRender()}setVisible(e){this.container.classList.toggle("is-hidden",!e),e||this.tooltip.hide()}setLensMask(e){const t=new Set(e);if(t.size===this.lensMask.size){let i=!1;if(this.lensMask.forEach(n=>{t.has(n)||(i=!0)}),!i)return}this.lensMask=t,this.requestRender()}setLensEnabled(e){if(this.enabled!==e){if(this.enabled=e,this.container.classList.toggle("is-disabled",!e),!e){this.tooltip.hide(),this.svg.replaceChildren();return}this.requestRender()}}isLensEnabled(){return this.enabled}setLegendVisible(e){this.legendVisible!==e&&(this.legendVisible=e,this.toolbar.classList.toggle("is-hidden",!e))}isLegendVisible(){return this.legendVisible}refresh(){this.requestRender()}buildToolbar(){const e=document.createElement("div");e.className="relations-overlay__toolbar";const t=document.createElement("span");t.className="relations-overlay__title",t.textContent="Beziehungs-Lens",e.appendChild(t);const i=document.createElement("div");i.className="relations-overlay__toggles",["ally","friend","rival","bloodoath","hierarchy"].forEach(c=>{const A=document.createElement("button");A.type="button",A.textContent=Te[c],A.className="relations-overlay__toggle is-active",A.setAttribute("aria-pressed","true"),A.addEventListener("click",()=>this.toggleType(c)),i.appendChild(A),this.toggleButtons.set(c,A)}),e.appendChild(i);const n=document.createElement("label");n.className="relations-overlay__slider";const r=document.createElement("span");r.textContent="Kantenlimit",this.sliderValue=document.createElement("span"),this.sliderValue.className="relations-overlay__slider-value",this.sliderValue.textContent=`${this.density}`,this.slider=document.createElement("input"),this.slider.type="range",this.slider.min=ge.toString(),this.slider.max=pe.toString(),this.slider.value=ue.toString(),this.slider.addEventListener("input",()=>this.setDensity(Number(this.slider.value))),n.append(r,this.slider,this.sliderValue),e.appendChild(n);const a=document.createElement("label");a.className="relations-overlay__checkbox",this.checkbox=document.createElement("input"),this.checkbox.type="checkbox",this.checkbox.addEventListener("change",()=>this.setSecondOrder(this.checkbox.checked));const o=document.createElement("span");return o.textContent="+1 Tiefe",a.append(this.checkbox,o),e.appendChild(a),e}setDensity(e){const t=Math.min(pe,Math.max(ge,Math.round(e)));this.density!==t&&(this.density=t,this.slider.value=`${t}`,this.sliderValue.textContent=`${t}`,this.requestRender())}toggleType(e){this.activeTypes.has(e)&&this.activeTypes.size===1||(this.activeTypes.has(e)?this.activeTypes.delete(e):this.activeTypes.add(e),this.syncToolbarState(),this.requestRender())}setSecondOrder(e){this.includeSecondOrder!==e&&(this.includeSecondOrder=e,this.checkbox.checked=e,this.requestRender())}syncToolbarState(){this.toggleButtons.forEach((e,t)=>{const i=this.activeTypes.has(t);e.classList.toggle("is-active",i),e.setAttribute("aria-pressed",i?"true":"false")}),this.sliderValue.textContent=`${this.density}`,this.checkbox.checked=this.includeSecondOrder}handlePointerOver(e){if(!this.enabled)return;const t=e.target,i=t==null?void 0:t.closest(".officer-card");if(!i)return;const n=i.dataset.officerId;if(n){if(this.hoverId=n,e.shiftKey&&(this.pinnedId=n),this.pinnedId&&this.pinnedId!==n){e.shiftKey&&(this.pinnedId=n,this.applyFocus(n));return}this.applyFocus(n)}}handlePointerLeave(e){const t=e.relatedTarget;t&&this.options.host.contains(t)||(this.hoverId=null,this.pinnedId||this.applyFocus(null))}handleFocusIn(e){if(!this.enabled)return;const t=e.target,i=t==null?void 0:t.closest(".officer-card");if(!i)return;const n=i.dataset.officerId;n&&this.applyFocus(n)}handleFocusOut(e){const t=e.relatedTarget;t&&this.options.host.contains(t)||this.pinnedId||this.applyFocus(null)}handleKeydown(e){e.key==="Escape"&&(this.pinnedId=null,this.applyFocus(this.hoverId),this.tooltip.hide())}applyFocus(e){this.focusId!==e&&(this.focusId=e,this.requestRender())}computeEdgesForFocus(){if(!this.focusId)return[];const e=new Set;return this.activeTypes.forEach(t=>{this.lensMask.has(t)&&e.add(t)}),e.size===0?[]:Gs(this.adjacency,this.focusId,{activeTypes:e,density:this.density,includeSecondOrder:this.includeSecondOrder})}requestRender(){this.pendingFrame===null&&(this.pendingFrame=window.requestAnimationFrame(()=>{this.pendingFrame=null,this.render()}))}render(){if(!this.focusId||!this.enabled){this.svg.replaceChildren(),this.tooltip.hide();return}const e=this.options.host,t=Math.max(e.scrollWidth,e.clientWidth),i=Math.max(e.scrollHeight,e.clientHeight);this.svg.setAttribute("viewBox",`0 0 ${t} ${i}`),this.svg.setAttribute("width",`${t}`),this.svg.setAttribute("height",`${i}`);const n=this.computeEdgesForFocus(),r=document.createDocumentFragment();n.forEach(a=>{const o=this.options.getOfficerElement(a.fromId),c=this.options.getOfficerElement(a.toId);if(!o||!c||fe&&(!this.visibleCards.has(a.fromId)||!this.visibleCards.has(a.toId)))return;const{A,B:h}=Us(this.svg,o,c),d=document.createElementNS("http://www.w3.org/2000/svg","path");d.classList.add("relations-overlay__edge"),d.setAttribute("d",Os(A,h)),d.setAttribute("stroke",xs[a.type]),d.setAttribute("stroke-linecap","round"),d.setAttribute("pointer-events","visibleStroke"),d.dataset.type=a.type;const u=Ms[a.type];u&&d.setAttribute("stroke-dasharray",u),d.dataset.edgeId=a.id,d.addEventListener("mouseenter",()=>{d.classList.add("is-hovered");const f=d.getBoundingClientRect(),p=this.options.getOfficerData(a.fromId),y=this.options.getOfficerData(a.toId);this.tooltip.show({edge:a,anchor:f,from:p,to:y,currentCycle:this.currentCycle})}),d.addEventListener("mouseleave",()=>{d.classList.remove("is-hovered"),this.tooltip.hide()}),r.appendChild(d)}),this.svg.replaceChildren(r),n.length===0&&this.tooltip.hide()}syncObservedCards(){const e=this.cardObserver;if(!e){this.visibleCards.clear(),this.adjacency.forEach((n,r)=>this.visibleCards.add(r));return}const t=new Set(this.adjacency.keys()),i=[];this.observedCards.forEach((n,r)=>{(!t.has(r)||!document.body.contains(n))&&(e.unobserve(n),this.visibleCards.delete(r),i.push(r))}),i.forEach(n=>this.observedCards.delete(n)),t.forEach(n=>{if(this.observedCards.has(n))return;const r=this.options.getOfficerElement(n);r&&(this.observedCards.set(n,r),e.observe(r))})}}class Ys{constructor(e){l(this,"element");l(this,"tabs",new Map);l(this,"lists",new Map);l(this,"activeStatus","active");l(this,"options");this.options=e,this.element=document.createElement("aside"),this.element.className="warcalls-dock",this.element.innerHTML=`
      <header>
        <h2>Warcalls</h2>
        <nav class="warcalls-tabs" role="tablist"></nav>
      </header>
      <div class="warcalls-content"></div>
    `}renderTabs(e){const t=this.element.querySelector(".warcalls-tabs");t&&(t.innerHTML="",this.tabs.clear(),e.forEach(i=>{const n=document.createElement("button");n.type="button",n.setAttribute("role","tab"),n.classList.add("warcalls-tab"),n.textContent=`${i.label} (${i.entries.length})`,n.dataset.status=i.status,i.status===this.activeStatus&&n.classList.add("is-active"),n.setAttribute("aria-selected",i.status===this.activeStatus?"true":"false"),n.addEventListener("click",()=>this.activateTab(i.status)),this.tabs.set(i.status,n),t.appendChild(n)}))}renderLists(e){const t=this.element.querySelector(".warcalls-content");t&&(t.innerHTML="",this.lists.clear(),e.forEach(i=>{const n=document.createElement("div");n.className="warcall-list",n.dataset.status=i.status,i.status!==this.activeStatus&&(n.hidden=!0),i.entries.length===0?n.innerHTML='<p class="warcall-empty">Keine Einträge.</p>':i.entries.forEach(r=>{n.appendChild(this.renderEntry(r))}),t.appendChild(n),this.lists.set(i.status,n)}))}renderEntry(e){const t=document.createElement("article");t.className="warcall-item",t.tabIndex=0;const i=this.resolvePhaseLabel(e),n=Math.max(0,e.plan.resolveOn-e.currentCycle);t.innerHTML=`
      <header>
        <span class="warcall-kind">${e.plan.kind}</span>
        <span class="warcall-phase">${i}</span>
      </header>
      <p class="warcall-meta">${e.plan.location} • Zyklus ${e.plan.cycleAnnounced}</p>
      <p class="warcall-risk">Risiko ${(e.plan.risk*100).toFixed(0)}% • ${e.plan.rewardHint??"Unbekannte Beute"}</p>
      <div class="warcall-avatars">${this.renderParticipants(e.participants)}</div>
      <footer>
        <span class="warcall-timer">Noch ${n} Zyklen</span>
        <button type="button">Details</button>
      </footer>
    `;const r=t.querySelector("button");return r==null||r.addEventListener("click",()=>this.options.onOpenDetails(e)),t.addEventListener("keydown",a=>{a.key==="Enter"&&(a.preventDefault(),this.options.onOpenDetails(e))}),t.addEventListener("click",()=>this.options.onOpenDetails(e)),t}renderParticipants(e){return e.map(t=>{const i=x(t.portraitSeed);return`<span class="warcall-avatar" title="${t.name}"><img src="${i}" alt="${t.name}"></span>`}).join("")}resolvePhaseLabel(e){if(e.resolution)return e.resolution.success?"Abgeschlossen: Triumph":"Abgeschlossen: Scheitern";switch(e.phase){case"prep":return"Vorbereitung";case"travel":return"Anreise";case"event":return"Ereignis";case"resolution":return"Auflösung";default:return e.phase}}syncActiveStatus(e){var t,i;this.tabs.forEach((n,r)=>{const a=r===this.activeStatus;n.classList.toggle("is-active",a),n.setAttribute("aria-selected",a?"true":"false")}),this.lists.forEach((n,r)=>{n.hidden=r!==this.activeStatus}),e&&((i=(t=this.options).onTabChange)==null||i.call(t,this.activeStatus))}activateTab(e){this.activeStatus=e,this.syncActiveStatus(!0)}update(e,t){var i;t&&(this.activeStatus=t),e.some(n=>n.status===this.activeStatus)||(this.activeStatus=((i=e[0])==null?void 0:i.status)??this.activeStatus),this.renderTabs(e),this.renderLists(e),this.syncActiveStatus(!1)}}const Zs=[{key:"prep",label:"Vorbereitung"},{key:"travel",label:"Anreise"},{key:"event",label:"Konflikt"},{key:"resolution",label:"Auflösung"}];function Ps(s,e){var t;return s.id===e.plan.initiator?"Initiator":(t=e.resolution)!=null&&t.casualties.includes(s.id)?"Gefallen":"Teilnehmer"}class qs{constructor(e={}){l(this,"root");l(this,"options");l(this,"current",null);l(this,"mode","spectate");var t,i;this.options=e,this.root=document.createElement("div"),this.root.className="warcall-modal hidden",this.root.innerHTML=`
      <div class="warcall-modal__backdrop"></div>
      <div class="warcall-modal__dialog" role="dialog" aria-modal="true">
        <button class="warcall-modal__close" aria-label="Schließen">×</button>
        <div class="warcall-modal__content"></div>
      </div>
    `,document.body.appendChild(this.root),(t=this.root.querySelector(".warcall-modal__backdrop"))==null||t.addEventListener("click",()=>this.close()),(i=this.root.querySelector(".warcall-modal__close"))==null||i.addEventListener("click",()=>this.close())}render(e){var h;const t=this.root.querySelector(".warcall-modal__content");if(!t)return;this.current=e;const i=e.phase;t.innerHTML=`
      <header>
        <h3>${e.plan.kind}</h3>
        <p>${e.plan.location} • Ausgerufen in Zyklus ${e.plan.cycleAnnounced}</p>
        <p>Risiko ${(e.plan.risk*100).toFixed(0)}% — ${e.plan.rewardHint??"Unbekannte Belohnung"}</p>
      </header>
      <section class="warcall-timeline">
        ${Zs.map(d=>`<div class="timeline-step ${d.key===i?"is-active":""}">
            <span>${d.label}</span>
          </div>`).join("")}
      </section>
      <section class="warcall-participants">
        <h4>Teilnehmer</h4>
        <div class="warcall-participants__list">
          ${e.participants.map(d=>`<article>
                <img src="${x(d.portraitSeed)}" alt="${d.name}">
                <div>
                  <strong>${d.name}</strong>
                  <span>${Ps(d,e)}</span>
                </div>
              </article>`).join("")}
        </div>
      </section>
      <section class="warcall-log">
        <h4>Log</h4>
        ${((h=e.resolution)==null?void 0:h.feed.map(d=>`<p>${d.text}</p>`).join(""))??"<p>Keine Ergebnisse bisher.</p>"}
      </section>
      <footer>
        <button type="button" data-action="join">Beitreten</button>
        <button type="button" data-action="redirect">Umlenken</button>
        <button type="button" data-action="sabotage">Sabotieren</button>
      </footer>
    `;const n=t.querySelector('[data-action="join"]'),r=t.querySelector('[data-action="redirect"]'),a=t.querySelector('[data-action="sabotage"]');n==null||n.addEventListener("click",()=>{var d,u;return(u=(d=this.options).onJoin)==null?void 0:u.call(d,e)}),r==null||r.addEventListener("click",()=>{var d,u;return(u=(d=this.options).onRedirect)==null?void 0:u.call(d,e)}),a==null||a.addEventListener("click",()=>{var d,u;return(u=(d=this.options).onSabotage)==null?void 0:u.call(d,e)});const o=[n,r,a],c=this.mode!=="player",A=!!e.resolution;o.forEach(d=>{if(!d)return;const u=c||A;d.disabled=u,c?(d.title="Im Spectate-Mode nicht verfügbar.",d.classList.add("is-disabled")):(d.classList.remove("is-disabled"),d.removeAttribute("title"))})}open(e){this.current=e,this.render(e),this.root.classList.remove("hidden")}close(){var e,t;this.root.classList.add("hidden"),this.current=null,(t=(e=this.options).onClose)==null||t.call(e)}setMode(e){this.mode!==e&&(this.mode=e,this.current&&this.render(this.current))}}class js{constructor(){l(this,"root");var e,t;this.root=document.createElement("div"),this.root.className="help-overlay hidden",this.root.innerHTML=`
      <div class="help-overlay__backdrop"></div>
      <div class="help-overlay__panel" role="dialog" aria-modal="true">
        <header>
          <h2>Hilfe & Übersicht</h2>
          <button type="button" class="help-overlay__close" aria-label="Schließen">×</button>
        </header>
        <section>
          <h3>Hotkeys</h3>
          <ul>
            <li><kbd>E</kbd> Cycle vorwärts</li>
            <li><kbd>R</kbd> Soft-Reset</li>
            <li><kbd>N</kbd> Neuer Warcall</li>
            <li><kbd>H</kbd> Hilfe anzeigen</li>
          </ul>
        </section>
        <section>
          <h3>Beziehungsarten</h3>
          <ul class="help-overlay__relations">
            <li><span class="dot rival"></span> Rivalität (rot)</li>
            <li><span class="dot ally"></span> Allianz / Freundschaft (blau)</li>
            <li><span class="dot blood"></span> Blutschwur (violett, gepunktet)</li>
            <li><span class="dot hierarchy"></span> Befehlskette (grau)</li>
          </ul>
        </section>
        <section>
          <h3>Tooltips</h3>
          <p>Fokussiere oder hovere Offiziere, um Details, Beziehungen und Schnellaktionen zu sehen.</p>
        </section>
      </div>
    `,document.body.appendChild(this.root),(e=this.root.querySelector(".help-overlay__backdrop"))==null||e.addEventListener("click",()=>this.close()),(t=this.root.querySelector(".help-overlay__close"))==null||t.addEventListener("click",()=>this.close())}open(){this.root.classList.remove("hidden")}close(){this.root.classList.add("hidden")}toggle(){this.root.classList.contains("hidden")?this.open():this.close()}}class $s{constructor(){l(this,"root");l(this,"hideTimer",null);this.root=document.createElement("div"),this.root.className="ui-toast hidden",document.body.appendChild(this.root)}show(e,t=2200){this.root.textContent=e,this.root.classList.remove("hidden"),this.root.classList.add("is-visible"),this.hideTimer!==null&&window.clearTimeout(this.hideTimer),this.hideTimer=window.setTimeout(()=>this.hide(),t)}hide(){this.root.classList.remove("is-visible"),this.hideTimer=window.setTimeout(()=>{this.root.classList.add("hidden")},200)}}class _s{constructor(){l(this,"root");this.root=document.createElement("div"),this.root.className="cycle-sweep hidden",this.root.innerHTML='<div class="cycle-sweep__wave"></div>',document.body.appendChild(this.root)}play(e){this.root.dataset.cycle=`${e.cycle}`,this.root.classList.remove("hidden"),this.root.classList.add("is-active"),setTimeout(()=>{this.root.classList.remove("is-active"),this.root.classList.add("hidden")},420)}}class ei{constructor(e){l(this,"root");l(this,"card");l(this,"icon");l(this,"title");l(this,"text");l(this,"cycle");l(this,"advanceBtn");l(this,"skipBtn");l(this,"logBtn");l(this,"current",null);l(this,"hideTimer",null);this.options=e,this.root=document.createElement("div"),this.root.className="highlight-portal hidden";const t=document.createElement("div");t.className="highlight-portal__backdrop",this.root.appendChild(t),this.card=document.createElement("article"),this.card.className="highlight-portal__card",this.icon=document.createElement("div"),this.icon.className="highlight-portal__icon";const i=document.createElement("div");i.className="highlight-portal__body";const n=document.createElement("header");n.className="highlight-portal__header",this.cycle=document.createElement("span"),this.cycle.className="highlight-portal__cycle",n.appendChild(this.cycle),this.title=document.createElement("h3"),this.title.className="highlight-portal__title",this.text=document.createElement("p"),this.text.className="highlight-portal__text";const r=document.createElement("div");r.className="highlight-portal__actions",this.advanceBtn=document.createElement("button"),this.advanceBtn.type="button",this.advanceBtn.className="highlight-portal__button highlight-portal__button--primary",this.advanceBtn.textContent="Weiter",this.advanceBtn.addEventListener("click",()=>this.options.onAdvance()),this.skipBtn=document.createElement("button"),this.skipBtn.type="button",this.skipBtn.className="highlight-portal__button",this.skipBtn.textContent="Alle überspringen",this.skipBtn.addEventListener("click",()=>this.options.onSkip()),this.logBtn=document.createElement("button"),this.logBtn.type="button",this.logBtn.className="highlight-portal__button",this.logBtn.textContent="Im Log ansehen",this.logBtn.addEventListener("click",()=>this.options.onViewLog()),r.append(this.advanceBtn,this.skipBtn,this.logBtn),i.append(n,this.title,this.text,r),this.card.append(this.icon,i),this.root.appendChild(this.card),this.handleKeydown=this.handleKeydown.bind(this)}attach(e=document.body){e.appendChild(this.root)}update(e){if(e!==this.current){if(!e){this.current=null,this.hide();return}this.current=e,this.renderHighlight(e),this.show()}}renderHighlight(e){this.icon.textContent=e.icon,this.title.textContent=e.title,this.cycle.textContent=`Zyklus ${e.cycle}`,e.text?(this.text.textContent=e.text,this.text.classList.remove("is-hidden")):(this.text.textContent="",this.text.classList.add("is-hidden"))}show(){this.hideTimer!==null&&(window.clearTimeout(this.hideTimer),this.hideTimer=null),this.root.classList.remove("hidden"),this.root.classList.add("is-visible"),this.root.classList.remove("is-leaving"),window.addEventListener("keydown",this.handleKeydown)}hide(){this.root.classList.contains("hidden")||(this.root.classList.add("is-leaving"),window.removeEventListener("keydown",this.handleKeydown),this.hideTimer=window.setTimeout(()=>{this.root.classList.add("hidden"),this.root.classList.remove("is-visible"),this.root.classList.remove("is-leaving"),this.hideTimer=null},200))}handleKeydown(e){if(!this.current)return;const t=e.key.toLowerCase();if(t==="escape"){e.preventDefault(),this.options.onSkip();return}(t==="enter"||t===" "||t==="spacebar")&&(e.preventDefault(),this.options.onAdvance())}}const R=new Map;let G=null;function Ue(s){return s.trim().toLowerCase()}function ti(s){if(!(s instanceof HTMLElement))return!1;const e=s.tagName;return e==="INPUT"||e==="TEXTAREA"?!0:s.isContentEditable}function si(s){if(s.defaultPrevented)return;const e=Ue(s.key),t=R.get(e);!t||t.size===0||!Array.from(t).some(n=>n.options.allowWhileTyping)&&ti(s.target)||(t.forEach(n=>{n.handler(s),n.options.once&&t.delete(n),n.triggered=!0}),t.size===0&&R.delete(e),s.defaultPrevented||s.preventDefault())}function ii(){if(G||typeof window>"u")return;const s=e=>si(e);window.addEventListener("keydown",s,{passive:!1}),G=()=>{window.removeEventListener("keydown",s),G=null}}function I(s,e,t={}){const i=Ue(s),n=R.get(i)??new Set,r={handler:e,options:t};return n.add(r),R.set(i,n),()=>n.delete(r)}function ni(s,e){return I(s,e,{once:!0})}function ri(){const s=[];return R.forEach((e,t)=>{e.forEach(i=>{s.push({key:t,description:i.options.description})})}),s}const ai={spectate:"Spectate",player:"Player"};class oi{constructor(e){l(this,"element");l(this,"options");l(this,"selection","spectate");l(this,"startButton");l(this,"spectateButton");l(this,"playerButton");this.options=e,this.element=document.createElement("div"),this.element.className="mode-gate",this.element.innerHTML=`
      <div class="mode-gate__backdrop"></div>
      <section class="mode-gate__panel" role="dialog" aria-modal="true">
        <header>
          <h2>Wähle deinen Modus</h2>
          <p>Erkunde die Nemesis-Hierarchie als Beobachter. Der Spieler-Modus folgt später.</p>
        </header>
        <div class="mode-gate__options">
          <button type="button" data-mode="spectate" class="is-active">
            <span class="mode-gate__mode">Spectate</span>
            <span class="mode-gate__hint">Standardmodus • Keine Spielerfigur</span>
          </button>
          <button type="button" data-mode="player" class="is-disabled" disabled>
            <span class="mode-gate__mode">Player</span>
            <span class="mode-gate__hint">Coming soon</span>
          </button>
        </div>
        <footer>
          <button type="button" data-action="start">Los geht's</button>
        </footer>
      </section>
    `,document.body.appendChild(this.element),this.element.setAttribute("aria-hidden","true"),this.startButton=this.element.querySelector('[data-action="start"]'),this.spectateButton=this.element.querySelector('button[data-mode="spectate"]'),this.playerButton=this.element.querySelector('button[data-mode="player"]'),this.registerEvents(),this.close()}open(e="spectate"){this.selection=this.resolveInitial(e),this.syncSelection(),this.element.classList.add("is-open"),this.element.removeAttribute("hidden"),this.element.removeAttribute("aria-hidden"),requestAnimationFrame(()=>this.startButton.focus())}close(){this.element.classList.remove("is-open"),this.element.setAttribute("hidden","true"),this.element.setAttribute("aria-hidden","true")}resolveInitial(e){return e==="player"?"spectate":e}registerEvents(){var e;(e=this.element.querySelector(".mode-gate__backdrop"))==null||e.addEventListener("click",()=>this.close()),this.startButton.addEventListener("click",()=>{this.options.onConfirm(this.selection),this.close()}),this.spectateButton.addEventListener("click",()=>{this.selection="spectate",this.syncSelection()}),this.playerButton.addEventListener("click",()=>{}),this.playerButton.title="Im Spectate-Mode noch nicht verfügbar.",this.element.addEventListener("keydown",t=>{t.key==="Escape"&&(t.preventDefault(),this.close())})}syncSelection(){this.spectateButton.classList.toggle("is-active",this.selection==="spectate");const e=this.selection==="player";this.playerButton.classList.toggle("is-active",e),this.startButton.textContent=this.selection==="spectate"?"Spectate starten":`${ai[this.selection]} starten`}}const K=6,ci=12;function li(s,e){var i;const t=e.length;return{id:`overflow:${s}`,icon:"➕",title:`+${t} weitere`,text:t===1?"Weitere Meldung im Log.":"Weitere Meldungen im Log.",score:((i=e[e.length-1])==null?void 0:i.score)??0,cycle:s}}class Ai extends H{constructor(){super(...arguments);l(this,"state",{queue:[],showing:null,history:[]})}getState(){return this.state}enqueue(t,i){if(i.length===0)return;const n=[...i].sort((h,d)=>d.score-h.score||h.id.localeCompare(d.id)),r=n.slice(0,K);n.length>K&&r.push(li(t,n.slice(K)));const a=[...this.state.queue,...r],o=[n,...this.state.history].slice(0,ci);let c=this.state.showing,A=a;!c&&A.length>0&&([c,...A]=A),this.updateState({showing:c,queue:A,history:o})}advance(){if(this.state.queue.length===0){this.updateState({...this.state,showing:null});return}const[t,...i]=this.state.queue;this.updateState({...this.state,showing:t,queue:i})}clear(){this.updateState({...this.state,queue:[],showing:null})}updateState(t){const i="queue"in t&&"showing"in t&&"history"in t?t:{...this.state,...t};this.state=i,this.emit("change",this.state)}}const di=["ally","friend","rival","bloodoath","hierarchy"];function z(s,e){return s.relationships.some(t=>t.type===e)}function Oe(s,e,t){return s.relationships.some(i=>i.type===e&&i.with===t)}function hi(s){const e=new Map;s.forEach(i=>{const n=e.get(i.rank)??[];n.push(i),e.set(i.rank,n)});const t=new Set;return e.forEach(i=>{if(i.length===0)return;const n=[...i].sort((a,o)=>o.merit-a.merit),r=Math.max(1,Math.floor(n.length*.25));n.slice(0,r).forEach(a=>t.add(a.id))}),t}function ui(s,e){if(s.length===0)return new Set;const t=[...s].map(a=>a.merit).sort((a,o)=>a-o),i=Math.max(0,Math.floor(t.length*.7)),n=t[i]??t[t.length-1]??0,r=s.filter(a=>Oe(a,"RIVAL",e)&&a.personality.loyalitaet<.35&&a.merit>=n);return new Set(r.map(a=>a.id))}function gi(s,e,t){const i=e.promotionCandidates?hi(s.officers):null,n=e.coupRisk?ui(s.officers,s.kingId):null;return t.filter(r=>!(e.loyalToKing&&r.personality.loyalitaet<.7&&r.id!==s.kingId||e.rivalsOfKing&&r.id!==s.kingId&&!Oe(r,"RIVAL",s.kingId)||e.friendships&&!z(r,"FRIEND")||e.rivalries&&!z(r,"RIVAL")||e.bloodoaths&&!z(r,"BLOOD_OATH")||e.lowBravery&&r.personality.tapferkeit>.3||e.highGreed&&r.personality.gier<.7||e.promotionCandidates&&!((i==null?void 0:i.has(r.id))??!1)||e.coupRisk&&!((n==null?void 0:n.has(r.id))??!1)))}function pi(s,e,t){return t==="random"?new Q(`${s.seed}:filters:${s.cycle}`).shuffle(e):[...e].sort((i,n)=>{switch(t){case"level":return n.level-i.level;case"loyalToKing":return n.personality.loyalitaet-i.personality.loyalitaet;case"relations":return n.relationships.length-i.relationships.length;case"recentChange":{const r=a=>{for(let o=a.memories.length-1;o>=0;o-=1)if(a.memories[o].category==="WARCALL")return a.memories[o].cycle;return-1};return r(n)-r(i)}case"merit":default:return n.merit-i.merit}})}function fi(s,e){const{officers:t,kingId:i}=s,n=gi(s,e,t),r=pi(s,n,e.sortBy),a=t.find(o=>o.id===i);return a&&!r.some(o=>o.id===a.id)?[a,...r]:r}function Y(s){const e=new Set;let t=!1;return s.friendships&&(e.add("friend"),t=!0),s.rivalries&&(e.add("rival"),t=!0),s.rivalsOfKing&&(e.add("rival"),t=!0),s.bloodoaths&&(e.add("bloodoath"),t=!0),s.coupRisk&&(e.add("rival"),t=!0),(s.loyalToKing||s.promotionCandidates)&&(e.add("ally"),e.add("hierarchy"),t=!0),t||di.forEach(i=>e.add(i)),e}function mi(s,e,t){const i=new Set(s.map(r=>r.id)),n=Y(t);return e.filter(r=>n.has(r.type)&&i.has(r.fromId)&&i.has(r.toId))}const ye={sortBy:"merit"};class yi extends H{constructor(){super(...arguments);l(this,"state",{...ye})}getState(){return this.state}toggle(t){const i={...this.state,[t]:!this.state[t]};i[t]===!1&&delete i[t],this.state=i,this.emit("change",this.state)}setSort(t){this.state.sortBy!==t&&(this.state={...this.state,sortBy:t},this.emit("change",this.state))}clear(){this.state={...ye},this.emit("change",this.state)}}const Ee=["König","Spieler","Captain","Späher","Grunzer"],Ei=8,ke=[{key:"loyalToKing",label:"Loyal zum König"},{key:"rivalsOfKing",label:"Rivale des Königs"},{key:"friendships",label:"Freundschaften"},{key:"rivalries",label:"Rivalitäten"},{key:"bloodoaths",label:"Blutschwüre aktiv"},{key:"lowBravery",label:"Niedriger Mut"},{key:"highGreed",label:"Hohe Gier"},{key:"promotionCandidates",label:"Aufstiegskandidaten"},{key:"coupRisk",label:"Putschgefahr"}],ki=[{value:"merit",label:"Verdienst"},{value:"level",label:"Level"},{value:"loyalToKing",label:"Loyalität zum König"},{value:"relations",label:"Beziehungen aktiv"},{value:"recentChange",label:"Letzte Warcall-Änderung"},{value:"random",label:"Zufall"}];class Bi{constructor(e,t){l(this,"root",null);l(this,"ranksEl",null);l(this,"feedEl",null);l(this,"warcallsHost",null);l(this,"modeIndicator",null);l(this,"warcallButton",null);l(this,"cards",new Map);l(this,"rankContainers",new Map);l(this,"filters",new yi);l(this,"filterButtons",new Map);l(this,"officerIndex",new Map);l(this,"feed",new ks);l(this,"graveyard",null);l(this,"relations",null);l(this,"resizeObserver",null);l(this,"lastEdges",[]);l(this,"tooltip");l(this,"warcallDock");l(this,"warcallModal");l(this,"helpOverlay",new js);l(this,"toast",new $s);l(this,"cycleSweep",new _s);l(this,"highlights",new Ai);l(this,"highlightPortal");l(this,"filterBarEl",null);l(this,"rankListEl",null);l(this,"sortSelect",null);l(this,"completedWarcalls",[]);l(this,"warcallTab","active");l(this,"hotkeyHints",new Set);l(this,"modeGate");l(this,"modeState");l(this,"digestHistoryEl",null);l(this,"feedBodyEl",null);this.store=e,this.modeStore=t;const i=e.getState();this.modeState=t.getState(),this.syncOfficerIndex(i.officers),this.graveyard=new ce(i.graveyard),this.tooltip=new Fs({resolveName:n=>{var r;return(r=this.officerIndex.get(n))==null?void 0:r.name},onInvite:n=>this.toast.show(`${n.name} fordert Verstärkung an.`),onMarkRival:n=>this.toast.show(`${n.name} wurde als Rivale vorgemerkt.`),onOpenDetails:n=>this.toast.show(`Details für ${n.name} folgen in einem späteren Build.`)}),this.warcallDock=new Ys({onOpenDetails:n=>this.openWarcall(n),onTabChange:n=>{this.warcallTab=n}}),this.warcallModal=new qs({onClose:()=>document.body.classList.remove("modal-open"),onJoin:()=>this.toast.show("Kommando: Teilnahme derzeit nur simuliert."),onRedirect:()=>this.toast.show("Umlenkung wird protokolliert."),onSabotage:()=>this.toast.show("Sabotage ist noch in Arbeit.")}),this.warcallModal.setMode(this.modeState.mode),this.highlightPortal=new ei({onAdvance:()=>this.highlights.advance(),onSkip:()=>this.highlights.clear(),onViewLog:()=>this.focusDigestHistory()}),this.filters.on("change",()=>{this.syncFilterControls(),this.ranksEl&&(this.ranksEl.scrollTop=0),this.renderOfficers(this.store.getState())}),this.highlights.on("change",n=>{this.highlightPortal.update(n.showing),this.renderDigestHistory(n.history)}),this.renderDigestHistory(this.highlights.getState().history),this.modeGate=new oi({onConfirm:n=>this.handleModeConfirm(n)}),this.modeStore.on("mode:changed",n=>this.handleModeChange(n)),this.syncModeUI(),e.events.on("feed:appended",n=>{this.feed.render(n),this.renderFeed()}),e.events.on("graveyard:changed",n=>{this.graveyard=new ce(n),this.updateGraveyardButton()}),e.events.on("state:changed",n=>{this.syncOfficerIndex(n.officers),this.renderOfficers(n),this.updateWarcalls(n.warcalls,n.cycle)}),e.events.on("cycle:completed",n=>{this.cycleSweep.play(n),this.highlightHierarchyChanges(n.promotions),n.feed.length>0&&(this.feed.render(n.feed),this.renderFeed())}),e.events.on("cycle:digest",({cycle:n,highlights:r})=>{this.highlights.enqueue(n,r)}),e.events.on("warcall:planned",()=>{const n=this.store.getState();this.updateWarcalls(n.warcalls,n.cycle),this.toast.show("Neuer Warcall eingetragen.")}),e.events.on("warcall:resolved",n=>{this.onWarcallResolved(n)})}handleModeConfirm(e){this.modeStore.setMode(e)}handleModeChange(e){this.modeState=e,this.syncModeUI(),this.updateModeUrl(e.mode)}updateModeUrl(e){if(typeof window>"u")return;const t=new URL(window.location.href);t.searchParams.set("mode",e);const i=`${t.pathname}${t.search}${t.hash}`;window.history.replaceState({},"",i)}syncModeUI(){this.applyModeToControls(),this.syncModeIndicator(),this.syncModeAttributes(),this.warcallModal.setMode(this.modeState.mode)}applyModeToControls(){if(!this.warcallButton)return;const e=this.modeState.mode!=="player";this.warcallButton.disabled=e,e?this.warcallButton.setAttribute("title","Im Spectate-Mode nicht verfügbar."):this.warcallButton.removeAttribute("title")}syncModeIndicator(){if(!this.modeIndicator)return;const e=this.modeState.mode==="player"?"Player-Modus (Beta)":"Spectate-Modus";this.modeIndicator.textContent=e}syncModeAttributes(){this.root&&(this.root.dataset.mode=this.modeState.mode),typeof document<"u"&&document.body&&(document.body.dataset.gameMode=this.modeState.mode)}mount(e){var n;this.root=e,e.innerHTML="";const t=document.createElement("div");t.className="nemesis-app",t.innerHTML=`
      <header class="hud">
        <div class="brand">NEMESIS HOF</div>
        <div class="hud-mode" data-mode-indicator>Spectate-Modus</div>
        <div class="hud-controls">
          <button data-action="cycle">E — Cycle</button>
          <button data-action="reset">R — Neu</button>
          <button data-action="warcall">N — Warcall</button>
          <button data-action="help">Hilfe</button>
          <button data-action="grave">Friedhof (0)</button>
        </div>
      </header>
      <main class="layout">
        <aside class="dock" id="warcalls"></aside>
        <section class="ranks" id="ranks"></section>
        <aside class="feed" id="feed"></aside>
      </main>
    `,e.appendChild(t),this.highlightPortal.attach(document.body),this.ranksEl=t.querySelector("#ranks"),this.ranksEl&&this.prepareRankView(),this.feedEl=t.querySelector("#feed"),this.warcallsHost=t.querySelector("#warcalls"),this.modeIndicator=t.querySelector("[data-mode-indicator]"),this.feedEl&&(this.feedEl.innerHTML="",this.digestHistoryEl=document.createElement("div"),this.digestHistoryEl.className="digest-history",this.feedBodyEl=document.createElement("div"),this.feedBodyEl.className="feed-body",this.feedEl.append(this.digestHistoryEl,this.feedBodyEl),this.renderDigestHistory(this.highlights.getState().history)),(n=this.warcallsHost)==null||n.appendChild(this.warcallDock.element),this.registerUIEvents(t),this.syncModeUI(),this.ranksEl&&(this.relations=new Ds({host:this.ranksEl,getOfficerElement:r=>{var a;return(a=this.cards.get(r))==null?void 0:a.element},getOfficerData:r=>this.officerIndex.get(r)}),this.relations.setLensMask(Y(this.filters.getState())),this.resizeObserver=new ResizeObserver(()=>{var r;(r=this.relations)==null||r.refresh()}),this.resizeObserver.observe(this.ranksEl),this.ranksEl.addEventListener("scroll",()=>{var r;(r=this.relations)==null||r.refresh()}));const i=this.store.getState();this.renderOfficers(i),this.renderFeed(),this.updateWarcalls(i.warcalls,i.cycle),this.updateGraveyardButton(),ii(),this.registerHotkeys(),this.modeGate.open(this.modeState.mode)}prepareRankView(){if(!this.ranksEl)return;this.ranksEl.innerHTML="",this.filterButtons.clear(),this.rankContainers.clear();const e=document.createElement("div");e.className="filters-bar";const t=document.createElement("div");t.className="filters-bar__pills",ke.forEach(({key:a,label:o})=>{const c=document.createElement("button");c.type="button",c.className="filter-pill",c.textContent=o,c.addEventListener("click",()=>this.toggleFilter(a)),c.setAttribute("aria-pressed","false"),t.appendChild(c),this.filterButtons.set(a,c)}),e.appendChild(t);const i=document.createElement("div");i.className="filters-bar__sort";const n=document.createElement("span");n.className="filters-bar__sort-label",n.textContent="Sortieren nach";const r=document.createElement("select");r.className="filters-bar__select",r.setAttribute("aria-label","Sortieren nach"),ki.forEach(({value:a,label:o})=>{const c=document.createElement("option");c.value=a,c.textContent=o,r.appendChild(c)}),r.addEventListener("change",()=>this.handleSortChange(r.value)),i.append(n,r),e.appendChild(i),this.filterBarEl=e,this.sortSelect=r,this.ranksEl.appendChild(e),this.rankListEl=document.createElement("div"),this.rankListEl.className="rank-list",this.ranksEl.appendChild(this.rankListEl),this.initializeRankContainers(),this.syncFilterControls()}initializeRankContainers(){const e=this.rankListEl;e&&(e.innerHTML="",this.rankContainers.clear(),Ee.forEach(t=>{const i=document.createElement("div");i.className="rank-group is-empty",i.dataset.rank=t,i.innerHTML=`<h3>${t}</h3><div class="rank-grid"></div>`,e.appendChild(i),this.rankContainers.set(t,i)}))}syncFilterControls(){if(this.filterButtons.size===0&&!this.sortSelect)return;const e=this.filters.getState();if(this.filterButtons.forEach((t,i)=>{const n=!!e[i];t.classList.toggle("is-active",n),t.setAttribute("aria-pressed",n?"true":"false")}),this.sortSelect&&(this.sortSelect.value=e.sortBy),this.filterBarEl){const t=ke.some(({key:i})=>!!e[i]);this.filterBarEl.classList.toggle("has-active",t)}}toggleFilter(e){this.filters.toggle(e)}handleSortChange(e){this.filters.setSort(e)}registerUIEvents(e){var t,i,n,r,a;(t=e.querySelector('button[data-action="cycle"]'))==null||t.addEventListener("click",()=>this.triggerCycle()),(i=e.querySelector('button[data-action="reset"]'))==null||i.addEventListener("click",()=>this.reset()),this.warcallButton=e.querySelector('button[data-action="warcall"]'),(n=this.warcallButton)==null||n.addEventListener("click",()=>this.scheduleWarcall()),(r=e.querySelector('button[data-action="help"]'))==null||r.addEventListener("click",()=>this.helpOverlay.toggle()),(a=e.querySelector('button[data-action="grave"]'))==null||a.addEventListener("click",()=>this.toast.show("Graveyard-Overlay ist in Arbeit."))}registerHotkeys(){I("e",()=>this.triggerCycle()),I("r",()=>this.reset()),I("n",()=>this.scheduleWarcall()),I("h",()=>this.helpOverlay.toggle()),I("f",()=>{if(!this.relations)return;const e=!this.relations.isLensEnabled();this.relations.setLensEnabled(e),this.toast.show(e?"Beziehungs-Lens aktiviert.":"Beziehungs-Lens deaktiviert.")}),I("l",()=>{if(!this.relations)return;const e=!this.relations.isLegendVisible();this.relations.setLegendVisible(e),this.toast.show(e?"Relations-Legende eingeblendet.":"Relations-Legende ausgeblendet.")}),ni("?",()=>{const e=ri().map(t=>t.key.toUpperCase()).join(", ");this.toast.show(`Aktive Hotkeys: ${e}`)})}triggerCycle(){this.store.tick(),this.rememberHint("e","Cycle ausgelöst (Hotkey E).")}reset(){this.rememberHint("r","Soft-Reset ausgeführt."),location.reload()}scheduleWarcall(){if(this.modeState.mode!=="player"){this.rememberHint("n-disabled","Im Spectate-Mode nicht verfügbar.");return}this.store.scheduleWarcall(),this.rememberHint("n","Neuer Warcall (Hotkey N).")}rememberHint(e,t){this.hotkeyHints.has(e)||(this.hotkeyHints.add(e),this.toast.show(t))}resolveWarcallParticipants(e,t){return e.map(i=>this.officerIndex.get(i)??t.graveyard.find(n=>n.id===i)).filter(i=>!!i)}mapWarcallEntry(e,t,i){const n=this.resolveWarcallParticipants(e.participants,t);return{plan:e,participants:n,currentCycle:i,phase:e.phase,status:Xe(e)}}syncOfficerIndex(e){e.forEach(t=>this.officerIndex.set(t.id,t))}renderOfficers(e){const t=this.rankListEl;if(!t)return;const i=this.filters.getState(),n=fi(e,i),r=new Set(n.map(a=>a.id));if(this.cards.forEach((a,o)=>{r.has(o)||(a.element.remove(),this.cards.delete(o))}),Ee.forEach(a=>{let o=this.rankContainers.get(a);if(o||(o=document.createElement("div"),o.className="rank-group is-empty",o.dataset.rank=a,o.innerHTML=`<h3>${a}</h3><div class="rank-grid"></div>`,t.appendChild(o),this.rankContainers.set(a,o)),!o)return;const c=o.querySelector(".rank-grid");if(!c)return;const A=n.filter(h=>h.rank===a);A.forEach(h=>{const d=this.cards.get(h.id);if(d)d.captureBounds(),d.update(h),c.appendChild(d.element),d.playFlip();else{const u=new ws(h,{tooltip:this.tooltip,onOpenDetails:()=>this.toast.show(`Details für ${h.name} werden zukünftig erweitert.`)});this.cards.set(h.id,u),c.appendChild(u.element)}}),o.classList.toggle("is-empty",A.length===0)}),this.relations){const a=Ks(e.officers,e.cycle);this.lastEdges=a;const o=mi(n,a,i);this.relations.setLensMask(Y(i)),this.relations.setEdges(o,e.cycle)}}renderDigestHistory(e){if(!this.digestHistoryEl)return;if(e.length===0){this.digestHistoryEl.innerHTML='<p class="digest-history__empty">Noch keine Highlights.</p>';return}const t=e.slice(0,6).map(i=>{const[n]=i,r=(n==null?void 0:n.cycle)??0,a=i.length,o=(n==null?void 0:n.title)??"Keine Highlights",c=a===1?"1 Highlight":`${a} Highlights`;return`
        <article class="digest-history__item">
          <header>
            <span class="digest-history__cycle">Zyklus ${r}</span>
            <span class="digest-history__count">${c}</span>
          </header>
          <p class="digest-history__title">${o}</p>
        </article>
      `});this.digestHistoryEl.innerHTML=t.join("")}focusDigestHistory(){!this.feedEl||!this.digestHistoryEl||(this.feedEl.scrollTo({top:0,behavior:"smooth"}),this.digestHistoryEl.classList.add("is-highlighted"),window.setTimeout(()=>{var e;(e=this.digestHistoryEl)==null||e.classList.remove("is-highlighted")},600))}renderFeed(){if(!this.feedBodyEl)return;const e=this.feed.getLines();e.length===0?this.feedBodyEl.innerHTML='<p class="feed-empty">Noch keine Ereignisse.</p>':this.feedBodyEl.innerHTML=e.map(t=>`<div class="feed-item">${t.text}</div>`).join(""),this.feedEl&&(this.feedEl.scrollTop=this.feedEl.scrollHeight)}updateGraveyardButton(){if(!this.root)return;const e=this.root.querySelector('button[data-action="grave"]');e&&(e.textContent=`Friedhof (${this.graveyard?this.graveyard.size:0})`)}updateWarcalls(e,t){const i=this.store.getState(),n={...i,warcalls:e},r=oe(n,"active"),a=oe(n,"pending"),o=r.map(h=>this.mapWarcallEntry(h,i,t)),c=a.map(h=>this.mapWarcallEntry(h,i,t)),A=[{label:"Aktiv",status:"active",entries:o},{label:"Ausstehend",status:"pending",entries:c},{label:"Abgeschlossen",status:"done",entries:this.completedWarcalls}];this.warcallDock.update(A,this.warcallTab)}onWarcallResolved(e){const t=this.store.getState(),i=this.resolveWarcallParticipants(e.warcall.participants,t),n={plan:{...e.warcall},participants:i,currentCycle:t.cycle,resolution:e,phase:"resolution",status:"done"};this.completedWarcalls=[n,...this.completedWarcalls].slice(0,Ei),this.updateWarcalls(t.warcalls,t.cycle)}highlightHierarchyChanges(e){e.forEach(t=>{const i=this.cards.get(t.officerId);i&&(i.element.classList.add("rank-changed"),setTimeout(()=>i.element.classList.remove("rank-changed"),600))})}openWarcall(e){document.body.classList.add("modal-open"),this.warcallModal.open(e)}}const Z=new us("nemesis-seed"),q=new gs;function Si(){return typeof window>"u"||new URLSearchParams(window.location.search).get("mode"),"spectate"}const P=Si();q.setMode(P);if(typeof window<"u"){const s=new URL(window.location.href);s.searchParams.get("mode")!==P&&(s.searchParams.set("mode",P),window.history.replaceState({},"",`${s.pathname}${s.search}${s.hash}`))}const Be=new Bi(Z,q);if(typeof window<"u"){window.nemesis={store:Z,ui:Be,uiMode:q,advanceCycle:()=>Z.tick()};const s=document.getElementById("app");s?Be.mount(s):console.error("#app not found")}
